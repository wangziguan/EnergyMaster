[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Router = Package['iron:router'].Router;\nvar RouteController = Package['iron:router'].RouteController;\nvar _ = Package.underscore._;\nvar ReactiveVar = Package['reactive-var'].ReactiveVar;\nvar check = Package.check.check;\nvar Match = Package.check.Match;\nvar Roles = Package['alanning:roles'].Roles;\nvar Helpers = Package['raix:handlebar-helpers'].Helpers;\nvar moment = Package['momentjs:moment'].moment;\nvar Tabular = Package['aldeed:tabular'].Tabular;\nvar ActiveRoute = Package['zimme:active-route'].ActiveRoute;\nvar Session = Package.session.Session;\nvar $ = Package.jquery.$;\nvar jQuery = Package.jquery.jQuery;\nvar Template = Package['templating-runtime'].Template;\nvar Iron = Package['iron:core'].Iron;\nvar SimpleSchema = Package['aldeed:simple-schema'].SimpleSchema;\nvar MongoObject = Package['aldeed:simple-schema'].MongoObject;\nvar Mongo = Package.mongo.Mongo;\nvar Blaze = Package.blaze.Blaze;\nvar UI = Package.blaze.UI;\nvar Handlebars = Package.blaze.Handlebars;\nvar Spacebars = Package.spacebars.Spacebars;\nvar HTML = Package.htmljs.HTML;\n\n/* Package-scope variables */\nvar __coffeescriptShare, AdminDashboard, dataTableOptions, t, pageY, currTop;\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/both/AdminDashboard.coffee.js                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\n                   \n\nAdminDashboard = {\n  schemas: {},\n  sidebarItems: [],\n  collectionItems: [],\n  alertSuccess: function(message) {\n    return Session.set('adminSuccess', message);\n  },\n  alertFailure: function(message) {\n    return Session.set('adminError', message);\n  },\n  checkAdmin: function() {\n    if (!Roles.userIsInRole(Meteor.userId(), ['admin'])) {\n      Meteor.call('adminCheckAdmin');\n      if (typeof (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.nonAdminRedirectRoute : void 0) === \"string\") {\n        Router.go(AdminConfig.nonAdminRedirectRoute);\n      }\n    }\n    if (typeof this.next === 'function') {\n      return this.next();\n    }\n  },\n  adminRoutes: ['adminDashboard', 'adminDashboardUsersNew', 'adminDashboardUsersEdit', 'adminDashboardView', 'adminDashboardNew', 'adminDashboardEdit'],\n  collectionLabel: function(collection) {\n    var ref;\n    if (collection === 'Users') {\n      return 'Users';\n    } else if ((collection != null) && typeof ((ref = AdminConfig.collections[collection]) != null ? ref.label : void 0) === 'string') {\n      return AdminConfig.collections[collection].label;\n    } else {\n      return Session.get('admin_collection_name');\n    }\n  },\n  addSidebarItem: function(title, url, options) {\n    var item;\n    item = {\n      title: title\n    };\n    if (_.isObject(url) && typeof options === 'undefined') {\n      item.options = url;\n    } else {\n      item.url = url;\n      item.options = options;\n    }\n    return this.sidebarItems.push(item);\n  },\n  extendSidebarItem: function(title, urls) {\n    var existing;\n    if (_.isObject(urls)) {\n      urls = [urls];\n    }\n    existing = _.find(this.sidebarItems, function(item) {\n      return item.title === title;\n    });\n    if (existing) {\n      return existing.options.urls = _.union(existing.options.urls, urls);\n    }\n  },\n  addCollectionItem: function(fn) {\n    return this.collectionItems.push(fn);\n  },\n  path: function(s) {\n    var path;\n    path = '/admin';\n    if (typeof s === 'string' && s.length > 0) {\n      path += (s[0] === '/' ? '' : '/') + s;\n    }\n    return path;\n  }\n};\n\nAdminDashboard.schemas.newUser = new SimpleSchema({\n  email: {\n    type: String,\n    label: \"Email address\"\n  },\n  password: {\n    type: String,\n    label: 'Password'\n  },\n  sendPassword: {\n    type: Boolean,\n    label: 'Send this user their password by email',\n    optional: true\n  }\n});\n\nAdminDashboard.schemas.sendResetPasswordEmail = new SimpleSchema({\n  _id: {\n    type: String\n  }\n});\n\nAdminDashboard.schemas.changePassword = new SimpleSchema({\n  _id: {\n    type: String\n  },\n  password: {\n    type: String\n  }\n});\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/both/router.coffee.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nthis.AdminController = RouteController.extend({\n  layoutTemplate: 'AdminLayout',\n  waitOn: function() {\n    return [Meteor.subscribe('adminUsers'), Meteor.subscribe('adminUser'), Meteor.subscribe('adminCollectionsCount')];\n  },\n  onBeforeAction: function() {\n    Session.set('adminSuccess', null);\n    Session.set('adminError', null);\n    Session.set('admin_title', '');\n    Session.set('admin_subtitle', '');\n    Session.set('admin_collection_page', null);\n    Session.set('admin_collection_name', null);\n    Session.set('admin_id', null);\n    Session.set('admin_doc', null);\n    if (!Roles.userIsInRole(Meteor.userId(), ['admin'])) {\n      Meteor.call('adminCheckAdmin');\n      if (typeof (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.nonAdminRedirectRoute : void 0) === 'string') {\n        Router.go(AdminConfig.nonAdminRedirectRoute);\n      }\n    }\n    return this.next();\n  }\n});\n\nRouter.route(\"adminDashboard\", {\n  path: \"/admin\",\n  template: \"AdminDashboard\",\n  controller: \"AdminController\",\n  action: function() {\n    return this.render();\n  },\n  onAfterAction: function() {\n    Session.set('admin_title', '总览');\n    Session.set('admin_collection_name', '');\n    return Session.set('admin_collection_page', '');\n  }\n});\n\nRouter.route(\"adminDashboardUsersView\", {\n  path: \"/admin/Users\",\n  template: \"AdminDashboardView\",\n  controller: \"AdminController\",\n  action: function() {\n    return this.render();\n  },\n  data: function() {\n    return {\n      admin_table: AdminTables.Users\n    };\n  },\n  onAfterAction: function() {\n    Session.set('admin_title', '账号管理');\n    Session.set('admin_subtitle', '');\n    return Session.set('admin_collection_name', 'Users');\n  }\n});\n\nRouter.route(\"adminDashboardUsersNew\", {\n  path: \"/admin/Users/new\",\n  template: \"AdminDashboardUsersNew\",\n  controller: 'AdminController',\n  action: function() {\n    return this.render();\n  },\n  onAfterAction: function() {\n    Session.set('admin_title', '账号管理');\n    Session.set('admin_subtitle', '创建新用户');\n    Session.set('admin_collection_page', '');\n    return Session.set('admin_collection_name', 'Users');\n  }\n});\n\nRouter.route(\"adminDashboardUsersEdit\", {\n  path: \"/admin/Users/:_id/edit\",\n  template: \"AdminDashboardUsersEdit\",\n  controller: \"AdminController\",\n  data: function() {\n    return {\n      user: Meteor.users.find(this.params._id).fetch(),\n      roles: Roles.getRolesForUser(this.params._id),\n      otherRoles: _.difference(_.map(Meteor.roles.find().fetch(), function(role) {\n        return role.name;\n      }), Roles.getRolesForUser(this.params._id))\n    };\n  },\n  action: function() {\n    return this.render();\n  },\n  onAfterAction: function() {\n    Session.set('admin_title', '账号管理');\n    Session.set('admin_subtitle', '编辑用户 ' + this.params._id);\n    Session.set('admin_collection_page', '');\n    Session.set('admin_collection_name', 'Users');\n    Session.set('admin_id', this.params._id);\n    return Session.set('admin_doc', Meteor.users.findOne({\n      _id: this.params._id\n    }));\n  }\n});\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/both/utils.coffee.js                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nthis.adminCollectionObject = function(collection) {\n  if (typeof AdminConfig.collections[collection] !== 'undefined' && typeof AdminConfig.collections[collection].collectionObject !== 'undefined') {\n    return AdminConfig.collections[collection].collectionObject;\n  } else {\n    return lookup(collection);\n  }\n};\n\nthis.adminCallback = function(name, args, callback) {\n  var ref1, ref2, stop;\n  stop = false;\n  if (typeof (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? (ref1 = AdminConfig.callbacks) != null ? ref1[name] : void 0 : void 0) === 'function') {\n    stop = (ref2 = AdminConfig.callbacks)[name].apply(ref2, args) === false;\n  }\n  if (typeof callback === 'function') {\n    if (!stop) {\n      return callback.apply(null, args);\n    }\n  }\n};\n\nthis.lookup = function(obj, root, required) {\n  var arr, ref;\n  if (required == null) {\n    required = true;\n  }\n  if (typeof root === 'undefined') {\n    root = Meteor.isServer ? global : window;\n  }\n  if (typeof obj === 'string') {\n    ref = root;\n    arr = obj.split('.');\n    while (arr.length && (ref = ref[arr.shift()])) {\n      continue;\n    }\n    if (!ref && required) {\n      throw new Error(obj + ' is not in the ' + root.toString());\n    } else {\n      return ref;\n    }\n  }\n  return obj;\n};\n\nthis.parseID = function(id) {\n  if (typeof id === 'string') {\n    if (id.indexOf(\"ObjectID\") > -1) {\n      return new Mongo.ObjectID(id.slice(id.indexOf('\"') + 1, id.lastIndexOf('\"')));\n    } else {\n      return id;\n    }\n  } else {\n    return id;\n  }\n};\n\nthis.parseIDs = function(ids) {\n  return _.map(ids, function(id) {\n    return parseID(id);\n  });\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/both/startup.coffee.js                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar adminCreateRouteEdit, adminCreateRouteEditOptions, adminCreateRouteNew, adminCreateRouteNewOptions, adminCreateRouteView, adminCreateRouteViewOptions, adminCreateRoutes, adminCreateTables, adminDelButton, adminEditButton, adminEditDelButtons, adminPublishTables, adminTablePubName, adminTablesDom, defaultColumns;\n\nthis.AdminTables = {};\n\nadminTablesDom = '<\"box\"<\"box-header\"<\"box-toolbar\"<\"pull-left\"<lf>><\"pull-right\"p>>><\"box-body\"t>><r>';\n\nadminEditButton = {\n  data: '_id',\n  title: 'Edit',\n  createdCell: function(node, cellData, rowData) {\n    return $(node).html(Blaze.toHTMLWithData(Template.adminEditBtn, {\n      _id: cellData\n    }));\n  },\n  width: '40px',\n  orderable: false\n};\n\nadminDelButton = {\n  data: '_id',\n  title: 'Delete',\n  createdCell: function(node, cellData, rowData) {\n    return $(node).html(Blaze.toHTMLWithData(Template.adminDeleteBtn, {\n      _id: cellData\n    }));\n  },\n  width: '40px',\n  orderable: false\n};\n\nadminEditDelButtons = [adminEditButton, adminDelButton];\n\ndefaultColumns = function() {\n  return [\n    {\n      data: '_id',\n      title: 'ID'\n    }\n  ];\n};\n\nadminTablePubName = function(collection) {\n  return \"admin_tabular_\" + collection;\n};\n\nadminCreateTables = function(collections) {\n  return _.each(typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.collections : void 0, function(collection, name) {\n    var columns;\n    _.defaults(collection, {\n      showEditColumn: true,\n      showDelColumn: true,\n      showInSideBar: true\n    });\n    columns = _.map(collection.tableColumns, function(column) {\n      var createdCell;\n      if (column.template) {\n        createdCell = function(node, cellData, rowData) {\n          $(node).html('');\n          return Blaze.renderWithData(Template[column.template], {\n            value: cellData,\n            doc: rowData\n          }, node);\n        };\n      }\n      return {\n        data: column.name,\n        title: column.label,\n        createdCell: createdCell\n      };\n    });\n    if (columns.length === 0) {\n      columns = defaultColumns();\n    }\n    if (collection.showEditColumn) {\n      columns.push(adminEditButton);\n    }\n    if (collection.showDelColumn) {\n      columns.push(adminDelButton);\n    }\n    return AdminTables[name] = new Tabular.Table({\n      name: name,\n      collection: adminCollectionObject(name),\n      pub: collection.children && adminTablePubName(name),\n      sub: collection.sub,\n      columns: columns,\n      extraFields: collection.extraFields,\n      dom: adminTablesDom,\n      selector: collection.selector || function() {\n        return {};\n      }\n    });\n  });\n};\n\nadminCreateRoutes = function(collections) {\n  _.each(collections, adminCreateRouteView);\n  _.each(collections, adminCreateRouteNew);\n  return _.each(collections, adminCreateRouteEdit);\n};\n\nadminCreateRouteView = function(collection, collectionName) {\n  return Router.route(\"adminDashboard\" + collectionName + \"View\", adminCreateRouteViewOptions(collection, collectionName));\n};\n\nadminCreateRouteViewOptions = function(collection, collectionName) {\n  var options, ref;\n  options = {\n    path: \"/admin/\" + collectionName,\n    template: \"AdminDashboardViewWrapper\",\n    controller: \"AdminController\",\n    data: function() {\n      return {\n        admin_table: AdminTables[collectionName]\n      };\n    },\n    action: function() {\n      return this.render();\n    },\n    onAfterAction: function() {\n      var ref, ref1;\n      Session.set('admin_title', collectionName);\n      Session.set('admin_subtitle', 'View');\n      Session.set('admin_collection_name', collectionName);\n      return (ref = collection.routes) != null ? (ref1 = ref.view) != null ? ref1.onAfterAction : void 0 : void 0;\n    }\n  };\n  return _.defaults(options, (ref = collection.routes) != null ? ref.view : void 0);\n};\n\nadminCreateRouteNew = function(collection, collectionName) {\n  return Router.route(\"adminDashboard\" + collectionName + \"New\", adminCreateRouteNewOptions(collection, collectionName));\n};\n\nadminCreateRouteNewOptions = function(collection, collectionName) {\n  var options, ref;\n  options = {\n    path: \"/admin/\" + collectionName + \"/new\",\n    template: \"AdminDashboardNew\",\n    controller: \"AdminController\",\n    action: function() {\n      return this.render();\n    },\n    onAfterAction: function() {\n      var ref, ref1;\n      Session.set('admin_title', AdminDashboard.collectionLabel(collectionName));\n      Session.set('admin_subtitle', 'Create new');\n      Session.set('admin_collection_page', 'new');\n      Session.set('admin_collection_name', collectionName);\n      return (ref = collection.routes) != null ? (ref1 = ref[\"new\"]) != null ? ref1.onAfterAction : void 0 : void 0;\n    },\n    data: function() {\n      return {\n        admin_collection: adminCollectionObject(collectionName)\n      };\n    }\n  };\n  return _.defaults(options, (ref = collection.routes) != null ? ref[\"new\"] : void 0);\n};\n\nadminCreateRouteEdit = function(collection, collectionName) {\n  return Router.route(\"adminDashboard\" + collectionName + \"Edit\", adminCreateRouteEditOptions(collection, collectionName));\n};\n\nadminCreateRouteEditOptions = function(collection, collectionName) {\n  var options, ref;\n  options = {\n    path: \"/admin/\" + collectionName + \"/:_id/edit\",\n    template: \"AdminDashboardEdit\",\n    controller: \"AdminController\",\n    waitOn: function() {\n      var ref, ref1;\n      Meteor.subscribe('adminCollectionDoc', collectionName, parseID(this.params._id));\n      return (ref = collection.routes) != null ? (ref1 = ref.edit) != null ? ref1.waitOn : void 0 : void 0;\n    },\n    action: function() {\n      return this.render();\n    },\n    onAfterAction: function() {\n      var ref, ref1;\n      Session.set('admin_title', AdminDashboard.collectionLabel(collectionName));\n      Session.set('admin_subtitle', 'Edit ' + this.params._id);\n      Session.set('admin_collection_page', 'edit');\n      Session.set('admin_collection_name', collectionName);\n      Session.set('admin_id', parseID(this.params._id));\n      Session.set('admin_doc', adminCollectionObject(collectionName).findOne({\n        _id: parseID(this.params._id)\n      }));\n      return (ref = collection.routes) != null ? (ref1 = ref.edit) != null ? ref1.onAfterAction : void 0 : void 0;\n    },\n    data: function() {\n      return {\n        admin_collection: adminCollectionObject(collectionName)\n      };\n    }\n  };\n  return _.defaults(options, (ref = collection.routes) != null ? ref.edit : void 0);\n};\n\nadminPublishTables = function(collections) {\n  return _.each(collections, function(collection, name) {\n    if (!collection.children) {\n      return void 0;\n    }\n    return Meteor.publishComposite(adminTablePubName(name), function(tableName, ids, fields) {\n      var extraFields;\n      check(tableName, String);\n      check(ids, Array);\n      check(fields, Match.Optional(Object));\n      extraFields = _.reduce(collection.extraFields, function(fields, name) {\n        fields[name] = 1;\n        return fields;\n      }, {});\n      _.extend(fields, extraFields);\n      this.unblock();\n      return {\n        find: function() {\n          this.unblock();\n          return adminCollectionObject(name).find({\n            _id: {\n              $in: ids\n            }\n          }, {\n            fields: fields\n          });\n        },\n        children: collection.children\n      };\n    });\n  });\n};\n\nMeteor.startup(function() {\n  adminCreateTables(typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.collections : void 0);\n  adminCreateRoutes(typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.collections : void 0);\n  if (Meteor.isServer) {\n    adminPublishTables(typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.collections : void 0);\n  }\n  if (AdminTables.Users) {\n    return void 0;\n  }\n  return AdminTables.Users = new Tabular.Table({\n    changeSelector: function(selector, userId) {\n      var $or;\n      $or = selector['$or'];\n      $or && (selector['$or'] = _.map($or, function(exp) {\n        var ref;\n        if (((ref = exp.emails) != null ? ref['$regex'] : void 0) != null) {\n          return {\n            emails: {\n              $elemMatch: {\n                address: exp.emails\n              }\n            }\n          };\n        } else {\n          return exp;\n        }\n      }));\n      return selector;\n    },\n    name: 'Users',\n    collection: Meteor.users,\n    columns: _.union([\n      {\n        data: '_id',\n        title: 'Admin',\n        createdCell: function(node, cellData, rowData) {\n          return $(node).html(Blaze.toHTMLWithData(Template.adminUsersIsAdmin, {\n            _id: cellData\n          }));\n        },\n        width: '40px'\n      }, {\n        data: 'emails',\n        title: 'Email',\n        render: function(value) {\n          return value[0].address;\n        },\n        searchable: true\n      }, {\n        data: 'emails',\n        title: 'Mail',\n        createdCell: function(node, cellData, rowData) {\n          return $(node).html(Blaze.toHTMLWithData(Template.adminUsersMailBtn, {\n            emails: cellData\n          }));\n        },\n        width: '40px'\n      }, {\n        data: 'createdAt',\n        title: 'Joined'\n      }\n    ], adminEditDelButtons),\n    dom: adminTablesDom\n  });\n});\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/both/collections.coffee.js                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nthis.AdminCollectionsCount = new Mongo.Collection('adminCollectionsCount');\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/client/html/template.admin_templates.js                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n\nTemplate.__checkName(\"AdminDashboard\");\nTemplate[\"AdminDashboard\"] = new Template(\"Template.AdminDashboard\", (function() {\n  var view = this;\n  return Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"adminWidgets\"));\n  }, function() {\n    return [ \"\\n\\t\", Blaze._TemplateWith(function() {\n      return {\n        template: Spacebars.call(view.lookup(\"template\")),\n        data: Spacebars.call(view.lookup(\"data\"))\n      };\n    }, function() {\n      return Spacebars.include(function() {\n        return Spacebars.call(Template.__dynamic);\n      });\n    }), \"\\n\\t\" ];\n  }, function() {\n    return [ \"\\n\\t\", Spacebars.include(view.lookupTemplate(\"adminDefaultWidgets\")), \"\\n\\t\" ];\n  });\n}));\n\nTemplate.__checkName(\"AdminDashboardNew\");\nTemplate[\"AdminDashboardNew\"] = new Template(\"Template.AdminDashboardNew\", (function() {\n  var view = this;\n  return [ Spacebars.include(view.lookupTemplate(\"adminAlert\")), \"\\n\\t\", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"adminTemplate\"), view.lookup(\"admin_collection_name\"), \"new\");\n  }, function() {\n    return [ \"\\n\\t\\t\", Spacebars.With(function() {\n      return Spacebars.dataMustache(view.lookup(\"adminTemplate\"), view.lookup(\"admin_collection_name\"), \"new\");\n    }, function() {\n      return [ \"\\n\\t\\t\", Blaze._TemplateWith(function() {\n        return {\n          template: Spacebars.call(view.lookup(\"name\")),\n          data: Spacebars.call(view.lookup(\"data\"))\n        };\n      }, function() {\n        return Spacebars.include(function() {\n          return Spacebars.call(Template.__dynamic);\n        });\n      }), \"\\n\\t\\t\" ];\n    }), \"\\n\\t\" ];\n  }, function() {\n    return [ \"\\n\\t\\t\", HTML.DIV({\n      class: \"box box-default\"\n    }, \"\\n\\t\\t\\t\", HTML.DIV({\n      class: \"box-body\"\n    }, \"\\n\\t\\t\\t\\t\", Blaze._TemplateWith(function() {\n      return {\n        id: Spacebars.call(\"admin_insert\"),\n        collection: Spacebars.call(view.lookup(\"admin_collection\")),\n        fields: Spacebars.call(view.lookup(\"admin_fields\")),\n        omitFields: Spacebars.call(view.lookup(\"admin_omit_fields\")),\n        buttonContent: Spacebars.call(\"Create\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"quickForm\"));\n    }), \"\\n\\t\\t\\t\"), \"\\n\\t\\t\"), \"\\n\\t\" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"AdminDashboardEdit\");\nTemplate[\"AdminDashboardEdit\"] = new Template(\"Template.AdminDashboardEdit\", (function() {\n  var view = this;\n  return [ Spacebars.include(view.lookupTemplate(\"adminAlert\")), \"\\n\\t\", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"adminTemplate\"), view.lookup(\"admin_collection_name\"), \"edit\");\n  }, function() {\n    return [ \"\\n\\t\\t\", Spacebars.With(function() {\n      return Spacebars.dataMustache(view.lookup(\"adminTemplate\"), view.lookup(\"admin_collection_name\"), \"edit\");\n    }, function() {\n      return [ \"\\n\\t\\t\", Blaze._TemplateWith(function() {\n        return {\n          template: Spacebars.call(view.lookup(\"name\")),\n          data: Spacebars.call(view.lookup(\"data\"))\n        };\n      }, function() {\n        return Spacebars.include(function() {\n          return Spacebars.call(Template.__dynamic);\n        });\n      }), \"\\n\\t\\t\" ];\n    }), \"\\n\\t\" ];\n  }, function() {\n    return [ \"\\n\\t\\t\", HTML.DIV({\n      class: \"box box-default\"\n    }, \"\\n\\t\\t\\t\", HTML.DIV({\n      class: \"box-body\"\n    }, \"\\n\\t\\t\\t\\t\", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"admin_current_doc\"));\n    }, function() {\n      return [ \"\\n\\t\\t\\t\\t\", Blaze._TemplateWith(function() {\n        return {\n          id: Spacebars.call(\"admin_update\"),\n          collection: Spacebars.call(view.lookup(\"admin_collection\")),\n          doc: Spacebars.call(view.lookup(\"admin_current_doc\")),\n          fields: Spacebars.call(view.lookup(\"admin_fields\")),\n          omitFields: Spacebars.call(view.lookup(\"admin_omit_fields\")),\n          buttonContent: Spacebars.call(\"Update\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"quickForm\"));\n      }), \"\\n\\t\\t\\t\\t\" ];\n    }), \"\\n\\t\\t\\t\"), \"\\n\\t\\t\"), \"\\n\\t\" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"AdminDashboardViewWrapper\");\nTemplate[\"AdminDashboardViewWrapper\"] = new Template(\"Template.AdminDashboardViewWrapper\", (function() {\n  var view = this;\n  return HTML.Raw(\"<div></div>\\n\\t\");\n}));\n\nTemplate.__checkName(\"AdminDashboardView\");\nTemplate[\"AdminDashboardView\"] = new Template(\"Template.AdminDashboardView\", (function() {\n  var view = this;\n  return [ Spacebars.include(view.lookupTemplate(\"adminAlert\")), \"\\n\\t\", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"adminTemplate\"), view.lookup(\"admin_collection_name\"), \"view\");\n  }, function() {\n    return [ \"\\n\\t\\t\", Spacebars.With(function() {\n      return Spacebars.dataMustache(view.lookup(\"adminTemplate\"), view.lookup(\"admin_collection_name\"), \"view\");\n    }, function() {\n      return [ \"\\n\\t\\t\", Blaze._TemplateWith(function() {\n        return {\n          template: Spacebars.call(view.lookup(\"name\")),\n          data: Spacebars.call(view.lookup(\"data\"))\n        };\n      }, function() {\n        return Spacebars.include(function() {\n          return Spacebars.call(Template.__dynamic);\n        });\n      }), \"\\n\\t\\t\" ];\n    }), \"\\n\\t\" ];\n  }, function() {\n    return [ \"\\n\\t\\t\", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"hasDocuments\"));\n    }, function() {\n      return [ \"\\n\\t\\t\\t\", Blaze._TemplateWith(function() {\n        return {\n          table: Spacebars.call(view.lookup(\"admin_table\")),\n          class: Spacebars.call(\"table dataTable\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"tabular\"));\n      }), \"\\n\\t\\t\" ];\n    }, function() {\n      return [ \"\\n\\t\\t\\t\", HTML.DIV({\n        class: \"alert alert-info\"\n      }, \"\\n\\t\\t\\t\\t\", HTML.P(\"There are no visible items in this collection.\"), \"\\n\\t\\t\\t\\t\", HTML.P(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"newPath\"));\n        },\n        class: \"btn btn-primary\"\n      }, HTML.I({\n        class: \"fa fa-plus\"\n      }), \" Add one\")), \"\\n\\t\\t\\t\"), \"\\n\\t\\t\" ];\n    }), \"\\n\\t\" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"AdminDashboardUsersNew\");\nTemplate[\"AdminDashboardUsersNew\"] = new Template(\"Template.AdminDashboardUsersNew\", (function() {\n  var view = this;\n  return HTML.DIV({\n    class: \"box box-default\"\n  }, \"\\n\\t\\t\", HTML.DIV({\n    class: \"box-body\"\n  }, \"\\n\\t\\t\\t\", Spacebars.include(view.lookupTemplate(\"adminAlert\")), \"\\n\\t\\t\\t\", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"adminNewUser\"),\n      schema: Spacebars.call(Spacebars.dot(view.lookup(\"AdminSchemas\"), \"newUser\")),\n      type: Spacebars.call(\"method\"),\n      meteormethod: Spacebars.call(\"adminNewUser\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"autoForm\"), function() {\n      return [ \"\\n\\n\\t\\t\\t\", Blaze._TemplateWith(function() {\n        return {\n          name: Spacebars.call(\"email\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"afQuickField\"));\n      }), \"\\n\\t\\t\\t\", Blaze._TemplateWith(function() {\n        return {\n          name: Spacebars.call(\"password\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"afQuickField\"));\n      }), \"\\n\\t\\t\\t\", Blaze._TemplateWith(function() {\n        return {\n          name: Spacebars.call(\"sendPassword\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"afQuickField\"));\n      }), \"\\n\\n\\t\\t\\t\", HTML.BUTTON({\n        type: \"submit\",\n        class: \"btn btn-primary\"\n      }, \"Add User\"), \"\\n\\n\\t\\t\\t\" ];\n    });\n  }), \"\\n\\t\\t\"), \"\\n\\t\");\n}));\n\nTemplate.__checkName(\"AdminDashboardUsersEdit\");\nTemplate[\"AdminDashboardUsersEdit\"] = new Template(\"Template.AdminDashboardUsersEdit\", (function() {\n  var view = this;\n  return HTML.DIV({\n    class: \"box box-default\"\n  }, \"\\n\\t\\t\", HTML.DIV({\n    class: \"box-body\"\n  }, \"\\n\\t\\t\\t\", Spacebars.include(view.lookupTemplate(\"adminAlert\")), \"\\n\\t\\t\\t\", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"adminGetUserSchema\"));\n  }, function() {\n    return [ \"\\n\\t\\t\\t\", Blaze._TemplateWith(function() {\n      return {\n        id: Spacebars.call(\"adminUpdateUser\"),\n        buttonContent: Spacebars.call(\"Update\"),\n        buttonClasses: Spacebars.call(\"btn btn-primary btn-sm\"),\n        collection: Spacebars.call(view.lookup(\"adminGetUsers\")),\n        schema: Spacebars.call(view.lookup(\"adminGetUserSchema\")),\n        doc: Spacebars.call(view.lookup(\"admin_current_doc\")),\n        omitFields: Spacebars.call(\"roles,services\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"quickForm\"));\n    }), \"\\n\\t\\t\\t\", HTML.HR(), \"\\n\\t\\t\\t\" ];\n  }), \"\\n\\n\\t\\t\\t\", HTML.Raw(\"<h4>User Roles</h4>\"), \"\\n\\t\\t\\t\", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"roles\"));\n  }, function() {\n    return [ \"\\n\\t\\t\\t\", HTML.BUTTON({\n      class: \"btn btn-primary btn-xs btn-remove-role\",\n      role: function() {\n        return Spacebars.mustache(view.lookup(\".\"));\n      },\n      user: function() {\n        return Spacebars.mustache(view.lookup(\"admin_current_id\"));\n      }\n    }, Blaze.View(\"lookup:.\", function() {\n      return Spacebars.mustache(view.lookup(\".\"));\n    })), \"\\n\\t\\t\\t\" ];\n  }), \"\\n\\t\\t\\t\", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"otherRoles\"));\n  }, function() {\n    return [ \"\\n\\t\\t\\t\", HTML.BUTTON({\n      class: \"btn btn-default btn-xs btn-add-role\",\n      role: function() {\n        return Spacebars.mustache(view.lookup(\".\"));\n      },\n      user: function() {\n        return Spacebars.mustache(view.lookup(\"admin_current_id\"));\n      }\n    }, Blaze.View(\"lookup:.\", function() {\n      return Spacebars.mustache(view.lookup(\".\"));\n    })), \"\\n\\t\\t\\t\" ];\n  }), \"\\n\\t\\t\\t\", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"roles\"));\n  }, function() {\n    return [ \"\\n\\t\\t\\t\", HTML.P({\n      style: \"margin-top:5px;\"\n    }, \"Click a role to toggle it.\"), \"\\n\\t\\t\\t\" ];\n  }, function() {\n    return [ \"\\n\\t\\t\\t\", HTML.P(\"User not in any roles. Click a role to add it to a user.\"), \"\\n\\t\\t\\t\" ];\n  }), \"\\n\\n\\t\\t\\t\", HTML.Raw(\"<hr>\"), \"\\n\\t\\t\\t\", HTML.Raw(\"<h4>Reset Password</h4>\"), \"\\n\\t\\t\\t\", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"adminSendResetPasswordEmail\"),\n      schema: Spacebars.call(Spacebars.dot(view.lookup(\"AdminSchemas\"), \"sendResetPasswordEmail\")),\n      type: Spacebars.call(\"method\"),\n      meteormethod: Spacebars.call(\"adminSendResetPasswordEmail\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"autoForm\"), function() {\n      return [ \"\\n\\t\\t\\t\", HTML.DIV({\n        class: \"form-group hidden\"\n      }, \"\\n\\t\\t\\t\\t\", HTML.LABEL({\n        class: \"control-label\",\n        for: \"title\"\n      }, \"ID\"), \"\\n\\t\\t\\t\\t\", HTML.INPUT({\n        value: function() {\n          return Spacebars.mustache(view.lookup(\"admin_current_id\"));\n        },\n        type: \"text\",\n        name: \"_id\",\n        omitfields: \"createdAtupdatedAt\",\n        required: \"\",\n        \"data-schema-key\": \"_id\",\n        class: \"form-control\",\n        autocomplete: \"off\"\n      }), \"\\n\\t\\t\\t\\t\", HTML.SPAN({\n        class: \"help-block\"\n      }), \"\\n\\t\\t\\t\"), \"\\n\\t\\t\\t\", HTML.P(\"Send a reset password email to \", Blaze.View(\"lookup:admin_current_doc.emails.0.address\", function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"admin_current_doc\"), \"emails\", \"0\", \"address\"));\n      })), \"\\n\\t\\t\\t\", HTML.BUTTON({\n        type: \"submit\",\n        class: \"btn btn-primary btn-sm\"\n      }, \"Send Email\"), \"\\n\\t\\t\\t\" ];\n    });\n  }), \"\\n\\n\\t\\t\\t\", HTML.Raw(\"<hr>\"), \"\\n\\t\\t\\t\", HTML.Raw(\"<h4>Change Password</h4>\"), \"\\n\\t\\t\\t\", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"adminChangePassword\"),\n      schema: Spacebars.call(Spacebars.dot(view.lookup(\"AdminSchemas\"), \"changePassword\")),\n      type: Spacebars.call(\"method\"),\n      meteormethod: Spacebars.call(\"adminChangePassword\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"autoForm\"), function() {\n      return [ \"\\n\\t\\t\\t\", HTML.DIV({\n        class: \"form-group hidden\"\n      }, \"\\n\\t\\t\\t\\t\", HTML.LABEL({\n        class: \"control-label\",\n        for: \"title\"\n      }, \"ID\"), \"\\n\\t\\t\\t\\t\", HTML.INPUT({\n        value: function() {\n          return Spacebars.mustache(view.lookup(\"admin_current_id\"));\n        },\n        type: \"text\",\n        name: \"_id\",\n        omitfields: \"createdAtupdatedAt\",\n        required: \"\",\n        \"data-schema-key\": \"_id\",\n        class: \"form-control\",\n        autocomplete: \"off\"\n      }), \"\\n\\t\\t\\t\\t\", HTML.SPAN({\n        class: \"help-block\"\n      }), \"\\n\\t\\t\\t\"), \"\\n\\t\\t\\t\", Blaze._TemplateWith(function() {\n        return {\n          name: Spacebars.call(\"password\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"afQuickField\"));\n      }), \"\\n\\t\\t\\t\", HTML.BUTTON({\n        type: \"submit\",\n        class: \"btn btn-primary btn-sm\"\n      }, \"Change Password\"), \"\\n\\t\\t\\t\" ];\n    });\n  }), \"\\n\\t\\t\"), \"\\n\\t\");\n}));\n\nTemplate.__checkName(\"adminAlert\");\nTemplate[\"adminAlert\"] = new Template(\"Template.adminAlert\", (function() {\n  var view = this;\n  return [ Blaze.If(function() {\n    return Spacebars.dataMustache(Spacebars.dot(view.lookup(\"$\"), \"Session\", \"get\"), \"adminSuccess\");\n  }, function() {\n    return [ \"\\n\\t\", HTML.DIV({\n      class: \"alert alert-success admin-alert\"\n    }, \"\\n\\t\\t\", Blaze.View(\"lookup:$.Session.get\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"$\"), \"Session\", \"get\"), \"adminSuccess\");\n    }), \"\\n\\t\"), \"\\n\\t\" ];\n  }), \"\\n\\n\\t\", Blaze.If(function() {\n    return Spacebars.dataMustache(Spacebars.dot(view.lookup(\"$\"), \"Session\", \"get\"), \"adminError\");\n  }, function() {\n    return [ \"\\n\\t\", HTML.DIV({\n      class: \"alert alert-danger admin-alert\"\n    }, \"\\n\\t\\t\", Blaze.View(\"lookup:$.Session.get\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"$\"), \"Session\", \"get\"), \"adminError\");\n    }), \"\\n\\t\"), \"\\n\\t\" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"adminUsersIsAdmin\");\nTemplate[\"adminUsersIsAdmin\"] = new Template(\"Template.adminUsersIsAdmin\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"adminIsUserInRole\"), Spacebars.dot(view.lookup(\".\"), \"_id\"), \"admin\");\n  }, function() {\n    return HTML.I({\n      class: \"fa fa-check\"\n    });\n  });\n}));\n\nTemplate.__checkName(\"adminUsersMailBtn\");\nTemplate[\"adminUsersMailBtn\"] = new Template(\"Template.adminUsersMailBtn\", (function() {\n  var view = this;\n  return HTML.A({\n    href: function() {\n      return [ \"mailto:\", Spacebars.mustache(view.lookup(\"adminUserEmail\"), view.lookup(\".\")) ];\n    },\n    class: \"btn btn-default btn-xs\"\n  }, HTML.Raw('<i class=\"fa fa-envelope\"></i>'));\n}));\n\nTemplate.__checkName(\"adminEditBtn\");\nTemplate[\"adminEditBtn\"] = new Template(\"Template.adminEditBtn\", (function() {\n  var view = this;\n  return [ HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"path\"));\n    },\n    class: \"hidden-xs btn btn-xs btn-primary\"\n  }, HTML.Raw('<i class=\"fa fa-pencil\"></i>')), \"\\n\\t\", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"path\"));\n    },\n    class: \"visible-xs btn btn-sm btn-primary\"\n  }, HTML.Raw('<i class=\"fa fa-pencil\"></i>'), \" Edit\") ];\n}));\n\nTemplate.__checkName(\"adminDeleteBtn\");\nTemplate[\"adminDeleteBtn\"] = new Template(\"Template.adminDeleteBtn\", (function() {\n  var view = this;\n  return [ HTML.A({\n    \"data-toggle\": \"modal\",\n    doc: function() {\n      return Spacebars.mustache(view.lookup(\"_id\"));\n    },\n    href: \"#admin-delete-modal\",\n    class: \"hidden-xs btn btn-xs btn-danger btn-delete\"\n  }, HTML.I({\n    class: \"fa fa-times\",\n    doc: function() {\n      return Spacebars.mustache(view.lookup(\"_id\"));\n    }\n  })), \"\\n\\t\", HTML.A({\n    \"data-toggle\": \"modal\",\n    doc: function() {\n      return Spacebars.mustache(view.lookup(\"_id\"));\n    },\n    href: \"#admin-delete-modal\",\n    class: \"visible-xs btn btn-sm btn-danger btn-delete\"\n  }, HTML.I({\n    class: \"fa fa-times\",\n    doc: function() {\n      return Spacebars.mustache(view.lookup(\"_id\"));\n    }\n  }), \" Delete\") ];\n}));\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/client/html/template.admin_widgets.js                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n\nTemplate.__checkName(\"adminDefaultWidgets\");\nTemplate[\"adminDefaultWidgets\"] = new Template(\"Template.adminDefaultWidgets\", (function() {\n  var view = this;\n  return Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"admin_collections\"));\n  }, function() {\n    return [ \"\\n\\t\\t\", Blaze.Unless(function() {\n      return Spacebars.dataMustache(view.lookup(\"$eq\"), view.lookup(\"showWidget\"), false);\n    }, function() {\n      return [ \"\\n\\t\\t\\t\", Blaze._TemplateWith(function() {\n        return {\n          collection: Spacebars.call(view.lookup(\"name\"))\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"adminCollectionWidget\"));\n      }), \"\\n\\t\\t\" ];\n    }), \"\\n\\t\" ];\n  });\n}));\n\nTemplate.__checkName(\"adminCollectionWidget\");\nTemplate[\"adminCollectionWidget\"] = new Template(\"Template.adminCollectionWidget\", (function() {\n  var view = this;\n  return HTML.DIV({\n    class: function() {\n      return Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"class\"));\n      }, function() {\n        return Blaze.View(\"lookup:class\", function() {\n          return Spacebars.mustache(view.lookup(\"class\"));\n        });\n      }, function() {\n        return \"col-lg-3 col-xs-6\";\n      });\n    }\n  }, \"\\n\\t\", Spacebars.With(function() {\n    return Spacebars.dataMustache(view.lookup(\"adminGetCollection\"), view.lookup(\"collection\"));\n  }, function() {\n    return [ \"\\n\\t\\t\", HTML.A({\n      href: function() {\n        return [ \"/admin/\", Spacebars.mustache(Spacebars.dot(view.lookup(\".\"), \"name\")) ];\n      }\n    }, \"\\n\\t\\t\\t\", HTML.DIV({\n      class: function() {\n        return [ \"small-box bg-\", Spacebars.mustache(view.lookup(\"color\")) ];\n      }\n    }, \"\\n\\t\\t\\t\\t\", HTML.DIV({\n      class: \"inner\"\n    }, \"\\n\\t\\t\\t\\t\\t\", HTML.H3(\"\\n\\t\\t\\t\\t\\t\\t\", Blaze.View(\"lookup:adminCollectionCount\", function() {\n      return Spacebars.mustache(view.lookup(\"adminCollectionCount\"), view.lookup(\"name\"));\n    }), \"\\n\\t\\t\\t\\t\\t\"), \"\\n\\t\\t\\t\\t\\t\", HTML.P(\"\\n\\t\\t\\t\\t\\t\\t\", Blaze.View(\"lookup:..label\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\".\"), \"label\"));\n    }), \"\\n\\t\\t\\t\\t\\t\"), \"\\n\\t\\t\\t\\t\"), \"\\n\\t\\t\\t\\t\", HTML.DIV({\n      class: \"icon\"\n    }, \"\\n\\t\\t\\t\\t\\t\", HTML.I({\n      class: function() {\n        return [ \"fa fa-\", Spacebars.mustache(Spacebars.dot(view.lookup(\".\"), \"icon\")) ];\n      }\n    }), \"\\n\\t\\t\\t\\t\"), \"\\n\\t\\t\\t\\t\", HTML.A({\n      class: \"small-box-footer\"\n    }, \"\\n\\t\\t\\t\\t\\t查看 \", HTML.I({\n      class: \"fa fa-arrow-circle-right\"\n    }), \"\\n\\t\\t\\t\\t\"), \"\\n\\t\\t\\t\"), \"\\n\\t\\t\"), \"\\n\\t\\t\" ];\n  }), \"\\n\\t\");\n}));\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/client/html/template.admin_layouts.js                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n\nTemplate.__checkName(\"AdminLayout\");\nTemplate[\"AdminLayout\"] = new Template(\"Template.AdminLayout\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"AdminConfig\"));\n  }, function() {\n    return [ \"\\n  \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"login\"));\n    }, function() {\n      return [ \"\\n  \", HTML.DIV({\n        class: \"admin-layout\"\n      }, \"\\n    \", Blaze._TemplateWith(function() {\n        return {\n          skin: Spacebars.call(view.lookup(\"admin_skin\"))\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"AdminLTE\"), function() {\n          return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"AdminHeader\")), \"\\n      \", Spacebars.include(view.lookupTemplate(\"AdminSidebar\")), \"\\n      \", HTML.DIV({\n            class: \"content-wrapper\",\n            style: function() {\n              return [ \"min-height: \", Spacebars.mustache(view.lookup(\"minHeight\")) ];\n            }\n          }, \"\\n        \", HTML.SECTION({\n            class: \"content-header\"\n          }, \"\\n          \", HTML.H1(\"\\n            \", Blaze.View(\"lookup:$.Session.get\", function() {\n            return Spacebars.mustache(Spacebars.dot(view.lookup(\"$\"), \"Session\", \"get\"), \"admin_title\");\n          }), \"\\n            \", HTML.SMALL(Blaze.View(\"lookup:$.Session.get\", function() {\n            return Spacebars.mustache(Spacebars.dot(view.lookup(\"$\"), \"Session\", \"get\"), \"admin_subtitle\");\n          })), \"\\n          \"), \"\\n          \", HTML.OL({\n            class: \"breadcrumb\"\n          }, \"\\n            \", Blaze.If(function() {\n            return Spacebars.dataMustache(Spacebars.dot(view.lookup(\"$\"), \"Session\", \"get\"), \"admin_collection_name\");\n          }, function() {\n            return [ \"\\n              \", HTML.LI(HTML.A({\n              href: function() {\n                return [ \"/admin/\", Spacebars.mustache(Spacebars.dot(view.lookup(\"$\"), \"Session\", \"get\"), \"admin_collection_name\"), \"/\" ];\n              }\n            }, \"\\n                \", Blaze.View(\"lookup:adminCollectionLabel\", function() {\n              return Spacebars.mustache(view.lookup(\"adminCollectionLabel\"), view.lookup(\"admin_collection_name\"));\n            }), \"\\n              \")), \"\\n            \" ];\n          }), \"\\n\\n            \", Blaze.If(function() {\n            return Spacebars.dataMustache(Spacebars.dot(view.lookup(\"$\"), \"Session\", \"equals\"), \"admin_collection_page\", \"new\");\n          }, function() {\n            return [ \"\\n              \", HTML.LI(\"New\"), \"\\n            \" ];\n          }), \"\\n\\n            \", Blaze.If(function() {\n            return Spacebars.dataMustache(Spacebars.dot(view.lookup(\"$\"), \"Session\", \"equals\"), \"admin_collection_page\", \"edit\");\n          }, function() {\n            return [ \"\\n              \", HTML.LI(\"Edit\"), \"\\n            \" ];\n          }), \"\\n          \"), \"\\n        \"), \"\\n        \", HTML.SECTION({\n            class: \"content\"\n          }, \"\\n          \", Spacebars.include(view.lookupTemplate(\"yield\")), \"\\n        \"), \"\\n      \"), \"\\n    \" ];\n        });\n      }), \"\\n  \"), \"\\n  \", Spacebars.include(view.lookupTemplate(\"AdminDeleteModal\")), \"\\n  \" ];\n    }, function() {\n      return [ \"\\n  \", Spacebars.include(view.lookupTemplate(\"NotAdmin\")), \"\\n  \" ];\n    }), \"\\n  \" ];\n  }, function() {\n    return [ \"\\n  \", Spacebars.include(view.lookupTemplate(\"NoConfig\")), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"AdminDeleteModal\");\nTemplate[\"AdminDeleteModal\"] = new Template(\"Template.AdminDeleteModal\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"modal fade\" id=\"admin-delete-modal\">\\n    <div class=\"modal-dialog\">\\n      <div class=\"modal-content\">\\n        <div class=\"modal-header\">\\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\\n          <h4 class=\"modal-title\">Confirm delete</h4>\\n        </div>\\n        <div class=\"modal-body\">\\n          <p>Are you sure you want to delete this?</p>\\n        </div>\\n        <div class=\"modal-footer\">\\n          <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\\n          <button type=\"button\" id=\"confirm-delete\" class=\"btn btn-danger\">Delete</button>\\n        </div>\\n      </div><!-- /.modal-content -->\\n    </div><!-- /.modal-dialog -->\\n  </div><!-- /.modal -->');\n}));\n\nTemplate.__checkName(\"NotAdmin\");\nTemplate[\"NotAdmin\"] = new Template(\"Template.NotAdmin\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"container\">\\n    <div class=\"row\">\\n      <div class=\"col-md-4 col-md-offset-4\">\\n        <p class=\"alert alert-info\" style=\"margin-top:100px;\">\\n          You need to be an admin to view this page\\n        </p>\\n      </div>\\n    </div>\\n  </div>');\n}));\n\nTemplate.__checkName(\"NoConfig\");\nTemplate[\"NoConfig\"] = new Template(\"Template.NoConfig\", (function() {\n  var view = this;\n  return HTML.Raw(\"<p class=\\\"alert alert-info\\\">\\n    You need to define an AdminConfig object to use the admin dashboard.\\n    <br>\\n      A basic config to manage the 'Posts' and 'Comments' collection would look like this:\\n    <br>\\n    <code>\\n      AdminConfig = {\\n        <br>\\n        adminEmails: ['\\tben@code2create.com'],\\n        <br>\\n        collections:\\n        <br>\\n        {\\n          <br>\\n          Posts: {},\\n          <br>\\n          Comments: {}\\n          <br>\\n        }\\n        <br>\\n      }\\n    </code>\\n  </p>\");\n}));\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/client/html/template.admin_sidebar.js                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n\nTemplate.__checkName(\"AdminSidebar\");\nTemplate[\"AdminSidebar\"] = new Template(\"Template.AdminSidebar\", (function() {\n  var view = this;\n  return HTML.ASIDE({\n    class: \"main-sidebar\"\n  }, \"\\n\\t\\t\", HTML.DIV({\n    class: \"sidebar\"\n  }, \"\\n\\t\\t\\t\", HTML.UL({\n    class: \"sidebar-menu\"\n  }, \"\\n\\t\\t\\t\\t\", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"admin_collections\"));\n  }, function() {\n    return [ \"\\n\\t\\t\\t\\t\\t\", Blaze.Unless(function() {\n      return Spacebars.dataMustache(view.lookup(\"$eq\"), view.lookup(\"showInSideBar\"), false);\n    }, function() {\n      return [ \"\\n\\t\\t\\t\\t\\t\", HTML.LI({\n        class: \"treeview\"\n      }, \"\\n\\t\\t\\t\\t\\t\\t\", HTML.A({\n        href: \"#\"\n      }, \"\\n\\t\\t\\t\\t\\t\\t\\t\", HTML.I({\n        class: function() {\n          return [ \"fa fa-\", Spacebars.mustache(Spacebars.dot(view.lookup(\".\"), \"icon\")) ];\n        }\n      }), \"\\n\\t\\t\\t\\t\\t\\t\\t\", HTML.SPAN(Blaze.View(\"lookup:..label\", function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\".\"), \"label\"));\n      })), \"\\n\\t\\t\\t\\t\\t\\t\\t\", HTML.I({\n        class: \"fa fa-angle-left pull-right\"\n      }), \"\\n\\t\\t\\t\\t\\t\\t\"), \"\\n\\t\\t\\t\\t\\t\\t\", HTML.UL({\n        class: \"treeview-menu\"\n      }, \"\\n\\t\\t\\t\\t\\t\\t\\t\", HTML.LI({\n        class: function() {\n          return Spacebars.mustache(view.lookup(\"isActivePath\"), Spacebars.kw({\n            path: view.lookup(\"newPath\")\n          }));\n        }\n      }, HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"newPath\"));\n        }\n      }, HTML.I({\n        class: \"fa fa-angle-double-right\"\n      }), \" 新建\")), \"\\n\\t\\t\\t\\t\\t\\t\\t\", HTML.LI({\n        class: function() {\n          return Spacebars.mustache(view.lookup(\"isActivePath\"), Spacebars.kw({\n            path: view.lookup(\"viewPath\")\n          }));\n        }\n      }, HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"viewPath\"));\n        }\n      }, HTML.I({\n        class: \"fa fa-angle-double-right\"\n      }), \" 查看\")), \"\\n\\t\\t\\t\\t\\t\\t\\t\", Blaze.Each(function() {\n        return Spacebars.call(view.lookup(\"admin_collection_items\"));\n      }, function() {\n        return [ \"\\n\\t\\t\\t\\t\\t\\t\\t\", HTML.LI({\n          class: function() {\n            return Spacebars.mustache(view.lookup(\"isActivePath\"), Spacebars.kw({\n              path: view.lookup(\"url\")\n            }));\n          }\n        }, HTML.A({\n          href: function() {\n            return Spacebars.mustache(view.lookup(\"url\"));\n          }\n        }, HTML.I({\n          class: \"fa fa-angle-double-right\"\n        }), \" \", Blaze.View(\"lookup:title\", function() {\n          return Spacebars.mustache(view.lookup(\"title\"));\n        }))), \"\\n\\t\\t\\t\\t\\t\\t\\t\" ];\n      }), \"\\n\\t\\t\\t\\t\\t\\t\"), \"\\n\\t\\t\\t\\t\\t\"), \"\\n\\t\\t\\t\\t\\t\" ];\n    }), \"\\n\\t\\t\\t\\t\" ];\n  }), \"\\n\\t\\t\\t\\t\", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"admin_sidebar_items\"));\n  }, function() {\n    return [ \"\\n\\t\\t\\t\\t\\t\", Blaze.If(function() {\n      return Spacebars.call(Spacebars.dot(view.lookup(\"options\"), \"urls\"));\n    }, function() {\n      return [ \"\\n\\t\\t\\t\\t\\t\\t\", Spacebars.include(view.lookupTemplate(\"adminSidebarItemTree\")), \"\\n\\t\\t\\t\\t\\t\" ];\n    }, function() {\n      return [ \"\\n\\t\\t\\t\\t\\t\\t\", Spacebars.include(view.lookupTemplate(\"adminSidebarItem\")), \"\\n\\t\\t\\t\\t\\t\" ];\n    }), \"\\n\\t\\t\\t\\t\" ];\n  }), \"\\n\\t\\t\\t\"), \"\\n\\t\\t\"), \"\\n\\t\");\n}));\n\nTemplate.__checkName(\"adminSidebarItem\");\nTemplate[\"adminSidebarItem\"] = new Template(\"Template.adminSidebarItem\", (function() {\n  var view = this;\n  return HTML.LI({\n    class: function() {\n      return Spacebars.mustache(view.lookup(\"isActivePath\"), Spacebars.kw({\n        path: view.lookup(\"url\")\n      }));\n    }\n  }, \"\\n\\t\\t\", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"url\"));\n    }\n  }, \"\\n\\t\\t\\t\", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"options\"), \"icon\"));\n  }, function() {\n    return [ \"\\n\\t\\t\\t\", HTML.I({\n      class: function() {\n        return [ \"fa fa-\", Spacebars.mustache(Spacebars.dot(view.lookup(\"options\"), \"icon\")) ];\n      }\n    }), \"\\n\\t\\t\\t\" ];\n  }), \"\\n\\t\\t\\t\", HTML.SPAN(Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  })), \"\\n\\t\\t\"), \"\\n\\t\");\n}));\n\nTemplate.__checkName(\"adminSidebarItemTree\");\nTemplate[\"adminSidebarItemTree\"] = new Template(\"Template.adminSidebarItemTree\", (function() {\n  var view = this;\n  return HTML.LI({\n    class: \"treeview\"\n  }, \"\\n\\t\\t\", HTML.A({\n    href: \"#\"\n  }, \"\\n\\t\\t\\t\", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"options\"), \"icon\"));\n  }, function() {\n    return [ \"\\n\\t\\t\\t\", HTML.I({\n      class: function() {\n        return [ \"fa fa-\", Spacebars.mustache(Spacebars.dot(view.lookup(\"options\"), \"icon\")) ];\n      }\n    }), \"\\n\\t\\t\\t\" ];\n  }), \"\\n\\t\\t\\t\", HTML.SPAN(Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  })), \"\\n\\t\\t\\t\", HTML.Raw('<i class=\"fa fa-angle-left pull-right\"></i>'), \"\\n\\t\\t\"), \"\\n\\t\\t\", HTML.UL({\n    class: \"treeview-menu\"\n  }, \"\\n\\t\\t\\t\", Blaze.Each(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"options\"), \"urls\"));\n  }, function() {\n    return [ \"\\n\\t\\t\\t\", HTML.LI({\n      class: function() {\n        return Spacebars.mustache(view.lookup(\"isActivePath\"), Spacebars.kw({\n          path: view.lookup(\"url\")\n        }));\n      }\n    }, HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"url\"));\n      }\n    }, HTML.I({\n      class: \"fa fa-angle-double-right\"\n    }), Blaze.View(\"lookup:title\", function() {\n      return Spacebars.mustache(view.lookup(\"title\"));\n    }))), \"\\n\\t\\t\\t\" ];\n  }), \"\\n\\t\\t\"), \"\\n\\t\");\n}));\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/client/html/template.admin_header.js                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n\nTemplate.__checkName(\"AdminHeader\");\nTemplate[\"AdminHeader\"] = new Template(\"Template.AdminHeader\", (function() {\n  var view = this;\n  return HTML.HEADER({\n    class: \"main-header\"\n  }, \"\\n        \", HTML.A({\n    href: \"/admin\",\n    class: \"logo\"\n  }, \"\\n            \", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"AdminConfig\"), \"name\"));\n  }, function() {\n    return [ \"\\n            \", Blaze.View(\"lookup:AdminConfig.name\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"AdminConfig\"), \"name\"));\n    }), \"\\n            \" ];\n  }, function() {\n    return \"\\n            Admin\\n            \";\n  }), \"\\n        \"), \"\\n        \", HTML.NAV({\n    class: \"navbar navbar-static-top\",\n    role: \"navigation\"\n  }, \"\\n            \", HTML.Raw(\"<!-- Sidebar toggle button-->\"), \"\\n            \", HTML.Raw('<a href=\"#\" class=\"sidebar-toggle\" data-toggle=\"offcanvas\" role=\"button\">\\n                <span class=\"sr-only\">Toggle navigation</span>\\n                <!-- <span class=\"icon-bar\"></span> -->\\n            </a>'), \"\\n            \", HTML.DIV({\n    class: \"navbar-custom-menu\"\n  }, \"\\n                \", HTML.UL({\n    class: \"nav navbar-nav\"\n  }, \"\\n                    \", HTML.LI({\n    class: \"dropdown\"\n  }, \"\\n                        \", HTML.Raw('<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\\n                            <span>账号管理<i class=\"caret\"></i></span>\\n                        </a>'), \"\\n                        \", HTML.UL({\n    class: \"dropdown-menu\"\n  }, \"\\n                            \", HTML.LI({\n    class: \"\"\n  }, \"\\n                                \", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"pathFor\"), \"adminDashboardUsersEdit\", Spacebars.kw({\n        _id: Spacebars.dot(view.lookup(\"currentUser\"), \"_id\")\n      }));\n    }\n  }, \"账号信息\\n                                \"), \"\\n                            \"), \"\\n                            \", HTML.Raw('<li class=\"\">\\n                                <a href=\"#\" class=\"btn-sign-out\">注销\\n                                </a>\\n                            </li>'), \"\\n                        \"), \"\\n                    \"), \"\\n                \"), \"\\n            \"), \"\\n        \"), \"\\n    \");\n}));\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/client/js/admin_layout.js                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nTemplate.AdminLayout.created = function () {\n  var self = this;\n\n  self.minHeight = new ReactiveVar(\n    $(window).height() - $('.main-header').height());\n\n  $(window).resize(function () {\n    self.minHeight.set($(window).height() - $('.main-header').height());\n  });\n\n  $('body').addClass('fixed');\n};\n\nTemplate.AdminLayout.destroyed = function () {\n  $('body').removeClass('fixed');\n};\n\nTemplate.AdminLayout.helpers({\n  minHeight: function () {\n    return Template.instance().minHeight.get() + 'px'\n  },\n  login: function(){\n    if(Meteor.userId()){\n        return true;\n    }else{\n        return false;\n    }\n  }\n});\n\ndataTableOptions = {\n    \"aaSorting\": [],\n    \"bPaginate\": true,\n    \"bLengthChange\": false,\n    \"bFilter\": true,\n    \"bSort\": true,\n    \"bInfo\": true,\n    \"bAutoWidth\": false\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/client/js/helpers.coffee.js                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar adminCollections;\n\nTemplate.registerHelper('AdminTables', AdminTables);\n\nadminCollections = function() {\n  var collections;\n  collections = {};\n  if (typeof AdminConfig !== 'undefined' && typeof AdminConfig.collections === 'object') {\n    collections = AdminConfig.collections;\n  }\n  collections.Users = {\n    collectionObject: Meteor.users,\n    icon: 'user',\n    label: '账号管理'\n  };\n  return _.map(collections, function(obj, key) {\n    obj = _.extend(obj, {\n      name: key\n    });\n    obj = _.defaults(obj, {\n      label: key,\n      icon: 'plus',\n      color: 'blue'\n    });\n    return obj = _.extend(obj, {\n      viewPath: Router.path(\"adminDashboard\" + key + \"View\"),\n      newPath: Router.path(\"adminDashboard\" + key + \"New\")\n    });\n  });\n};\n\nUI.registerHelper('AdminConfig', function() {\n  if (typeof AdminConfig !== 'undefined') {\n    return AdminConfig;\n  }\n});\n\nUI.registerHelper('admin_skin', function() {\n  return (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.skin : void 0) || 'blue';\n});\n\nUI.registerHelper('admin_collections', adminCollections);\n\nUI.registerHelper('admin_collection_name', function() {\n  return Session.get('admin_collection_name');\n});\n\nUI.registerHelper('admin_current_id', function() {\n  return Session.get('admin_id');\n});\n\nUI.registerHelper('admin_current_doc', function() {\n  return Session.get('admin_doc');\n});\n\nUI.registerHelper('admin_is_users_collection', function() {\n  return Session.get('admin_collection_name') === 'Users';\n});\n\nUI.registerHelper('admin_sidebar_items', function() {\n  return AdminDashboard.sidebarItems;\n});\n\nUI.registerHelper('admin_collection_items', function() {\n  var items;\n  items = [];\n  _.each(AdminDashboard.collectionItems, (function(_this) {\n    return function(fn) {\n      var item;\n      item = fn(_this.name, '/admin/' + _this.name);\n      if ((item != null ? item.title : void 0) && (item != null ? item.url : void 0)) {\n        return items.push(item);\n      }\n    };\n  })(this));\n  return items;\n});\n\nUI.registerHelper('admin_omit_fields', function() {\n  var collection, global;\n  if (typeof AdminConfig.autoForm !== 'undefined' && typeof AdminConfig.autoForm.omitFields === 'object') {\n    global = AdminConfig.autoForm.omitFields;\n  }\n  if (!Session.equals('admin_collection_name', 'Users') && typeof AdminConfig !== 'undefined' && typeof AdminConfig.collections[Session.get('admin_collection_name')].omitFields === 'object') {\n    collection = AdminConfig.collections[Session.get('admin_collection_name')].omitFields;\n  }\n  if (typeof global === 'object' && typeof collection === 'object') {\n    return _.union(global, collection);\n  } else if (typeof global === 'object') {\n    return global;\n  } else if (typeof collection === 'object') {\n    return collection;\n  }\n});\n\nUI.registerHelper('AdminSchemas', function() {\n  return AdminDashboard.schemas;\n});\n\nUI.registerHelper('adminGetSkin', function() {\n  if (typeof AdminConfig.dashboard !== 'undefined' && typeof AdminConfig.dashboard.skin === 'string') {\n    return AdminConfig.dashboard.skin;\n  } else {\n    return 'blue';\n  }\n});\n\nUI.registerHelper('adminIsUserInRole', function(_id, role) {\n  return Roles.userIsInRole(_id, role);\n});\n\nUI.registerHelper('adminGetUsers', function() {\n  return Meteor.users;\n});\n\nUI.registerHelper('adminGetUserSchema', function() {\n  var schema;\n  if (_.has(AdminConfig, 'userSchema')) {\n    schema = AdminConfig.userSchema;\n  } else if (typeof Meteor.users._c2 === 'object') {\n    schema = Meteor.users.simpleSchema();\n  }\n  return schema;\n});\n\nUI.registerHelper('adminCollectionLabel', function(collection) {\n  if (collection != null) {\n    return AdminDashboard.collectionLabel(collection);\n  }\n});\n\nUI.registerHelper('adminCollectionCount', function(collection) {\n  var ref;\n  if (collection === 'Users') {\n    return Meteor.users.find().count();\n  } else {\n    return (ref = AdminCollectionsCount.findOne({\n      collection: collection\n    })) != null ? ref.count : void 0;\n  }\n});\n\nUI.registerHelper('adminTemplate', function(collection, mode) {\n  var ref, ref1;\n  if ((collection != null ? collection.toLowerCase() : void 0) !== 'users' && typeof (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? (ref = AdminConfig.collections) != null ? (ref1 = ref[collection]) != null ? ref1.templates : void 0 : void 0 : void 0) !== 'undefined') {\n    return AdminConfig.collections[collection].templates[mode];\n  }\n});\n\nUI.registerHelper('adminGetCollection', function(collection) {\n  return _.find(adminCollections(), function(item) {\n    return item.name === collection;\n  });\n});\n\nUI.registerHelper('adminWidgets', function() {\n  if (typeof AdminConfig.dashboard !== 'undefined' && typeof AdminConfig.dashboard.widgets !== 'undefined') {\n    return AdminConfig.dashboard.widgets;\n  }\n});\n\nUI.registerHelper('adminUserEmail', function(user) {\n  if (user && user.emails && user.emails[0] && user.emails[0].address) {\n    return user.emails[0].address;\n  } else if (user && user.services && user.services.facebook && user.services.facebook.email) {\n    return user.services.facebook.email;\n  } else if (user && user.services && user.services.google && user.services.google.email) {\n    return user.services.google.email;\n  }\n});\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/client/js/templates.coffee.js                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nTemplate.AdminDashboardViewWrapper.rendered = function() {\n  var node;\n  node = this.firstNode;\n  return this.autorun(function() {\n    var data;\n    data = Template.currentData();\n    if (data.view) {\n      Blaze.remove(data.view);\n    }\n    while (node.firstChild) {\n      node.removeChild(node.firstChild);\n    }\n    return data.view = Blaze.renderWithData(Template.AdminDashboardView, data, node);\n  });\n};\n\nTemplate.AdminDashboardViewWrapper.destroyed = function() {\n  return Blaze.remove(this.data.view);\n};\n\nTemplate.AdminDashboardView.rendered = function() {\n  var filter, length, table;\n  table = this.$('.dataTable').DataTable();\n  filter = this.$('.dataTables_filter');\n  length = this.$('.dataTables_length');\n  filter.html('<div class=\"input-group\"> <input type=\"search\" class=\"form-control input-sm\" placeholder=\"Search\"></input> <div class=\"input-group-btn\"> <button class=\"btn btn-sm btn-default\"> <i class=\"fa fa-search\"></i> </button> </div> </div>');\n  length.html('<select class=\"form-control input-sm\"> <option value=\"10\">10</option> <option value=\"25\">25</option> <option value=\"50\">50</option> <option value=\"100\">100</option> </select>');\n  filter.find('input').on('keyup', function() {\n    return table.search(this.value).draw();\n  });\n  return length.find('select').on('change', function() {\n    return table.page.len(parseInt(this.value)).draw();\n  });\n};\n\nTemplate.AdminDashboardView.helpers({\n  hasDocuments: function() {\n    var ref;\n    return ((ref = AdminCollectionsCount.findOne({\n      collection: Session.get('admin_collection_name')\n    })) != null ? ref.count : void 0) > 0;\n  },\n  newPath: function() {\n    return Router.path('adminDashboard' + Session.get('admin_collection_name') + 'New');\n  }\n});\n\nTemplate.adminEditBtn.helpers({\n  path: function() {\n    return Router.path(\"adminDashboard\" + Session.get('admin_collection_name') + \"Edit\", {\n      _id: this._id\n    });\n  }\n});\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/client/js/events.coffee.js                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nTemplate.AdminLayout.events({\n  'click .btn-delete': function(e, t) {\n    var _id;\n    _id = $(e.target).attr('doc');\n    if (Session.equals('admin_collection_name', 'Users')) {\n      Session.set('admin_id', _id);\n      return Session.set('admin_doc', Meteor.users.findOne(_id));\n    } else {\n      Session.set('admin_id', parseID(_id));\n      return Session.set('admin_doc', adminCollectionObject(Session.get('admin_collection_name')).findOne(parseID(_id)));\n    }\n  }\n});\n\nTemplate.AdminDeleteModal.events({\n  'click #confirm-delete': function() {\n    var _id, collection;\n    collection = Session.get('admin_collection_name');\n    _id = Session.get('admin_id');\n    return Meteor.call('adminRemoveDoc', collection, _id, function(e, r) {\n      return $('#admin-delete-modal').modal('hide');\n    });\n  }\n});\n\nTemplate.AdminDashboardUsersEdit.events({\n  'click .btn-add-role': function(e, t) {\n    console.log('adding user');\n    return Meteor.call('adminAddUserToRole', $(e.target).attr('user'), $(e.target).attr('role'));\n  },\n  'click .btn-remove-role': function(e, t) {\n    console.log('removing user');\n    return Meteor.call('adminRemoveUserToRole', $(e.target).attr('user'), $(e.target).attr('role'));\n  }\n});\n\nTemplate.AdminHeader.events({\n  'click .btn-sign-out': function() {\n    return Meteor.logout(function() {\n      return Router.go((typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.logoutRedirect : void 0) || '/');\n    });\n  }\n});\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/client/js/slim_scroll.js                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)\n * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)\n * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.\n *\n * Version: 1.3.0\n *\n */\n(function(f){jQuery.fn.extend({slimScroll:function(h){var a=f.extend({width:\"auto\",height:\"250px\",size:\"7px\",color:\"#000\",position:\"right\",distance:\"1px\",start:\"top\",opacity:0.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:\"#333\",railOpacity:0.2,railDraggable:!0,railClass:\"slimScrollRail\",barClass:\"slimScrollBar\",wrapperClass:\"slimScrollDiv\",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:\"7px\",railBorderRadius:\"7px\"},h);this.each(function(){function r(d){if(s){d=d||\nwindow.event;var c=0;d.wheelDelta&&(c=-d.wheelDelta/120);d.detail&&(c=d.detail/3);f(d.target||d.srcTarget||d.srcElement).closest(\".\"+a.wrapperClass).is(b.parent())&&m(c,!0);d.preventDefault&&!k&&d.preventDefault();k||(d.returnValue=!1)}}function m(d,f,h){k=!1;var e=d,g=b.outerHeight()-c.outerHeight();f&&(e=parseInt(c.css(\"top\"))+d*parseInt(a.wheelStep)/100*c.outerHeight(),e=Math.min(Math.max(e,0),g),e=0<d?Math.ceil(e):Math.floor(e),c.css({top:e+\"px\"}));l=parseInt(c.css(\"top\"))/(b.outerHeight()-c.outerHeight());\ne=l*(b[0].scrollHeight-b.outerHeight());h&&(e=d,d=e/b[0].scrollHeight*b.outerHeight(),d=Math.min(Math.max(d,0),g),c.css({top:d+\"px\"}));b.scrollTop(e);b.trigger(\"slimscrolling\",~~e);v();p()}function C(){window.addEventListener?(this.addEventListener(\"DOMMouseScroll\",r,!1),this.addEventListener(\"mousewheel\",r,!1),this.addEventListener(\"MozMousePixelScroll\",r,!1)):document.attachEvent(\"onmousewheel\",r)}function w(){u=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),D);c.css({height:u+\"px\"});\nvar a=u==b.outerHeight()?\"none\":\"block\";c.css({display:a})}function v(){w();clearTimeout(A);l==~~l?(k=a.allowPageScroll,B!=l&&b.trigger(\"slimscroll\",0==~~l?\"top\":\"bottom\")):k=!1;B=l;u>=b.outerHeight()?k=!0:(c.stop(!0,!0).fadeIn(\"fast\"),a.railVisible&&g.stop(!0,!0).fadeIn(\"fast\"))}function p(){a.alwaysVisible||(A=setTimeout(function(){a.disableFadeOut&&s||(x||y)||(c.fadeOut(\"slow\"),g.fadeOut(\"slow\"))},1E3))}var s,x,y,A,z,u,l,B,D=30,k=!1,b=f(this);if(b.parent().hasClass(a.wrapperClass)){var n=b.scrollTop(),\nc=b.parent().find(\".\"+a.barClass),g=b.parent().find(\".\"+a.railClass);w();if(f.isPlainObject(h)){if(\"height\"in h&&\"auto\"==h.height){b.parent().css(\"height\",\"auto\");b.css(\"height\",\"auto\");var q=b.parent().parent().height();b.parent().css(\"height\",q);b.css(\"height\",q)}if(\"scrollTo\"in h)n=parseInt(a.scrollTo);else if(\"scrollBy\"in h)n+=parseInt(a.scrollBy);else if(\"destroy\"in h){c.remove();g.remove();b.unwrap();return}m(n,!1,!0)}}else{a.height=\"auto\"==a.height?b.parent().height():a.height;n=f(\"<div></div>\").addClass(a.wrapperClass).css({position:\"relative\",\noverflow:\"hidden\",width:a.width,height:a.height});b.css({overflow:\"hidden\",width:a.width,height:a.height});var g=f(\"<div></div>\").addClass(a.railClass).css({width:a.size,height:\"100%\",position:\"absolute\",top:0,display:a.alwaysVisible&&a.railVisible?\"block\":\"none\",\"border-radius\":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),c=f(\"<div></div>\").addClass(a.barClass).css({background:a.color,width:a.size,position:\"absolute\",top:0,opacity:a.opacity,display:a.alwaysVisible?\n\"block\":\"none\",\"border-radius\":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:99}),q=\"right\"==a.position?{right:a.distance}:{left:a.distance};g.css(q);c.css(q);b.wrap(n);b.parent().append(c);b.parent().append(g);a.railDraggable&&c.bind(\"mousedown\",function(a){var b=f(document);y=!0;t=parseFloat(c.css(\"top\"));pageY=a.pageY;b.bind(\"mousemove.slimscroll\",function(a){currTop=t+a.pageY-pageY;c.css(\"top\",currTop);m(0,c.position().top,!1)});\nb.bind(\"mouseup.slimscroll\",function(a){y=!1;p();b.unbind(\".slimscroll\")});return!1}).bind(\"selectstart.slimscroll\",function(a){a.stopPropagation();a.preventDefault();return!1});g.hover(function(){v()},function(){p()});c.hover(function(){x=!0},function(){x=!1});b.hover(function(){s=!0;v();p()},function(){s=!1;p()});b.bind(\"touchstart\",function(a,b){a.originalEvent.touches.length&&(z=a.originalEvent.touches[0].pageY)});b.bind(\"touchmove\",function(b){k||b.originalEvent.preventDefault();b.originalEvent.touches.length&&\n(m((z-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0),z=b.originalEvent.touches[0].pageY)});w();\"bottom\"===a.start?(c.css({top:b.outerHeight()-c.outerHeight()}),m(0,!0)):\"top\"!==a.start&&(m(f(a.start).position().top,null,!0),a.alwaysVisible||c.hide());C()}});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/wangziguan_admin/lib/client/js/autoForm.coffee.js                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nAutoForm.addHooks(['admin_insert', 'admin_update', 'adminNewUser', 'adminUpdateUser', 'adminSendResetPasswordEmail', 'adminChangePassword'], {\n  beginSubmit: function() {\n    return $('.btn-primary').addClass('disabled');\n  },\n  endSubmit: function() {\n    return $('.btn-primary').removeClass('disabled');\n  },\n  onError: function(formType, error) {\n    return AdminDashboard.alertFailure(error.message);\n  }\n});\n\nAutoForm.hooks({\n  admin_insert: {\n    onSubmit: function(insertDoc, updateDoc, currentDoc) {\n      var hook;\n      hook = this;\n      Meteor.call('adminInsertDoc', insertDoc, Session.get('admin_collection_name'), function(e, r) {\n        if (e) {\n          return hook.done(e);\n        } else {\n          return adminCallback('onInsert', [Session.get('admin_collection_name', insertDoc, updateDoc, currentDoc)], function(collection) {\n            return hook.done(null, collection);\n          });\n        }\n      });\n      return false;\n    },\n    onSuccess: function(formType, collection) {\n      AdminDashboard.alertSuccess('Successfully created');\n      return Router.go(\"/admin/\" + collection);\n    }\n  },\n  admin_update: {\n    onSubmit: function(insertDoc, updateDoc, currentDoc) {\n      var hook;\n      hook = this;\n      Meteor.call('adminUpdateDoc', updateDoc, Session.get('admin_collection_name'), Session.get('admin_id'), function(e, r) {\n        if (e) {\n          return hook.done(e);\n        } else {\n          return adminCallback('onUpdate', [Session.get('admin_collection_name', insertDoc, updateDoc, currentDoc)], function(collection) {\n            return hook.done(null, collection);\n          });\n        }\n      });\n      return false;\n    },\n    onSuccess: function(formType, collection) {\n      AdminDashboard.alertSuccess('Successfully updated');\n      return Router.go(\"/admin/\" + collection);\n    }\n  },\n  adminNewUser: {\n    onSuccess: function(formType, result) {\n      AdminDashboard.alertSuccess('Created user');\n      return Router.go('/admin/Users');\n    }\n  },\n  adminUpdateUser: {\n    onSubmit: function(insertDoc, updateDoc, currentDoc) {\n      Meteor.call('adminUpdateUser', updateDoc, Session.get('admin_id'), this.done);\n      return false;\n    },\n    onSuccess: function(formType, result) {\n      AdminDashboard.alertSuccess('Updated user');\n      return Router.go('/admin/Users');\n    }\n  },\n  adminSendResetPasswordEmail: {\n    onSuccess: function(formType, result) {\n      return AdminDashboard.alertSuccess('Email sent');\n    }\n  },\n  adminChangePassword: {\n    onSuccess: function(operation, result, template) {\n      return AdminDashboard.alertSuccess('Password reset');\n    }\n  }\n});\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nPackage._define(\"wangziguan:admin\", {\n  AdminDashboard: AdminDashboard\n});\n\n})();\n","servePath":"/packages/wangziguan_admin.js","sourceMap":{"version":3,"sources":["/packages/wangziguan_admin/lib/both/AdminDashboard.coffee","/packages/wangziguan_admin/lib/both/router.coffee","/packages/wangziguan_admin/lib/both/utils.coffee","/packages/wangziguan_admin/lib/both/startup.coffee","/packages/wangziguan_admin/lib/both/collections.coffee","/packages/wangziguan_admin/lib/client/js/helpers.coffee","/packages/wangziguan_admin/lib/client/js/templates.coffee","/packages/wangziguan_admin/lib/client/js/events.coffee","/packages/wangziguan_admin/lib/client/js/autoForm.coffee"],"names":[],"mappings":"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","file":"/packages/wangziguan_admin.js","sourcesContent":["AdminDashboard =\n\tschemas: {}\n\tsidebarItems: []\n\tcollectionItems: []\n\talertSuccess: (message)->\n\t\tSession.set 'adminSuccess', message\n\talertFailure: (message)->\n\t\tSession.set 'adminError', message\n\n\tcheckAdmin: ->\n\t\tif not Roles.userIsInRole Meteor.userId(), ['admin']\n\t\t\tMeteor.call 'adminCheckAdmin'\n\t\t\tif (typeof AdminConfig?.nonAdminRedirectRoute == \"string\")\n\t\t\t  Router.go AdminConfig.nonAdminRedirectRoute\n\t\tif typeof @.next == 'function'\n\t\t\t@next()\n\tadminRoutes: ['adminDashboard','adminDashboardUsersNew','adminDashboardUsersEdit','adminDashboardView','adminDashboardNew','adminDashboardEdit']\n\tcollectionLabel: (collection)->\n\t\tif collection == 'Users'\n\t\t\t'Users'\n\t\telse if collection? and typeof AdminConfig.collections[collection]?.label == 'string'\n\t\t\tAdminConfig.collections[collection].label\n\t\telse Session.get 'admin_collection_name'\n\n\taddSidebarItem: (title, url, options) ->\n\t\titem = title: title\n\t\tif _.isObject(url) and typeof options == 'undefined'\n\t\t\titem.options = url\n\t\telse\n\t\t\titem.url = url\n\t\t\titem.options = options\n\n\t\t@sidebarItems.push item\n\n\textendSidebarItem: (title, urls) ->\n\t\tif _.isObject(urls) then urls = [urls]\n\n\t\texisting = _.find @sidebarItems, (item) -> item.title == title\n\t\tif existing\n\t\t\texisting.options.urls = _.union existing.options.urls, urls\n\n\taddCollectionItem: (fn) ->\n\t\t@collectionItems.push fn\n\n\tpath: (s) ->\n\t\tpath = '/admin'\n\t\tif typeof s == 'string' and s.length > 0\n\t\t\tpath += (if s[0] == '/' then '' else '/') + s\n\t\tpath\n\n\nAdminDashboard.schemas.newUser = new SimpleSchema\n\temail: \n\t\ttype: String\n\t\tlabel: \"Email address\"\n\tpassword:\n\t\ttype: String\n\t\tlabel: 'Password'\n\tsendPassword:\n\t\ttype: Boolean\n\t\tlabel: 'Send this user their password by email'\n\t\toptional: true\n\nAdminDashboard.schemas.sendResetPasswordEmail = new SimpleSchema\n\t_id:\n\t\ttype: String\n\nAdminDashboard.schemas.changePassword = new SimpleSchema\n\t_id:\n\t\ttype: String\n\tpassword:\n\t\ttype: String\n","@AdminController = RouteController.extend\n\tlayoutTemplate: 'AdminLayout'\n\twaitOn: ->\n\t\t[\n\t\t\tMeteor.subscribe 'adminUsers'\n\t\t\tMeteor.subscribe 'adminUser'\n\t\t\tMeteor.subscribe 'adminCollectionsCount'\n\t\t]\n\tonBeforeAction: ->\n\t\tSession.set 'adminSuccess', null\n\t\tSession.set 'adminError', null\n\n\t\tSession.set 'admin_title', ''\n\t\tSession.set 'admin_subtitle', ''\n\t\tSession.set 'admin_collection_page', null\n\t\tSession.set 'admin_collection_name', null\n\t\tSession.set 'admin_id', null\n\t\tSession.set 'admin_doc', null\n\n\t\tif not Roles.userIsInRole Meteor.userId(), ['admin']\n\t\t\tMeteor.call 'adminCheckAdmin'\n\t\t\tif typeof AdminConfig?.nonAdminRedirectRoute == 'string'\n\t\t\t\tRouter.go AdminConfig.nonAdminRedirectRoute\n\n\t\t@next()\n\n\nRouter.route \"adminDashboard\",\n\tpath: \"/admin\"\n\ttemplate: \"AdminDashboard\"\n\tcontroller: \"AdminController\"\n\taction: ->\n\t\t@render()\n\tonAfterAction: ->\n\t\tSession.set 'admin_title', '总览'\n\t\tSession.set 'admin_collection_name', ''\n\t\tSession.set 'admin_collection_page', ''\n\nRouter.route \"adminDashboardUsersView\",\n\tpath: \"/admin/Users\"\n\ttemplate: \"AdminDashboardView\"\n\tcontroller: \"AdminController\"\n\taction: ->\n\t\t@render()\n\tdata: ->\n\t\tadmin_table: AdminTables.Users\n\tonAfterAction: ->\n\t\tSession.set 'admin_title', '账号管理'\n\t\tSession.set 'admin_subtitle', ''\n\t\tSession.set 'admin_collection_name', 'Users'\n\nRouter.route \"adminDashboardUsersNew\",\n\tpath: \"/admin/Users/new\"\n\ttemplate: \"AdminDashboardUsersNew\"\n\tcontroller: 'AdminController'\n\taction: ->\n\t\t@render()\n\tonAfterAction: ->\n\t\tSession.set 'admin_title', '账号管理'\n\t\tSession.set 'admin_subtitle', '创建新用户'\n\t\tSession.set 'admin_collection_page', ''\n\t\tSession.set 'admin_collection_name', 'Users'\n\nRouter.route \"adminDashboardUsersEdit\",\n\tpath: \"/admin/Users/:_id/edit\"\n\ttemplate: \"AdminDashboardUsersEdit\"\n\tcontroller: \"AdminController\"\n\tdata: ->\n\t\tuser: Meteor.users.find(@params._id).fetch()\n\t\troles: Roles.getRolesForUser @params._id\n\t\totherRoles: _.difference _.map(Meteor.roles.find().fetch(), (role) -> role.name), Roles.getRolesForUser(@params._id)\n\taction: ->\n\t\t@render()\n\tonAfterAction: ->\n\t\tSession.set 'admin_title', '账号管理'\n\t\tSession.set 'admin_subtitle', '编辑用户 ' + @params._id\n\t\tSession.set 'admin_collection_page', ''\n\t\tSession.set 'admin_collection_name', 'Users'\n\t\tSession.set 'admin_id', @params._id\n\t\tSession.set 'admin_doc', Meteor.users.findOne({_id:@params._id})\n","@adminCollectionObject = (collection) ->\n\tif typeof AdminConfig.collections[collection] != 'undefined' and typeof AdminConfig.collections[collection].collectionObject != 'undefined'\n\t\tAdminConfig.collections[collection].collectionObject\n\telse\n\t\tlookup collection\n\n@adminCallback = (name, args, callback) ->\n\tstop = false\n\tif typeof AdminConfig?.callbacks?[name] == 'function'\n\t\tstop = AdminConfig.callbacks[name](args...) is false\n\tif typeof callback == 'function'\n\t\tcallback args... unless stop\n\n@lookup = (obj, root, required=true) ->\n\tif typeof root == 'undefined'\n\t\troot = if Meteor.isServer then global else window\n\tif typeof obj == 'string'\n\t\tref = root\n\t\tarr = obj.split '.'\n\t\tcontinue while arr.length and (ref = ref[arr.shift()])\n\t\tif not ref and required\n\t\t\tthrow new Error(obj + ' is not in the ' + root.toString())\n\t\telse\n\t\t\treturn ref\n\treturn obj\n\t\n@parseID = (id) ->\n\tif typeof id == 'string'\n\t\tif(id.indexOf(\"ObjectID\") > -1)\n\t\t\treturn new Mongo.ObjectID(id.slice(id.indexOf('\"') + 1,id.lastIndexOf('\"')))\n\t\telse\n\t\t\treturn id\n\telse\n\t\treturn id\n\n@parseIDs = (ids) ->\n    return _.map ids, (id) ->\n        parseID id\n","@AdminTables = {}\n\nadminTablesDom = '<\"box\"<\"box-header\"<\"box-toolbar\"<\"pull-left\"<lf>><\"pull-right\"p>>><\"box-body\"t>><r>'\n\nadminEditButton = {\n\tdata: '_id'\n\ttitle: 'Edit'\n\tcreatedCell: (node, cellData, rowData) ->\n\t\t$(node).html(Blaze.toHTMLWithData Template.adminEditBtn, {_id: cellData})\n\twidth: '40px'\n\torderable: false\n}\nadminDelButton = {\n\tdata: '_id'\n\ttitle: 'Delete'\n\tcreatedCell: (node, cellData, rowData) ->\n\t\t$(node).html(Blaze.toHTMLWithData Template.adminDeleteBtn, {_id: cellData})\n\twidth: '40px'\n\torderable: false\n}\n\nadminEditDelButtons = [\n\tadminEditButton,\n\tadminDelButton\n]\n\ndefaultColumns = () -> [\n  data: '_id',\n  title: 'ID'\n]\n\nadminTablePubName = (collection) ->\n\t\"admin_tabular_#{collection}\"\n\nadminCreateTables = (collections) ->\n\t_.each AdminConfig?.collections, (collection, name) ->\n\t\t_.defaults collection, {\n\t\t\tshowEditColumn: true\n\t\t\tshowDelColumn: true\n\t\t\tshowInSideBar: true\n\t\t}\n\n\t\tcolumns = _.map collection.tableColumns, (column) ->\n\t\t\tif column.template\n\t\t\t\tcreatedCell = (node, cellData, rowData) ->\n\t\t\t\t\t$(node).html ''\n\t\t\t\t\tBlaze.renderWithData(Template[column.template], {value: cellData, doc: rowData}, node)\n\n\t\t\tdata: column.name\n\t\t\ttitle: column.label\n\t\t\tcreatedCell: createdCell\n\n\t\tif columns.length == 0\n\t\t\tcolumns = defaultColumns()\n\n\t\tif collection.showEditColumn\n\t\t\tcolumns.push(adminEditButton)\n\t\tif collection.showDelColumn\n\t\t\tcolumns.push(adminDelButton)\n\n\t\tAdminTables[name] = new Tabular.Table\n\t\t\tname: name\n\t\t\tcollection: adminCollectionObject(name)\n\t\t\tpub: collection.children and adminTablePubName(name)\n\t\t\tsub: collection.sub\n\t\t\tcolumns: columns\n\t\t\textraFields: collection.extraFields\n\t\t\tdom: adminTablesDom\n\t\t\tselector: collection.selector || ->\n\t\t\t\treturn {}\n\nadminCreateRoutes = (collections) ->\n\t_.each collections, adminCreateRouteView\n\t_.each collections,\tadminCreateRouteNew\n\t_.each collections, adminCreateRouteEdit\n\nadminCreateRouteView = (collection, collectionName) ->\n\tRouter.route \"adminDashboard#{collectionName}View\",\n\t\tadminCreateRouteViewOptions collection, collectionName\n\nadminCreateRouteViewOptions = (collection, collectionName) ->\n\toptions =\n\t\tpath: \"/admin/#{collectionName}\"\n\t\ttemplate: \"AdminDashboardViewWrapper\"\n\t\tcontroller: \"AdminController\"\n\t\tdata: ->\n  \t\tadmin_table: AdminTables[collectionName]\n\t\taction: ->\n\t\t\t@render()\n\t\tonAfterAction: ->\n\t\t\tSession.set 'admin_title', collectionName\n\t\t\tSession.set 'admin_subtitle', 'View'\n\t\t\tSession.set 'admin_collection_name', collectionName\n\t\t\tcollection.routes?.view?.onAfterAction\n\t_.defaults options, collection.routes?.view\n\nadminCreateRouteNew = (collection, collectionName) ->\n\tRouter.route \"adminDashboard#{collectionName}New\",\n\t\tadminCreateRouteNewOptions collection, collectionName\n\nadminCreateRouteNewOptions = (collection, collectionName) ->\n\toptions =\n\t\tpath: \"/admin/#{collectionName}/new\"\n\t\ttemplate: \"AdminDashboardNew\"\n\t\tcontroller: \"AdminController\"\n\t\taction: ->\n\t\t\t@render()\n\t\tonAfterAction: ->\n\t\t\tSession.set 'admin_title', AdminDashboard.collectionLabel collectionName\n\t\t\tSession.set 'admin_subtitle', 'Create new'\n\t\t\tSession.set 'admin_collection_page', 'new'\n\t\t\tSession.set 'admin_collection_name', collectionName\n\t\t\tcollection.routes?.new?.onAfterAction\n\t\tdata: ->\n\t\t\tadmin_collection: adminCollectionObject collectionName\n\t_.defaults options, collection.routes?.new\n\nadminCreateRouteEdit = (collection, collectionName) ->\n\tRouter.route \"adminDashboard#{collectionName}Edit\",\n\t\tadminCreateRouteEditOptions collection, collectionName\n\nadminCreateRouteEditOptions = (collection, collectionName) ->\n\toptions =\n\t\tpath: \"/admin/#{collectionName}/:_id/edit\"\n\t\ttemplate: \"AdminDashboardEdit\"\n\t\tcontroller: \"AdminController\"\n\t\twaitOn: ->\n\t\t\tMeteor.subscribe 'adminCollectionDoc', collectionName, parseID(@params._id)\n\t\t\tcollection.routes?.edit?.waitOn\n\t\taction: ->\n\t\t\t@render()\n\t\tonAfterAction: ->\n\t\t\tSession.set 'admin_title', AdminDashboard.collectionLabel collectionName\n\t\t\tSession.set 'admin_subtitle', 'Edit ' + @params._id\n\t\t\tSession.set 'admin_collection_page', 'edit'\n\t\t\tSession.set 'admin_collection_name', collectionName\n\t\t\tSession.set 'admin_id', parseID(@params._id)\n\t\t\tSession.set 'admin_doc', adminCollectionObject(collectionName).findOne _id : parseID(@params._id)\n\t\t\tcollection.routes?.edit?.onAfterAction\n\t\tdata: ->\n\t\t\tadmin_collection: adminCollectionObject collectionName\n\t_.defaults options, collection.routes?.edit\n\nadminPublishTables = (collections) ->\n\t_.each collections, (collection, name) ->\n\t\tif not collection.children then return undefined\n\t\tMeteor.publishComposite adminTablePubName(name), (tableName, ids, fields) ->\n\t\t\tcheck tableName, String\n\t\t\tcheck ids, Array\n\t\t\tcheck fields, Match.Optional Object\n\n\t\t\textraFields = _.reduce collection.extraFields, (fields, name) ->\n\t\t\t\tfields[name] = 1\n\t\t\t\tfields\n\t\t\t, {}\n\t\t\t_.extend fields, extraFields\n\n\t\t\t@unblock()\n\n\t\t\tfind: ->\n\t\t\t\t@unblock()\n\t\t\t\tadminCollectionObject(name).find {_id: {$in: ids}}, {fields: fields}\n\t\t\tchildren: collection.children\n\nMeteor.startup ->\n\tadminCreateTables AdminConfig?.collections\n\tadminCreateRoutes AdminConfig?.collections\n\tadminPublishTables AdminConfig?.collections if Meteor.isServer\n\n\tif AdminTables.Users then return undefined\n\n\tAdminTables.Users = new Tabular.Table\n\t\t# Modify selector to allow search by email\n\t\tchangeSelector: (selector, userId) ->\n\t\t\t$or = selector['$or']\n\t\t\t$or and selector['$or'] = _.map $or, (exp) ->\n\t\t\t\tif exp.emails?['$regex']?\n\t\t\t\t\temails: $elemMatch: address: exp.emails\n\t\t\t\telse\n\t\t\t\t\texp\n\t\t\tselector\n\n\t\tname: 'Users'\n\t\tcollection: Meteor.users\n\t\tcolumns: _.union [\n\t\t\t{\n\t\t\t\tdata: '_id'\n\t\t\t\ttitle: 'Admin'\n\t\t\t\t# TODO: use `tmpl`\n\t\t\t\tcreatedCell: (node, cellData, rowData) ->\n\t\t\t\t\t$(node).html(Blaze.toHTMLWithData Template.adminUsersIsAdmin, {_id: cellData})\n\t\t\t\twidth: '40px'\n\t\t\t}\n\t\t\t{\n\t\t\t\tdata: 'emails'\n\t\t\t\ttitle: 'Email'\n\t\t\t\trender: (value) ->\n\t\t\t\t\tvalue[0].address\n\t\t\t\tsearchable: true\n\t\t\t}\n\t\t\t{\n\t\t\t\tdata: 'emails'\n\t\t\t\ttitle: 'Mail'\n\t\t\t\t# TODO: use `tmpl`\n\t\t\t\tcreatedCell: (node, cellData, rowData) ->\n\t\t\t\t\t$(node).html(Blaze.toHTMLWithData Template.adminUsersMailBtn, {emails: cellData})\n\t\t\t\twidth: '40px'\n\t\t\t}\n\t\t\t{ data: 'createdAt', title: 'Joined' }\n\t\t], adminEditDelButtons\n\t\tdom: adminTablesDom\n","@AdminCollectionsCount = new Mongo.Collection 'adminCollectionsCount'","Template.registerHelper('AdminTables', AdminTables);\n\nadminCollections = ->\n\tcollections = {}\n\n\tif typeof AdminConfig != 'undefined'  and typeof AdminConfig.collections == 'object'\n\t\tcollections = AdminConfig.collections\n\n\tcollections.Users =\n\t\tcollectionObject: Meteor.users\n\t\ticon: 'user'\n\t\tlabel: '账号管理'\n\n\t_.map collections, (obj, key) ->\n\t\tobj = _.extend obj, {name: key}\n\t\tobj = _.defaults obj, {label: key, icon: 'plus', color: 'blue'}\n\t\tobj = _.extend obj,\n\t\t\tviewPath: Router.path \"adminDashboard#{key}View\"\n\t\t\tnewPath: Router.path \"adminDashboard#{key}New\"\n\nUI.registerHelper 'AdminConfig', ->\n\tAdminConfig if typeof AdminConfig != 'undefined'\n\nUI.registerHelper 'admin_skin', ->\n\tAdminConfig?.skin or 'blue'\n\nUI.registerHelper 'admin_collections', adminCollections\n\nUI.registerHelper 'admin_collection_name', ->\n\tSession.get 'admin_collection_name'\n\nUI.registerHelper 'admin_current_id', ->\n\tSession.get 'admin_id'\n\nUI.registerHelper 'admin_current_doc', ->\n\tSession.get 'admin_doc'\n\nUI.registerHelper 'admin_is_users_collection', ->\n\tSession.get('admin_collection_name') == 'Users'\n\nUI.registerHelper 'admin_sidebar_items', ->\n\tAdminDashboard.sidebarItems\n\nUI.registerHelper 'admin_collection_items', ->\n\titems = []\n\t_.each AdminDashboard.collectionItems, (fn) =>\n\t\titem = fn @name, '/admin/' + @name\n\t\tif item?.title and item?.url\n\t\t\titems.push item\n\titems\n\nUI.registerHelper 'admin_omit_fields', ->\n\tif typeof AdminConfig.autoForm != 'undefined' and typeof AdminConfig.autoForm.omitFields == 'object'\n\t\tglobal = AdminConfig.autoForm.omitFields\n\tif not Session.equals('admin_collection_name','Users') and typeof AdminConfig != 'undefined' and typeof AdminConfig.collections[Session.get 'admin_collection_name'].omitFields == 'object'\n\t\tcollection = AdminConfig.collections[Session.get 'admin_collection_name'].omitFields\n\tif typeof global == 'object' and typeof collection == 'object'\n\t\t_.union global, collection\n\telse if typeof global == 'object'\n\t\tglobal\n\telse if typeof collection == 'object'\n\t\tcollection\n\nUI.registerHelper 'AdminSchemas', ->\n\tAdminDashboard.schemas\n\nUI.registerHelper 'adminGetSkin', ->\n\tif typeof AdminConfig.dashboard != 'undefined' and typeof AdminConfig.dashboard.skin == 'string'\n\t\tAdminConfig.dashboard.skin\n\telse\n\t\t'blue'\n\nUI.registerHelper 'adminIsUserInRole', (_id,role)->\n\tRoles.userIsInRole _id, role\n\nUI.registerHelper 'adminGetUsers', ->\n\tMeteor.users\n\nUI.registerHelper 'adminGetUserSchema', ->\n\tif _.has(AdminConfig, 'userSchema')\n\t\tschema = AdminConfig.userSchema\n\telse if typeof Meteor.users._c2 == 'object'\n\t\tschema = Meteor.users.simpleSchema()\n\n\treturn schema\n\nUI.registerHelper 'adminCollectionLabel', (collection)->\n\tAdminDashboard.collectionLabel(collection) if collection?\n\nUI.registerHelper 'adminCollectionCount', (collection)->\n\tif collection == 'Users'\n\t\tMeteor.users.find().count()\n\telse\n\t\tAdminCollectionsCount.findOne({collection: collection})?.count\n\nUI.registerHelper 'adminTemplate', (collection, mode)->\n\tif collection?.toLowerCase() != 'users' && typeof AdminConfig?.collections?[collection]?.templates != 'undefined'\n\t\tAdminConfig.collections[collection].templates[mode]\n\nUI.registerHelper 'adminGetCollection', (collection)->\n\t_.find adminCollections(), (item) -> item.name == collection\n\nUI.registerHelper 'adminWidgets', ->\n\tif typeof AdminConfig.dashboard != 'undefined' and typeof AdminConfig.dashboard.widgets != 'undefined'\n\t\tAdminConfig.dashboard.widgets\n\nUI.registerHelper 'adminUserEmail', (user) ->\n\tif user && user.emails && user.emails[0] && user.emails[0].address\n\t\tuser.emails[0].address\n\telse if user && user.services && user.services.facebook && user.services.facebook.email\n\t\tuser.services.facebook.email\n\telse if user && user.services && user.services.google && user.services.google.email\n\t\tuser.services.google.email\n","Template.AdminDashboardViewWrapper.rendered = ->\n\tnode = @firstNode\n\n\t@autorun ->\n\t\tdata = Template.currentData()\n\n\t\tif data.view then Blaze.remove data.view\n\t\twhile node.firstChild\n\t\t\tnode.removeChild node.firstChild\n\n\t\tdata.view = Blaze.renderWithData Template.AdminDashboardView, data, node\n\nTemplate.AdminDashboardViewWrapper.destroyed = ->\n\tBlaze.remove @data.view\n\nTemplate.AdminDashboardView.rendered = ->\n\ttable = @$('.dataTable').DataTable();\n\tfilter = @$('.dataTables_filter')\n\tlength = @$('.dataTables_length')\n\n\tfilter.html '\n\t\t<div class=\"input-group\">\n\t\t\t<input type=\"search\" class=\"form-control input-sm\" placeholder=\"Search\"></input>\n\t\t\t<div class=\"input-group-btn\">\n\t\t\t\t<button class=\"btn btn-sm btn-default\">\n\t\t\t\t\t<i class=\"fa fa-search\"></i>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t'\n\n\tlength.html '\n\t\t<select class=\"form-control input-sm\">\n\t\t\t<option value=\"10\">10</option>\n\t\t\t<option value=\"25\">25</option>\n\t\t\t<option value=\"50\">50</option>\n\t\t\t<option value=\"100\">100</option>\n\t\t</select>\n\t'\n\n\tfilter.find('input').on 'keyup', ->\n\t\ttable.search(@value).draw()\n\n\tlength.find('select').on 'change', ->\n\t\ttable.page.len(parseInt @value).draw()\n\nTemplate.AdminDashboardView.helpers\n\thasDocuments: ->\n\t\tAdminCollectionsCount.findOne({collection: Session.get 'admin_collection_name'})?.count > 0\n\tnewPath: ->\n\t\tRouter.path 'adminDashboard' + Session.get('admin_collection_name') + 'New'\n\nTemplate.adminEditBtn.helpers\n\tpath: ->\n\t\tRouter.path \"adminDashboard\" + Session.get('admin_collection_name') + \"Edit\", _id: @_id\n","Template.AdminLayout.events\n\t'click .btn-delete': (e,t) ->\n\t\t_id = $(e.target).attr('doc')\n\t\tif Session.equals 'admin_collection_name', 'Users' \n\t\t\tSession.set 'admin_id', _id\n\t\t\tSession.set 'admin_doc', Meteor.users.findOne(_id)\n\t\telse\n\t\t\tSession.set 'admin_id', parseID(_id)\n\t\t\tSession.set 'admin_doc', adminCollectionObject(Session.get('admin_collection_name')).findOne(parseID(_id))\n\nTemplate.AdminDeleteModal.events\n\t'click #confirm-delete': () ->\n\t\tcollection = Session.get 'admin_collection_name'\n\t\t_id = Session.get 'admin_id'\n\t\tMeteor.call 'adminRemoveDoc', collection, _id, (e,r)->\n\t\t\t$('#admin-delete-modal').modal('hide')\n\nTemplate.AdminDashboardUsersEdit.events\n\t'click .btn-add-role': (e,t) ->\n\t\tconsole.log 'adding user'\n\t\tMeteor.call 'adminAddUserToRole', $(e.target).attr('user'), $(e.target).attr('role')\n\t'click .btn-remove-role': (e,t) ->\n\t\tconsole.log 'removing user'\n\t\tMeteor.call 'adminRemoveUserToRole', $(e.target).attr('user'), $(e.target).attr('role')\n\nTemplate.AdminHeader.events\n\t'click .btn-sign-out': () ->\n\t\tMeteor.logout ->\n\t\t\tRouter.go(AdminConfig?.logoutRedirect or '/')","# Add hooks used by many forms\nAutoForm.addHooks [\n\t\t'admin_insert',\n\t\t'admin_update',\n\t\t'adminNewUser',\n\t\t'adminUpdateUser',\n\t\t'adminSendResetPasswordEmail',\n\t\t'adminChangePassword'],\n\tbeginSubmit: ->\n\t\t$('.btn-primary').addClass('disabled')\n\tendSubmit: ->\n\t\t$('.btn-primary').removeClass('disabled')\n\tonError: (formType, error)->\n\t\tAdminDashboard.alertFailure error.message\n\nAutoForm.hooks\n\tadmin_insert:\n\t\tonSubmit: (insertDoc, updateDoc, currentDoc)->\n\t\t\thook = @\n\t\t\tMeteor.call 'adminInsertDoc', insertDoc, Session.get('admin_collection_name'), (e,r)->\n\t\t\t\tif e\n\t\t\t\t\thook.done(e)\n\t\t\t\telse\n\t\t\t\t\tadminCallback 'onInsert', [Session.get 'admin_collection_name', insertDoc, updateDoc, currentDoc], (collection) ->\n\t\t\t\t\t\thook.done null, collection\n\t\t\treturn false\n\t\tonSuccess: (formType, collection)->\n\t\t\tAdminDashboard.alertSuccess 'Successfully created'\n\t\t\tRouter.go \"/admin/#{collection}\"\n\n\tadmin_update:\n\t\tonSubmit: (insertDoc, updateDoc, currentDoc)->\n\t\t\thook = @\n\t\t\tMeteor.call 'adminUpdateDoc', updateDoc, Session.get('admin_collection_name'), Session.get('admin_id'), (e,r)->\n\t\t\t\tif e\n\t\t\t\t\thook.done(e)\n\t\t\t\telse\n\t\t\t\t\tadminCallback 'onUpdate', [Session.get 'admin_collection_name', insertDoc, updateDoc, currentDoc], (collection) ->\n\t\t\t\t\t\thook.done null, collection\n\t\t\treturn false\n\t\tonSuccess: (formType, collection)->\n\t\t\tAdminDashboard.alertSuccess 'Successfully updated'\n\t\t\tRouter.go \"/admin/#{collection}\"\n\n\tadminNewUser:\n\t\tonSuccess: (formType, result)->\n\t\t\tAdminDashboard.alertSuccess 'Created user'\n\t\t\tRouter.go '/admin/Users'\n\n\tadminUpdateUser:\n\t\tonSubmit: (insertDoc, updateDoc, currentDoc)->\n\t\t\tMeteor.call 'adminUpdateUser', updateDoc, Session.get('admin_id'), @done\n\t\t\treturn false\n\t\tonSuccess: (formType, result)->\n\t\t\tAdminDashboard.alertSuccess 'Updated user'\n\t\t\tRouter.go '/admin/Users'\n\n\tadminSendResetPasswordEmail:\n\t\tonSuccess: (formType, result)->\n\t\t\tAdminDashboard.alertSuccess 'Email sent'\n\n\tadminChangePassword:\n\t\tonSuccess: (operation, result, template)->\n\t\t\tAdminDashboard.alertSuccess 'Password reset'\n"]}}]