{"source":"__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nTemplate.AdminLayout.events({\n  'click .btn-delete': function(e, t) {\n    var _id;\n    _id = $(e.target).attr('doc');\n    if (Session.equals('admin_collection_name', 'Users')) {\n      Session.set('admin_id', _id);\n      return Session.set('admin_doc', Meteor.users.findOne(_id));\n    } else {\n      Session.set('admin_id', parseID(_id));\n      return Session.set('admin_doc', adminCollectionObject(Session.get('admin_collection_name')).findOne(parseID(_id)));\n    }\n  }\n});\n\nTemplate.AdminDeleteModal.events({\n  'click #confirm-delete': function() {\n    var _id, collection;\n    collection = Session.get('admin_collection_name');\n    _id = Session.get('admin_id');\n    return Meteor.call('adminRemoveDoc', collection, _id, function(e, r) {\n      return $('#admin-delete-modal').modal('hide');\n    });\n  }\n});\n\nTemplate.AdminDashboardUsersEdit.events({\n  'click .btn-add-role': function(e, t) {\n    console.log('adding user');\n    return Meteor.call('adminAddUserToRole', $(e.target).attr('user'), $(e.target).attr('role'));\n  },\n  'click .btn-remove-role': function(e, t) {\n    console.log('removing user');\n    return Meteor.call('adminRemoveUserToRole', $(e.target).attr('user'), $(e.target).attr('role'));\n  }\n});\n\nTemplate.AdminHeader.events({\n  'click .btn-sign-out': function() {\n    return Meteor.logout(function() {\n      return Router.go((typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.logoutRedirect : void 0) || '/');\n    });\n  }\n});\n","sourceMap":{"version":3,"file":"/lib/client/js/events.coffee.js","sourceRoot":"","sources":["/packages/wangziguan_admin/lib/client/js/events.coffee"],"names":[],"mappings":";AAAA,QAAQ,CAAC,WAAW,CAAC,MAArB,CACC;AAAA,EAAA,mBAAA,EAAqB,SAAC,CAAD,EAAG,CAAH,GAAA;AACpB,QAAA,GAAA;AAAA,IAAA,GAAA,GAAM,CAAA,CAAE,CAAC,CAAC,MAAJ,CAAW,CAAC,IAAZ,CAAiB,KAAjB,CAAN,CAAA;AACA,IAAA,IAAG,OAAO,CAAC,MAAR,CAAe,uBAAf,EAAwC,OAAxC,CAAH;AACC,MAAA,OAAO,CAAC,GAAR,CAAY,UAAZ,EAAwB,GAAxB,CAAA,CAAA;aACA,OAAO,CAAC,GAAR,CAAY,WAAZ,EAAyB,MAAM,CAAC,KAAK,CAAC,OAAb,CAAqB,GAArB,CAAzB,EAFD;KAAA,MAAA;AAIC,MAAA,OAAO,CAAC,GAAR,CAAY,UAAZ,EAAwB,OAAA,CAAQ,GAAR,CAAxB,CAAA,CAAA;aACA,OAAO,CAAC,GAAR,CAAY,WAAZ,EAAyB,qBAAA,CAAsB,OAAO,CAAC,GAAR,CAAY,uBAAZ,CAAtB,CAA2D,CAAC,OAA5D,CAAoE,OAAA,CAAQ,GAAR,CAApE,CAAzB,EALD;KAFoB;EAAA,CAArB;CADD,CAAA,CAAA;;AAAA,QAUQ,CAAC,gBAAgB,CAAC,MAA1B,CACC;AAAA,EAAA,uBAAA,EAAyB,SAAA,GAAA;AACxB,QAAA,eAAA;AAAA,IAAA,UAAA,GAAa,OAAO,CAAC,GAAR,CAAY,uBAAZ,CAAb,CAAA;AAAA,IACA,GAAA,GAAM,OAAO,CAAC,GAAR,CAAY,UAAZ,CADN,CAAA;WAEA,MAAM,CAAC,IAAP,CAAY,gBAAZ,EAA8B,UAA9B,EAA0C,GAA1C,EAA+C,SAAC,CAAD,EAAG,CAAH,GAAA;aAC9C,CAAA,CAAE,qBAAF,CAAwB,CAAC,KAAzB,CAA+B,MAA/B,EAD8C;IAAA,CAA/C,EAHwB;EAAA,CAAzB;CADD,CAVA,CAAA;;AAAA,QAiBQ,CAAC,uBAAuB,CAAC,MAAjC,CACC;AAAA,EAAA,qBAAA,EAAuB,SAAC,CAAD,EAAG,CAAH,GAAA;AACtB,IAAA,OAAO,CAAC,GAAR,CAAY,aAAZ,CAAA,CAAA;WACA,MAAM,CAAC,IAAP,CAAY,oBAAZ,EAAkC,CAAA,CAAE,CAAC,CAAC,MAAJ,CAAW,CAAC,IAAZ,CAAiB,MAAjB,CAAlC,EAA4D,CAAA,CAAE,CAAC,CAAC,MAAJ,CAAW,CAAC,IAAZ,CAAiB,MAAjB,CAA5D,EAFsB;EAAA,CAAvB;AAAA,EAGA,wBAAA,EAA0B,SAAC,CAAD,EAAG,CAAH,GAAA;AACzB,IAAA,OAAO,CAAC,GAAR,CAAY,eAAZ,CAAA,CAAA;WACA,MAAM,CAAC,IAAP,CAAY,uBAAZ,EAAqC,CAAA,CAAE,CAAC,CAAC,MAAJ,CAAW,CAAC,IAAZ,CAAiB,MAAjB,CAArC,EAA+D,CAAA,CAAE,CAAC,CAAC,MAAJ,CAAW,CAAC,IAAZ,CAAiB,MAAjB,CAA/D,EAFyB;EAAA,CAH1B;CADD,CAjBA,CAAA;;AAAA,QAyBQ,CAAC,WAAW,CAAC,MAArB,CACC;AAAA,EAAA,qBAAA,EAAuB,SAAA,GAAA;WACtB,MAAM,CAAC,MAAP,CAAc,SAAA,GAAA;aACb,MAAM,CAAC,EAAP,+DAAU,WAAW,CAAE,wBAAb,IAA+B,GAAzC,EADa;IAAA,CAAd,EADsB;EAAA,CAAvB;CADD,CAzBA,CAAA","sourcesContent":["Template.AdminLayout.events\n\t'click .btn-delete': (e,t) ->\n\t\t_id = $(e.target).attr('doc')\n\t\tif Session.equals 'admin_collection_name', 'Users' \n\t\t\tSession.set 'admin_id', _id\n\t\t\tSession.set 'admin_doc', Meteor.users.findOne(_id)\n\t\telse\n\t\t\tSession.set 'admin_id', parseID(_id)\n\t\t\tSession.set 'admin_doc', adminCollectionObject(Session.get('admin_collection_name')).findOne(parseID(_id))\n\nTemplate.AdminDeleteModal.events\n\t'click #confirm-delete': () ->\n\t\tcollection = Session.get 'admin_collection_name'\n\t\t_id = Session.get 'admin_id'\n\t\tMeteor.call 'adminRemoveDoc', collection, _id, (e,r)->\n\t\t\t$('#admin-delete-modal').modal('hide')\n\nTemplate.AdminDashboardUsersEdit.events\n\t'click .btn-add-role': (e,t) ->\n\t\tconsole.log 'adding user'\n\t\tMeteor.call 'adminAddUserToRole', $(e.target).attr('user'), $(e.target).attr('role')\n\t'click .btn-remove-role': (e,t) ->\n\t\tconsole.log 'removing user'\n\t\tMeteor.call 'adminRemoveUserToRole', $(e.target).attr('user'), $(e.target).attr('role')\n\nTemplate.AdminHeader.events\n\t'click .btn-sign-out': () ->\n\t\tMeteor.logout ->\n\t\t\tRouter.go(AdminConfig?.logoutRedirect or '/')"]}}