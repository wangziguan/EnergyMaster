{"source":"__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar checkParams, checkRouteOrPath, checkRouterPackages, errorMessages, fr, ir, test;\nfr = ir = null;\n\ncheckRouteOrPath = function (arg) {\n  var error;\n\n  try {\n    return check(arg, Match.OneOf(RegExp, String));\n  } catch (error1) {\n    error = error1;\n    throw new Error(errorMessages.invalidRouteNameArgument);\n  }\n};\n\ncheckParams = function (arg) {\n  var error;\n\n  try {\n    return check(arg, Object);\n  } catch (error1) {\n    error = error1;\n    throw new Error(errorMessages.invalidRouteParamsArgument);\n  }\n};\n\ncheckRouterPackages = function () {\n  var ref, ref1;\n  fr = (ref = (ref1 = Package['kadira:flow-router']) != null ? ref1 : Package['meteorhacks:flow-router']) != null ? ref : Package['kadira:flow-router-ssr'];\n  ir = Package['iron:router'];\n\n  if (!(ir || fr)) {\n    throw new Error(errorMessages.noSupportedRouter);\n  }\n};\n\nerrorMessages = {\n  noSupportedRouter: 'No supported router installed. Please install ' + 'iron:router or meteorhacks:flow-router.',\n  invalidRouteNameArgument: 'Invalid argument, must be String or RegExp.',\n  invalidRouteParamsArgument: 'Invalid arguemnt, must be Object.'\n};\nshare.config = new ReactiveDict('activeRouteConfig');\nshare.config.setDefault({\n  activeClass: 'active',\n  caseSensitive: true,\n  disabledClass: 'disabled'\n});\n\ntest = function (value, pattern) {\n  var result;\n\n  if (!value) {\n    return false;\n  }\n\n  if (Match.test(pattern, RegExp)) {\n    result = value.search(pattern);\n    result = result > -1;\n  } else if (Match.test(pattern, String)) {\n    if (share.config.equals('caseSensitive', false)) {\n      value = value.toLowerCase();\n      pattern = pattern.toLowerCase();\n    }\n\n    result = value === pattern;\n  }\n\n  return result != null ? result : result = false;\n};\n\nActiveRoute = {\n  config: function () {\n    return this.configure.apply(this, arguments);\n  },\n  configure: function (options) {\n    if (Meteor.isServer) {\n      return;\n    }\n\n    share.config.set(options);\n  },\n  name: function (routeName) {\n    let routeParams = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var controller, currentPath, currentRouteName, path, ref, ref1;\n    checkRouterPackages();\n\n    if (Meteor.isServer && !Package['kadira:flow-router-ssr']) {\n      return;\n    }\n\n    checkRouteOrPath(routeName);\n    checkParams(routeParams);\n\n    if (ir) {\n      if (!_.isEmpty(routeParams) && Match.test(routeName, String)) {\n        controller = ir.Router.current();\n\n        if (controller != null ? controller.route : void 0) {\n          currentPath = controller != null ? controller.location.get().path : void 0;\n        }\n\n        path = ir.Router.path(routeName, routeParams);\n      } else {\n        currentRouteName = (ref = ir.Router.current()) != null ? (ref1 = ref.route) != null ? typeof ref1.getName === \"function\" ? ref1.getName() : void 0 : void 0 : void 0;\n      }\n    }\n\n    if (fr) {\n      if (!_.isEmpty(routeParams) && Match.test(routeName, String)) {\n        fr.FlowRouter.watchPathChange();\n\n        if (currentPath == null) {\n          currentPath = fr.FlowRouter.current().path;\n        }\n\n        if (path == null) {\n          path = fr.FlowRouter.path(routeName, routeParams);\n        }\n      } else {\n        if (currentRouteName == null) {\n          currentRouteName = fr.FlowRouter.getRouteName();\n        }\n      }\n    }\n\n    return test(currentPath || currentRouteName, path || routeName);\n  },\n  path: function (path) {\n    var controller, currentPath;\n    checkRouterPackages();\n\n    if (Meteor.isServer) {\n      return;\n    }\n\n    checkRouteOrPath(path);\n\n    if (ir) {\n      controller = ir.Router.current();\n\n      if (controller != null ? controller.route : void 0) {\n        currentPath = controller != null ? controller.location.get().path : void 0;\n      }\n    }\n\n    if (fr) {\n      fr.FlowRouter.watchPathChange();\n\n      if (currentPath == null) {\n        currentPath = fr.FlowRouter.current().path;\n      }\n    }\n\n    return test(currentPath, path);\n  }\n};","sourceMap":{"version":3,"sources":["/packages/zimme_active-route/lib/activeroute.coffee","/lib/activeroute.coffee"],"names":["checkParams","checkRouteOrPath","checkRouterPackages","errorMessages","fr","ir","test","arg","error","check","Match","OneOf","RegExp","String","error1","Error","invalidRouteNameArgument","Object","invalidRouteParamsArgument","ref","ref1","Package","noSupportedRouter","share","config","ReactiveDict","setDefault","activeClass","caseSensitive","disabledClass","value","pattern","result","search","equals","toLowerCase","ActiveRoute","configure","apply","arguments","options","Meteor","isServer","set","name","routeName","routeParams","controller","currentPath","currentRouteName","path","_","isEmpty","Router","current","route","location","get","getName","FlowRouter","watchPathChange","getRouteName"],"mappings":"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","file":"packages/zimme:active-route/lib/activeroute.coffee.map","sourcesContent":["fr = ir = null\n\ncheckRouteOrPath = (arg) ->\n  try\n    check arg, Match.OneOf RegExp, String\n  catch error\n    throw new Error errorMessages.invalidRouteNameArgument\n\ncheckParams = (arg) ->\n  try\n    check arg, Object\n  catch error\n    throw new Error errorMessages.invalidRouteParamsArgument\n\ncheckRouterPackages = ->\n  fr = Package['kadira:flow-router'] ? Package['meteorhacks:flow-router'] ? Package['kadira:flow-router-ssr']\n  ir = Package['iron:router']\n  throw new Error errorMessages.noSupportedRouter unless ir or fr\n\nerrorMessages =\n  noSupportedRouter:\n    'No supported router installed. Please install ' +\n    'iron:router or meteorhacks:flow-router.'\n\n  invalidRouteNameArgument: 'Invalid argument, must be String or RegExp.'\n  invalidRouteParamsArgument: 'Invalid arguemnt, must be Object.'\n\nshare.config = new ReactiveDict 'activeRouteConfig'\nshare.config.setDefault\n  activeClass: 'active'\n  caseSensitive: true\n  disabledClass: 'disabled'\n\ntest = (value, pattern) ->\n  return false unless value\n\n  if Match.test pattern, RegExp\n    result = value.search pattern\n    result = result > -1\n\n  else if Match.test pattern, String\n    if share.config.equals 'caseSensitive', false\n      value = value.toLowerCase()\n      pattern = pattern.toLowerCase()\n\n    result = value is pattern\n\n  result ?= false\n\nActiveRoute =\n\n  config: ->\n    @configure.apply @, arguments\n\n  configure: (options) ->\n    return if Meteor.isServer\n\n    share.config.set options\n    return\n\n  name: (routeName, routeParams = {}) ->\n    checkRouterPackages()\n\n    return if (Meteor.isServer && !Package['kadira:flow-router-ssr'])\n\n    checkRouteOrPath routeName\n    checkParams routeParams\n\n    if ir\n      if not _.isEmpty(routeParams) and Match.test routeName, String\n        controller = ir.Router.current()\n        currentPath = controller?.location.get().path if controller?.route\n        path = ir.Router.path routeName, routeParams\n\n      else\n        currentRouteName = ir.Router.current()?.route?.getName?()\n\n    if fr\n      if not _.isEmpty(routeParams) and Match.test routeName, String\n        fr.FlowRouter.watchPathChange()\n        currentPath ?= fr.FlowRouter.current().path\n        path ?= fr.FlowRouter.path routeName, routeParams\n\n      else\n        currentRouteName ?= fr.FlowRouter.getRouteName()\n\n    test currentPath or currentRouteName, path or routeName\n\n  path: (path) ->\n    checkRouterPackages()\n\n    return if Meteor.isServer\n\n    checkRouteOrPath path\n\n    if ir\n      controller = ir.Router.current()\n      currentPath = controller?.location.get().path if controller?.route\n\n    if fr\n      fr.FlowRouter.watchPathChange()\n      currentPath ?= fr.FlowRouter.current().path\n\n    test currentPath, path\n","var checkParams, checkRouteOrPath, checkRouterPackages, errorMessages, fr, ir, test;             \n\nfr = ir = null;\n\ncheckRouteOrPath = function(arg) {\n  var error;\n  try {\n    return check(arg, Match.OneOf(RegExp, String));\n  } catch (error1) {\n    error = error1;\n    throw new Error(errorMessages.invalidRouteNameArgument);\n  }\n};\n\ncheckParams = function(arg) {\n  var error;\n  try {\n    return check(arg, Object);\n  } catch (error1) {\n    error = error1;\n    throw new Error(errorMessages.invalidRouteParamsArgument);\n  }\n};\n\ncheckRouterPackages = function() {\n  var ref, ref1;\n  fr = (ref = (ref1 = Package['kadira:flow-router']) != null ? ref1 : Package['meteorhacks:flow-router']) != null ? ref : Package['kadira:flow-router-ssr'];\n  ir = Package['iron:router'];\n  if (!(ir || fr)) {\n    throw new Error(errorMessages.noSupportedRouter);\n  }\n};\n\nerrorMessages = {\n  noSupportedRouter: 'No supported router installed. Please install ' + 'iron:router or meteorhacks:flow-router.',\n  invalidRouteNameArgument: 'Invalid argument, must be String or RegExp.',\n  invalidRouteParamsArgument: 'Invalid arguemnt, must be Object.'\n};\n\nshare.config = new ReactiveDict('activeRouteConfig');\n\nshare.config.setDefault({\n  activeClass: 'active',\n  caseSensitive: true,\n  disabledClass: 'disabled'\n});\n\ntest = function(value, pattern) {\n  var result;\n  if (!value) {\n    return false;\n  }\n  if (Match.test(pattern, RegExp)) {\n    result = value.search(pattern);\n    result = result > -1;\n  } else if (Match.test(pattern, String)) {\n    if (share.config.equals('caseSensitive', false)) {\n      value = value.toLowerCase();\n      pattern = pattern.toLowerCase();\n    }\n    result = value === pattern;\n  }\n  return result != null ? result : result = false;\n};\n\nActiveRoute = {\n  config: function() {\n    return this.configure.apply(this, arguments);\n  },\n  configure: function(options) {\n    if (Meteor.isServer) {\n      return;\n    }\n    share.config.set(options);\n  },\n  name: function(routeName, routeParams = {}) {\n    var controller, currentPath, currentRouteName, path, ref, ref1;\n    checkRouterPackages();\n    if (Meteor.isServer && !Package['kadira:flow-router-ssr']) {\n      return;\n    }\n    checkRouteOrPath(routeName);\n    checkParams(routeParams);\n    if (ir) {\n      if (!_.isEmpty(routeParams) && Match.test(routeName, String)) {\n        controller = ir.Router.current();\n        if (controller != null ? controller.route : void 0) {\n          currentPath = controller != null ? controller.location.get().path : void 0;\n        }\n        path = ir.Router.path(routeName, routeParams);\n      } else {\n        currentRouteName = (ref = ir.Router.current()) != null ? (ref1 = ref.route) != null ? typeof ref1.getName === \"function\" ? ref1.getName() : void 0 : void 0 : void 0;\n      }\n    }\n    if (fr) {\n      if (!_.isEmpty(routeParams) && Match.test(routeName, String)) {\n        fr.FlowRouter.watchPathChange();\n        if (currentPath == null) {\n          currentPath = fr.FlowRouter.current().path;\n        }\n        if (path == null) {\n          path = fr.FlowRouter.path(routeName, routeParams);\n        }\n      } else {\n        if (currentRouteName == null) {\n          currentRouteName = fr.FlowRouter.getRouteName();\n        }\n      }\n    }\n    return test(currentPath || currentRouteName, path || routeName);\n  },\n  path: function(path) {\n    var controller, currentPath;\n    checkRouterPackages();\n    if (Meteor.isServer) {\n      return;\n    }\n    checkRouteOrPath(path);\n    if (ir) {\n      controller = ir.Router.current();\n      if (controller != null ? controller.route : void 0) {\n        currentPath = controller != null ? controller.location.get().path : void 0;\n      }\n    }\n    if (fr) {\n      fr.FlowRouter.watchPathChange();\n      if (currentPath == null) {\n        currentPath = fr.FlowRouter.current().path;\n      }\n    }\n    return test(currentPath, path);\n  }\n};\n"]}}