{"source":"__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nthis.adminCollectionObject = function (collection) {\n  if (typeof AdminConfig.collections[collection] !== 'undefined' && typeof AdminConfig.collections[collection].collectionObject !== 'undefined') {\n    return AdminConfig.collections[collection].collectionObject;\n  } else {\n    return lookup(collection);\n  }\n};\n\nthis.adminCallback = function (name, args, callback) {\n  var ref1, stop;\n  stop = false;\n\n  if (typeof (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? (ref1 = AdminConfig.callbacks) != null ? ref1[name] : void 0 : void 0) === 'function') {\n    var _AdminConfig$callback;\n\n    stop = (_AdminConfig$callback = AdminConfig.callbacks)[name].apply(_AdminConfig$callback, _toConsumableArray(args)) === false;\n  }\n\n  if (typeof callback === 'function') {\n    if (!stop) {\n      return callback.apply(void 0, _toConsumableArray(args));\n    }\n  }\n};\n\nthis.lookup = function (obj, root) {\n  var required = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var arr, ref;\n\n  if (typeof root === 'undefined') {\n    root = Meteor.isServer ? global : window;\n  }\n\n  if (typeof obj === 'string') {\n    ref = root;\n    arr = obj.split('.');\n\n    while (arr.length && (ref = ref[arr.shift()])) {\n      continue;\n    }\n\n    if (!ref && required) {\n      throw new Error(obj + ' is not in the ' + root.toString());\n    } else {\n      return ref;\n    }\n  }\n\n  return obj;\n};\n\nthis.parseID = function (id) {\n  if (typeof id === 'string') {\n    if (id.indexOf(\"ObjectID\") > -1) {\n      return new Mongo.ObjectID(id.slice(id.indexOf('\"') + 1, id.lastIndexOf('\"')));\n    } else {\n      return id;\n    }\n  } else {\n    return id;\n  }\n};\n\nthis.parseIDs = function (ids) {\n  return _.map(ids, function (id) {\n    return parseID(id);\n  });\n};","sourceMap":{"version":3,"sources":["/packages/wangziguan_admin/lib/both/utils.coffee","/lib/both/utils.coffee"],"names":["adminCollectionObject","collection","AdminConfig","collections","collectionObject","lookup","adminCallback","name","args","callback","ref1","stop","callbacks","obj","root","required","arr","ref","Meteor","isServer","global","window","split","length","shift","Error","toString","parseID","id","indexOf","Mongo","ObjectID","slice","lastIndexOf","parseIDs","ids","_","map"],"mappings":";;;;;;;;;AAAA,KAACA,qBAAD,GAAyB,UAACC,UAAD,EAAA;AACxB,MAAG,OAAOC,WAAW,CAACC,WAAZ,CAAwBF,UAAxB,CAAP,KAA8C,WAA9C,IAA8D,OAAOC,WAAW,CAACC,WAAZ,CAAwBF,UAAxB,EAAoCG,gBAA3C,KAA+D,WAAhI,EAAA;ACCG,WDAFF,WAAW,CAACC,WAAZ,CAAwBF,UAAxB,EAAoCG,gBCAlC;ADDH,GAAA,MAAA;ACGG,WDAFC,MAAA,CAAOJ,UAAP,CCAE;AACD;ADLsB,CAAzB;;AAMA,KAACK,aAAD,GAAiB,UAACC,IAAD,EAAOC,IAAP,EAAaC,QAAb,EAAA;AAChB,MAAAC,IAAA,EAAAC,IAAA;AAAAA,EAAAA,IAAA,GAAO,KAAP;;AACA,MAAG,QAAA,OAAAT,WAAA,KAAA,WAAA,IAAAA,WAAA,KAAA,IAAA,GAAA,CAAAQ,IAAA,GAAAR,WAAA,CAAAU,SAAA,KAAA,IAAA,GAAAF,IAA+B,CAAAH,IAAA,CAA/B,GAA+B,KAAA,CAA/B,GAA+B,KAAA,CAA/B,MAAwC,UAA3C,EAAA;AAAA;;AACCI,IAAAA,IAAA,GAAO,yBAAAT,WAAW,CAACU,SAAZ,EAAsBL,IAAtB,kDAA4BC,IAA5B,OAAwC,KAA/C;ACIC;;ADHF,MAAG,OAAOC,QAAP,KAAmB,UAAtB,EAAA;AACC,QAAA,CAAwBE,IAAxB,EAAA;ACKI,aDLJF,QAAA,MAAA,4BAASD,IAAT,ECKI;ADNL;ACQE;ADZc,CAAjB;;AAOA,KAACH,MAAD,GAAU,UAACQ,GAAD,EAAMC,IAAN,EAAA;AAAA,MAAYC,QAAZ,uEAAqB,IAArB;AACT,MAAAC,GAAA,EAAAC,GAAA;;AAAA,MAAG,OAAOH,IAAP,KAAe,WAAlB,EAAA;AACCA,IAAAA,IAAA,GAAUI,MAAM,CAACC,QAAP,GAAqBC,MAArB,GAAiCC,MAA3C;ACUC;;ADTF,MAAG,OAAOR,GAAP,KAAc,QAAjB,EAAA;AACCI,IAAAA,GAAA,GAAMH,IAAN;AACAE,IAAAA,GAAA,GAAMH,GAAG,CAACS,KAAJ,CAAU,GAAV,CAAN;;AACS,WAAMN,GAAG,CAACO,MAAJ,KAAgBN,GAAA,GAAMA,GAAI,CAAAD,GAAG,CAACQ,KAAJ,EAAA,CAA1B,CAAN,EAAA;AAAT;AAAS;;AACT,QAAG,CAAIP,GAAJ,IAAYF,QAAf,EAAA;AACC,YAAM,IAAIU,KAAJ,CAAUZ,GAAA,GAAM,iBAAN,GAA0BC,IAAI,CAACY,QAAL,EAApC,CAAN;AADD,KAAA,MAAA;AAGC,aAAOT,GAAP;AAPF;ACqBE;;ADbF,SAAOJ,GAAP;AAXS,CAAV;;AAaA,KAACc,OAAD,GAAW,UAACC,EAAD,EAAA;AACV,MAAG,OAAOA,EAAP,KAAa,QAAhB,EAAA;AACC,QAAGA,EAAE,CAACC,OAAH,CAAW,UAAX,IAAyB,CAAC,CAA7B,EAAA;AACC,aAAO,IAAIC,KAAK,CAACC,QAAV,CAAmBH,EAAE,CAACI,KAAH,CAASJ,EAAE,CAACC,OAAH,CAAW,GAAX,IAAkB,CAA3B,EAA6BD,EAAE,CAACK,WAAH,CAAe,GAAf,CAA7B,CAAnB,CAAP;AADD,KAAA,MAAA;AAGC,aAAOL,EAAP;AAJF;AAAA,GAAA,MAAA;AAMC,WAAOA,EAAP;ACiBC;ADxBQ,CAAX;;AASA,KAACM,QAAD,GAAY,UAACC,GAAD,EAAA;AACR,SAAOC,CAAC,CAACC,GAAF,CAAMF,GAAN,EAAW,UAACP,EAAD,EAAA;ACmBlB,WDlBID,OAAA,CAAQC,EAAR,CCkBJ;ADnBO,GAAA,CAAP;AADQ,CAAZ","file":"packages/wangziguan:admin/lib/both/utils.coffee.map","sourcesContent":["@adminCollectionObject = (collection) ->\n\tif typeof AdminConfig.collections[collection] != 'undefined' and typeof AdminConfig.collections[collection].collectionObject != 'undefined'\n\t\tAdminConfig.collections[collection].collectionObject\n\telse\n\t\tlookup collection\n\n@adminCallback = (name, args, callback) ->\n\tstop = false\n\tif typeof AdminConfig?.callbacks?[name] == 'function'\n\t\tstop = AdminConfig.callbacks[name](args...) is false\n\tif typeof callback == 'function'\n\t\tcallback args... unless stop\n\n@lookup = (obj, root, required=true) ->\n\tif typeof root == 'undefined'\n\t\troot = if Meteor.isServer then global else window\n\tif typeof obj == 'string'\n\t\tref = root\n\t\tarr = obj.split '.'\n\t\tcontinue while arr.length and (ref = ref[arr.shift()])\n\t\tif not ref and required\n\t\t\tthrow new Error(obj + ' is not in the ' + root.toString())\n\t\telse\n\t\t\treturn ref\n\treturn obj\n\t\n@parseID = (id) ->\n\tif typeof id == 'string'\n\t\tif(id.indexOf(\"ObjectID\") > -1)\n\t\t\treturn new Mongo.ObjectID(id.slice(id.indexOf('\"') + 1,id.lastIndexOf('\"')))\n\t\telse\n\t\t\treturn id\n\telse\n\t\treturn id\n\n@parseIDs = (ids) ->\n    return _.map ids, (id) ->\n        parseID id\n","this.adminCollectionObject = function(collection) {\n  if (typeof AdminConfig.collections[collection] !== 'undefined' && typeof AdminConfig.collections[collection].collectionObject !== 'undefined') {\n    return AdminConfig.collections[collection].collectionObject;\n  } else {\n    return lookup(collection);\n  }\n};\n\nthis.adminCallback = function(name, args, callback) {\n  var ref1, stop;\n  stop = false;\n  if (typeof (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? (ref1 = AdminConfig.callbacks) != null ? ref1[name] : void 0 : void 0) === 'function') {\n    stop = AdminConfig.callbacks[name](...args) === false;\n  }\n  if (typeof callback === 'function') {\n    if (!stop) {\n      return callback(...args);\n    }\n  }\n};\n\nthis.lookup = function(obj, root, required = true) {\n  var arr, ref;\n  if (typeof root === 'undefined') {\n    root = Meteor.isServer ? global : window;\n  }\n  if (typeof obj === 'string') {\n    ref = root;\n    arr = obj.split('.');\n    while (arr.length && (ref = ref[arr.shift()])) {\n      continue;\n    }\n    if (!ref && required) {\n      throw new Error(obj + ' is not in the ' + root.toString());\n    } else {\n      return ref;\n    }\n  }\n  return obj;\n};\n\nthis.parseID = function(id) {\n  if (typeof id === 'string') {\n    if (id.indexOf(\"ObjectID\") > -1) {\n      return new Mongo.ObjectID(id.slice(id.indexOf('\"') + 1, id.lastIndexOf('\"')));\n    } else {\n      return id;\n    }\n  } else {\n    return id;\n  }\n};\n\nthis.parseIDs = function(ids) {\n  return _.map(ids, function(id) {\n    return parseID(id);\n  });\n};\n"]}}