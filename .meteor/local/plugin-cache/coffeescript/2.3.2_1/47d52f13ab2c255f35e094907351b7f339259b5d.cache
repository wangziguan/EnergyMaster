{"source":"__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nTemplate.AdminLayout.events({\n  'click .btn-delete': function (e, t) {\n    var _id;\n\n    _id = $(e.target).attr('doc');\n\n    if (Session.equals('admin_collection_name', 'Users')) {\n      Session.set('admin_id', _id);\n      return Session.set('admin_doc', Meteor.users.findOne(_id));\n    } else {\n      Session.set('admin_id', parseID(_id));\n      return Session.set('admin_doc', adminCollectionObject(Session.get('admin_collection_name')).findOne(parseID(_id)));\n    }\n  }\n});\nTemplate.AdminDeleteModal.events({\n  'click #confirm-delete': function () {\n    var _id, collection;\n\n    collection = Session.get('admin_collection_name');\n    _id = Session.get('admin_id');\n    return Meteor.call('adminRemoveDoc', collection, _id, function (e, r) {\n      return $('#admin-delete-modal').modal('hide');\n    });\n  }\n});\nTemplate.AdminDashboardUsersEdit.events({\n  'click .btn-add-role': function (e, t) {\n    console.log('adding user');\n    return Meteor.call('adminAddUserToRole', $(e.target).attr('user'), $(e.target).attr('role'));\n  },\n  'click .btn-remove-role': function (e, t) {\n    console.log('removing user');\n    return Meteor.call('adminRemoveUserToRole', $(e.target).attr('user'), $(e.target).attr('role'));\n  }\n});\nTemplate.AdminHeader.events({\n  'click .btn-sign-out': function () {\n    return Meteor.logout(function () {\n      return Router.go((typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.logoutRedirect : void 0) || '/');\n    });\n  }\n});","sourceMap":{"version":3,"sources":["/packages/wangziguan_admin/lib/client/js/events.coffee","/lib/client/js/events.coffee"],"names":["Template","AdminLayout","events","e","t","_id","$","target","attr","Session","equals","set","Meteor","users","findOne","parseID","adminCollectionObject","get","AdminDeleteModal","collection","call","r","modal","AdminDashboardUsersEdit","console","log","AdminHeader","logout","Router","go","AdminConfig","logoutRedirect"],"mappings":";AAAAA,QAAQ,CAACC,WAAT,CAAqBC,MAArB,CACC;AAAA,uBAAqB,UAACC,CAAD,EAAGC,CAAH,EAAA;AACpB,QAAAC,GAAA;;AAAAA,IAAAA,GAAA,GAAMC,CAAA,CAAEH,CAAC,CAACI,MAAJ,CAAA,CAAYC,IAAZ,CAAiB,KAAjB,CAAN;;AACA,QAAGC,OAAO,CAACC,MAAR,CAAe,uBAAf,EAAwC,OAAxC,CAAH,EAAA;AACCD,MAAAA,OAAO,CAACE,GAAR,CAAY,UAAZ,EAAwBN,GAAxB;ACEG,aDDHI,OAAO,CAACE,GAAR,CAAY,WAAZ,EAAyBC,MAAM,CAACC,KAAP,CAAaC,OAAb,CAAqBT,GAArB,CAAzB,CCCG;ADHJ,KAAA,MAAA;AAICI,MAAAA,OAAO,CAACE,GAAR,CAAY,UAAZ,EAAwBI,OAAA,CAAQV,GAAR,CAAxB;ACEG,aDDHI,OAAO,CAACE,GAAR,CAAY,WAAZ,EAAyBK,qBAAA,CAAsBP,OAAO,CAACQ,GAAR,CAAY,uBAAZ,CAAtB,CAAA,CAA4DH,OAA5D,CAAoEC,OAAA,CAAQV,GAAR,CAApE,CAAzB,CCCG;AACD;ADTiB;AAArB,CADD;AAUAL,QAAQ,CAACkB,gBAAT,CAA0BhB,MAA1B,CACC;AAAA,2BAAyB,YAAA;AACxB,QAAAG,GAAA,EAAAc,UAAA;;AAAAA,IAAAA,UAAA,GAAaV,OAAO,CAACQ,GAAR,CAAY,uBAAZ,CAAb;AACAZ,IAAAA,GAAA,GAAMI,OAAO,CAACQ,GAAR,CAAY,UAAZ,CAAN;ACME,WDLFL,MAAM,CAACQ,IAAP,CAAY,gBAAZ,EAA8BD,UAA9B,EAA0Cd,GAA1C,EAA+C,UAACF,CAAD,EAAGkB,CAAH,EAAA;ACM3C,aDLHf,CAAA,CAAE,qBAAF,CAAA,CAAyBgB,KAAzB,CAA+B,MAA/B,CCKG;ADNJ,KAAA,CCKE;ADRsB;AAAzB,CADD;AAOAtB,QAAQ,CAACuB,uBAAT,CAAiCrB,MAAjC,CACC;AAAA,yBAAuB,UAACC,CAAD,EAAGC,CAAH,EAAA;AACtBoB,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;ACSE,WDRFb,MAAM,CAACQ,IAAP,CAAY,oBAAZ,EAAkCd,CAAA,CAAEH,CAAC,CAACI,MAAJ,CAAA,CAAYC,IAAZ,CAAiB,MAAjB,CAAlC,EAA4DF,CAAA,CAAEH,CAAC,CAACI,MAAJ,CAAA,CAAYC,IAAZ,CAAiB,MAAjB,CAA5D,CCQE;ADVH,GAAA;AAGA,4BAA0B,UAACL,CAAD,EAAGC,CAAH,EAAA;AACzBoB,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;ACUE,WDTFb,MAAM,CAACQ,IAAP,CAAY,uBAAZ,EAAqCd,CAAA,CAAEH,CAAC,CAACI,MAAJ,CAAA,CAAYC,IAAZ,CAAiB,MAAjB,CAArC,EAA+DF,CAAA,CAAEH,CAAC,CAACI,MAAJ,CAAA,CAAYC,IAAZ,CAAiB,MAAjB,CAA/D,CCSE;ADXuB;AAH1B,CADD;AAQAR,QAAQ,CAAC0B,WAAT,CAAqBxB,MAArB,CACC;AAAA,yBAAuB,YAAA;ACYpB,WDXFU,MAAM,CAACe,MAAP,CAAc,YAAA;ACYV,aDXHC,MAAM,CAACC,EAAP,CAAA,CAAA,OAAAC,WAAA,KAAA,WAAA,IAAAA,WAAA,KAAA,IAAA,GAAUA,WAAW,CAAEC,cAAvB,GAAuB,KAAA,CAAvB,KAAyC,GAAzC,CCWG;ADZJ,KAAA,CCWE;ADZoB;AAAvB,CADD","file":"packages/wangziguan:admin/lib/client/js/events.coffee.map","sourcesContent":["Template.AdminLayout.events\n\t'click .btn-delete': (e,t) ->\n\t\t_id = $(e.target).attr('doc')\n\t\tif Session.equals 'admin_collection_name', 'Users' \n\t\t\tSession.set 'admin_id', _id\n\t\t\tSession.set 'admin_doc', Meteor.users.findOne(_id)\n\t\telse\n\t\t\tSession.set 'admin_id', parseID(_id)\n\t\t\tSession.set 'admin_doc', adminCollectionObject(Session.get('admin_collection_name')).findOne(parseID(_id))\n\nTemplate.AdminDeleteModal.events\n\t'click #confirm-delete': () ->\n\t\tcollection = Session.get 'admin_collection_name'\n\t\t_id = Session.get 'admin_id'\n\t\tMeteor.call 'adminRemoveDoc', collection, _id, (e,r)->\n\t\t\t$('#admin-delete-modal').modal('hide')\n\nTemplate.AdminDashboardUsersEdit.events\n\t'click .btn-add-role': (e,t) ->\n\t\tconsole.log 'adding user'\n\t\tMeteor.call 'adminAddUserToRole', $(e.target).attr('user'), $(e.target).attr('role')\n\t'click .btn-remove-role': (e,t) ->\n\t\tconsole.log 'removing user'\n\t\tMeteor.call 'adminRemoveUserToRole', $(e.target).attr('user'), $(e.target).attr('role')\n\nTemplate.AdminHeader.events\n\t'click .btn-sign-out': () ->\n\t\tMeteor.logout ->\n\t\t\tRouter.go(AdminConfig?.logoutRedirect or '/')","Template.AdminLayout.events({\n  'click .btn-delete': function(e, t) {\n    var _id;\n    _id = $(e.target).attr('doc');\n    if (Session.equals('admin_collection_name', 'Users')) {\n      Session.set('admin_id', _id);\n      return Session.set('admin_doc', Meteor.users.findOne(_id));\n    } else {\n      Session.set('admin_id', parseID(_id));\n      return Session.set('admin_doc', adminCollectionObject(Session.get('admin_collection_name')).findOne(parseID(_id)));\n    }\n  }\n});\n\nTemplate.AdminDeleteModal.events({\n  'click #confirm-delete': function() {\n    var _id, collection;\n    collection = Session.get('admin_collection_name');\n    _id = Session.get('admin_id');\n    return Meteor.call('adminRemoveDoc', collection, _id, function(e, r) {\n      return $('#admin-delete-modal').modal('hide');\n    });\n  }\n});\n\nTemplate.AdminDashboardUsersEdit.events({\n  'click .btn-add-role': function(e, t) {\n    console.log('adding user');\n    return Meteor.call('adminAddUserToRole', $(e.target).attr('user'), $(e.target).attr('role'));\n  },\n  'click .btn-remove-role': function(e, t) {\n    console.log('removing user');\n    return Meteor.call('adminRemoveUserToRole', $(e.target).attr('user'), $(e.target).attr('role'));\n  }\n});\n\nTemplate.AdminHeader.events({\n  'click .btn-sign-out': function() {\n    return Meteor.logout(function() {\n      return Router.go((typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.logoutRedirect : void 0) || '/');\n    });\n  }\n});\n"]}}