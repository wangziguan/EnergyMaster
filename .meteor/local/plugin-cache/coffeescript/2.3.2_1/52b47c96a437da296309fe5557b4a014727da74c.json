{"metadata":{},"options":{"plugins":[{"key":"base$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"base$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$2","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$7","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"base$0$8","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$9","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/wangziguan/wzg/EnergyMaster/packages/wangziguan:admin/lib/both/router.coffee","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.linux.x86_64"},"sourceFileName":"packages/wangziguan:admin/lib/both/router.coffee","filename":"/home/wangziguan/wzg/EnergyMaster/packages/wangziguan:admin/lib/both/router.coffee","passPerPreset":false,"envName":"development","cwd":"/home/wangziguan/wzg/EnergyMaster","root":"/home/wangziguan/wzg/EnergyMaster","presets":[],"generatorOpts":{"filename":"/home/wangziguan/wzg/EnergyMaster/packages/wangziguan:admin/lib/both/router.coffee","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/wangziguan:admin/lib/both/router.coffee"}},"code":"this.AdminController = RouteController.extend({\n  layoutTemplate: 'AdminLayout',\n  waitOn: function () {\n    return [Meteor.subscribe('adminUsers'), Meteor.subscribe('adminUser'), Meteor.subscribe('adminCollectionsCount')];\n  },\n  onBeforeAction: function () {\n    Session.set('adminSuccess', null);\n    Session.set('adminError', null);\n    Session.set('admin_title', '');\n    Session.set('admin_subtitle', '');\n    Session.set('admin_collection_page', null);\n    Session.set('admin_collection_name', null);\n    Session.set('admin_id', null);\n    Session.set('admin_doc', null);\n\n    if (!Roles.userIsInRole(Meteor.userId(), ['admin'])) {\n      Meteor.call('adminCheckAdmin');\n\n      if (typeof (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.nonAdminRedirectRoute : void 0) === 'string') {\n        Router.go(AdminConfig.nonAdminRedirectRoute);\n      }\n    }\n\n    return this.next();\n  }\n});\nRouter.route(\"adminDashboard\", {\n  path: \"/admin\",\n  template: \"AdminDashboard\",\n  controller: \"AdminController\",\n  action: function () {\n    return this.render();\n  },\n  onAfterAction: function () {\n    Session.set('admin_title', '总览');\n    Session.set('admin_collection_name', '');\n    return Session.set('admin_collection_page', '');\n  }\n});\nRouter.route(\"adminDashboardUsersView\", {\n  path: \"/admin/Users\",\n  template: \"AdminDashboardView\",\n  controller: \"AdminController\",\n  action: function () {\n    return this.render();\n  },\n  data: function () {\n    return {\n      admin_table: AdminTables.Users\n    };\n  },\n  onAfterAction: function () {\n    Session.set('admin_title', '账号管理');\n    Session.set('admin_subtitle', '');\n    return Session.set('admin_collection_name', 'Users');\n  }\n});\nRouter.route(\"adminDashboardUsersNew\", {\n  path: \"/admin/Users/new\",\n  template: \"AdminDashboardUsersNew\",\n  controller: 'AdminController',\n  action: function () {\n    return this.render();\n  },\n  onAfterAction: function () {\n    Session.set('admin_title', '账号管理');\n    Session.set('admin_subtitle', '创建新用户');\n    Session.set('admin_collection_page', '');\n    return Session.set('admin_collection_name', 'Users');\n  }\n});\nRouter.route(\"adminDashboardUsersEdit\", {\n  path: \"/admin/Users/:_id/edit\",\n  template: \"AdminDashboardUsersEdit\",\n  controller: \"AdminController\",\n  data: function () {\n    return {\n      user: Meteor.users.find(this.params._id).fetch(),\n      roles: Roles.getRolesForUser(this.params._id),\n      otherRoles: _.difference(_.map(Meteor.roles.find().fetch(), function (role) {\n        return role.name;\n      }), Roles.getRolesForUser(this.params._id))\n    };\n  },\n  action: function () {\n    return this.render();\n  },\n  onAfterAction: function () {\n    Session.set('admin_title', '账号管理');\n    Session.set('admin_subtitle', '编辑用户 ' + this.params._id);\n    Session.set('admin_collection_page', '');\n    Session.set('admin_collection_name', 'Users');\n    Session.set('admin_id', this.params._id);\n    return Session.set('admin_doc', Meteor.users.findOne({\n      _id: this.params._id\n    }));\n  }\n});","map":{"version":3,"sources":["packages/wangziguan:admin/lib/both/router.coffee"],"names":["AdminController","RouteController","extend","layoutTemplate","waitOn","Meteor","subscribe","onBeforeAction","Session","set","Roles","userIsInRole","userId","call","AdminConfig","nonAdminRedirectRoute","Router","go","next","route","path","template","controller","action","render","onAfterAction","data","admin_table","AdminTables","Users","user","users","find","params","_id","fetch","roles","getRolesForUser","otherRoles","_","difference","map","role","name","findOne"],"mappings":"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","sourcesContent":["this.AdminController = RouteController.extend({\n  layoutTemplate: 'AdminLayout',\n  waitOn: function() {\n    return [Meteor.subscribe('adminUsers'), Meteor.subscribe('adminUser'), Meteor.subscribe('adminCollectionsCount')];\n  },\n  onBeforeAction: function() {\n    Session.set('adminSuccess', null);\n    Session.set('adminError', null);\n    Session.set('admin_title', '');\n    Session.set('admin_subtitle', '');\n    Session.set('admin_collection_page', null);\n    Session.set('admin_collection_name', null);\n    Session.set('admin_id', null);\n    Session.set('admin_doc', null);\n    if (!Roles.userIsInRole(Meteor.userId(), ['admin'])) {\n      Meteor.call('adminCheckAdmin');\n      if (typeof (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.nonAdminRedirectRoute : void 0) === 'string') {\n        Router.go(AdminConfig.nonAdminRedirectRoute);\n      }\n    }\n    return this.next();\n  }\n});\n\nRouter.route(\"adminDashboard\", {\n  path: \"/admin\",\n  template: \"AdminDashboard\",\n  controller: \"AdminController\",\n  action: function() {\n    return this.render();\n  },\n  onAfterAction: function() {\n    Session.set('admin_title', '总览');\n    Session.set('admin_collection_name', '');\n    return Session.set('admin_collection_page', '');\n  }\n});\n\nRouter.route(\"adminDashboardUsersView\", {\n  path: \"/admin/Users\",\n  template: \"AdminDashboardView\",\n  controller: \"AdminController\",\n  action: function() {\n    return this.render();\n  },\n  data: function() {\n    return {\n      admin_table: AdminTables.Users\n    };\n  },\n  onAfterAction: function() {\n    Session.set('admin_title', '账号管理');\n    Session.set('admin_subtitle', '');\n    return Session.set('admin_collection_name', 'Users');\n  }\n});\n\nRouter.route(\"adminDashboardUsersNew\", {\n  path: \"/admin/Users/new\",\n  template: \"AdminDashboardUsersNew\",\n  controller: 'AdminController',\n  action: function() {\n    return this.render();\n  },\n  onAfterAction: function() {\n    Session.set('admin_title', '账号管理');\n    Session.set('admin_subtitle', '创建新用户');\n    Session.set('admin_collection_page', '');\n    return Session.set('admin_collection_name', 'Users');\n  }\n});\n\nRouter.route(\"adminDashboardUsersEdit\", {\n  path: \"/admin/Users/:_id/edit\",\n  template: \"AdminDashboardUsersEdit\",\n  controller: \"AdminController\",\n  data: function() {\n    return {\n      user: Meteor.users.find(this.params._id).fetch(),\n      roles: Roles.getRolesForUser(this.params._id),\n      otherRoles: _.difference(_.map(Meteor.roles.find().fetch(), function(role) {\n        return role.name;\n      }), Roles.getRolesForUser(this.params._id))\n    };\n  },\n  action: function() {\n    return this.render();\n  },\n  onAfterAction: function() {\n    Session.set('admin_title', '账号管理');\n    Session.set('admin_subtitle', '编辑用户 ' + this.params._id);\n    Session.set('admin_collection_page', '');\n    Session.set('admin_collection_name', 'Users');\n    Session.set('admin_id', this.params._id);\n    return Session.set('admin_doc', Meteor.users.findOne({\n      _id: this.params._id\n    }));\n  }\n});\n"]},"sourceType":"script","hash":"52b47c96a437da296309fe5557b4a014727da74c"}
