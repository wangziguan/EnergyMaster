{"metadata":{},"options":{"plugins":[{"key":"base$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"base$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$2","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"base$0$4","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$8","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"base$0$9","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$10","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/wangziguan/wzg/EnergyMaster/packages/aldeed:tabular/common/Tabular.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.linux.x86_64"},"sourceFileName":"packages/aldeed:tabular/common/Tabular.js","filename":"/home/wangziguan/wzg/EnergyMaster/packages/aldeed:tabular/common/Tabular.js","passPerPreset":false,"envName":"development","cwd":"/home/wangziguan/wzg/EnergyMaster","root":"/home/wangziguan/wzg/EnergyMaster","presets":[],"generatorOpts":{"filename":"/home/wangziguan/wzg/EnergyMaster/packages/aldeed:tabular/common/Tabular.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/aldeed:tabular/common/Tabular.js"}},"code":"let Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 1);\nconst Tabular = {};\nTabular.tablesByName = {};\nTabular.Table = class {\n  constructor(options) {\n    if (!options) throw new Error('Tabular.Table options argument is required');\n    if (!options.name) throw new Error('Tabular.Table options must specify name');\n    if (!options.columns) throw new Error('Tabular.Table options must specify columns');\n\n    if (!(options.collection instanceof Mongo.Collection || options.collection instanceof Mongo.constructor // Fix: error if `collection: Meteor.users`\n    )) {\n      throw new Error('Tabular.Table options must specify collection');\n    }\n\n    this.name = options.name;\n    this.collection = options.collection;\n    this.pub = options.pub || 'tabular_genericPub'; // By default we use core `Meteor.subscribe`, but you can pass\n    // a subscription manager like `sub: new SubsManager({cacheLimit: 20, expireIn: 3})`\n\n    this.sub = options.sub || Meteor;\n    this.onUnload = options.onUnload;\n    this.allow = options.allow;\n    this.allowFields = options.allowFields;\n    this.changeSelector = options.changeSelector;\n    this.throttleRefresh = options.throttleRefresh;\n    this.alternativeCount = options.alternativeCount;\n    this.skipCount = options.skipCount;\n\n    if (_.isArray(options.extraFields)) {\n      const fields = {};\n\n      _.each(options.extraFields, fieldName => {\n        fields[fieldName] = 1;\n      });\n\n      this.extraFields = fields;\n    }\n\n    this.selector = options.selector;\n    this.options = _.omit(options, 'collection', 'pub', 'sub', 'onUnload', 'allow', 'allowFields', 'changeSelector', 'throttleRefresh', 'extraFields', 'alternativeCount', 'skipCount', 'name', 'selector');\n    Tabular.tablesByName[this.name] = this;\n  }\n\n};\nmodule.exportDefault(Tabular);","map":{"version":3,"sources":["packages/aldeed:tabular/common/Tabular.js"],"names":["Meteor","module","link","v","Mongo","Tabular","tablesByName","Table","constructor","options","Error","name","columns","collection","Collection","pub","sub","onUnload","allow","allowFields","changeSelector","throttleRefresh","alternativeCount","skipCount","_","isArray","extraFields","fields","each","fieldName","selector","omit","exportDefault"],"mappings":"AAAA,IAAIA,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,EAAAA,MAAM,CAACG,CAAD,EAAG;AAACH,IAAAA,MAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIC,KAAJ;AAAUH,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACE,EAAAA,KAAK,CAACD,CAAD,EAAG;AAACC,IAAAA,KAAK,GAACD,CAAN;AAAQ;;AAAlB,CAA3B,EAA+C,CAA/C;AAG1E,MAAME,OAAO,GAAG,EAAhB;AAEAA,OAAO,CAACC,YAAR,GAAuB,EAAvB;AAEAD,OAAO,CAACE,KAAR,GAAgB,MAAM;AACpBC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACnB,QAAI,CAACA,OAAL,EAAc,MAAM,IAAIC,KAAJ,CAAU,4CAAV,CAAN;AACd,QAAI,CAACD,OAAO,CAACE,IAAb,EAAmB,MAAM,IAAID,KAAJ,CAAU,yCAAV,CAAN;AACnB,QAAI,CAACD,OAAO,CAACG,OAAb,EAAsB,MAAM,IAAIF,KAAJ,CAAU,4CAAV,CAAN;;AACtB,QAAI,EAAED,OAAO,CAACI,UAAR,YAA8BT,KAAK,CAACU,UAApC,IACDL,OAAO,CAACI,UAAR,YAA8BT,KAAK,CAACI,WADrC,CACiD;AADjD,KAAJ,EAEG;AACD,YAAM,IAAIE,KAAJ,CAAU,+CAAV,CAAN;AACD;;AAED,SAAKC,IAAL,GAAYF,OAAO,CAACE,IAApB;AACA,SAAKE,UAAL,GAAkBJ,OAAO,CAACI,UAA1B;AAEA,SAAKE,GAAL,GAAWN,OAAO,CAACM,GAAR,IAAe,oBAA1B,CAbmB,CAenB;AACA;;AACA,SAAKC,GAAL,GAAWP,OAAO,CAACO,GAAR,IAAehB,MAA1B;AAEA,SAAKiB,QAAL,GAAgBR,OAAO,CAACQ,QAAxB;AACA,SAAKC,KAAL,GAAaT,OAAO,CAACS,KAArB;AACA,SAAKC,WAAL,GAAmBV,OAAO,CAACU,WAA3B;AACA,SAAKC,cAAL,GAAsBX,OAAO,CAACW,cAA9B;AACA,SAAKC,eAAL,GAAuBZ,OAAO,CAACY,eAA/B;AACA,SAAKC,gBAAL,GAAwBb,OAAO,CAACa,gBAAhC;AACA,SAAKC,SAAL,GAAiBd,OAAO,CAACc,SAAzB;;AAEA,QAAIC,CAAC,CAACC,OAAF,CAAUhB,OAAO,CAACiB,WAAlB,CAAJ,EAAoC;AAClC,YAAMC,MAAM,GAAG,EAAf;;AACAH,MAAAA,CAAC,CAACI,IAAF,CAAOnB,OAAO,CAACiB,WAAf,EAA4BG,SAAS,IAAI;AACvCF,QAAAA,MAAM,CAACE,SAAD,CAAN,GAAoB,CAApB;AACD,OAFD;;AAGA,WAAKH,WAAL,GAAmBC,MAAnB;AACD;;AAED,SAAKG,QAAL,GAAgBrB,OAAO,CAACqB,QAAxB;AAEA,SAAKrB,OAAL,GAAee,CAAC,CAACO,IAAF,CACbtB,OADa,EAEb,YAFa,EAGb,KAHa,EAIb,KAJa,EAKb,UALa,EAMb,OANa,EAOb,aAPa,EAQb,gBARa,EASb,iBATa,EAUb,aAVa,EAWb,kBAXa,EAYb,WAZa,EAab,MAba,EAcb,UAda,CAAf;AAiBAJ,IAAAA,OAAO,CAACC,YAAR,CAAqB,KAAKK,IAA1B,IAAkC,IAAlC;AACD;;AAxDmB,CAAtB;AAPAV,MAAM,CAAC+B,aAAP,CAkEe3B,OAlEf","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\n\nconst Tabular = {};\n\nTabular.tablesByName = {};\n\nTabular.Table = class {\n  constructor(options) {\n    if (!options) throw new Error('Tabular.Table options argument is required');\n    if (!options.name) throw new Error('Tabular.Table options must specify name');\n    if (!options.columns) throw new Error('Tabular.Table options must specify columns');\n    if (!(options.collection instanceof Mongo.Collection\n      || options.collection instanceof Mongo.constructor // Fix: error if `collection: Meteor.users`\n    )) {\n      throw new Error('Tabular.Table options must specify collection');\n    }\n\n    this.name = options.name;\n    this.collection = options.collection;\n\n    this.pub = options.pub || 'tabular_genericPub';\n\n    // By default we use core `Meteor.subscribe`, but you can pass\n    // a subscription manager like `sub: new SubsManager({cacheLimit: 20, expireIn: 3})`\n    this.sub = options.sub || Meteor;\n\n    this.onUnload = options.onUnload;\n    this.allow = options.allow;\n    this.allowFields = options.allowFields;\n    this.changeSelector = options.changeSelector;\n    this.throttleRefresh = options.throttleRefresh;\n    this.alternativeCount = options.alternativeCount;\n    this.skipCount = options.skipCount;\n\n    if (_.isArray(options.extraFields)) {\n      const fields = {};\n      _.each(options.extraFields, fieldName => {\n        fields[fieldName] = 1;\n      });\n      this.extraFields = fields;\n    }\n\n    this.selector = options.selector;\n\n    this.options = _.omit(\n      options,\n      'collection',\n      'pub',\n      'sub',\n      'onUnload',\n      'allow',\n      'allowFields',\n      'changeSelector',\n      'throttleRefresh',\n      'extraFields',\n      'alternativeCount',\n      'skipCount',\n      'name',\n      'selector'\n    );\n\n    Tabular.tablesByName[this.name] = this;\n  }\n}\n\nexport default Tabular;\n"]},"sourceType":"script","hash":"aa2edaab581253f53974f27291a22f3897b19ab0"}
