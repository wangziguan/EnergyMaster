{"metadata":{},"options":{"plugins":[{"key":"base$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"base$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$2","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"base$0$4","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$8","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"base$0$9","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$10","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/wangziguan/wzg/EnergyMaster/imports/ui/layouts/login/login.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.linux.x86_64"},"sourceFileName":"imports/ui/layouts/login/login.js","filename":"/home/wangziguan/wzg/EnergyMaster/imports/ui/layouts/login/login.js","passPerPreset":false,"envName":"development","cwd":"/home/wangziguan/wzg/EnergyMaster","root":"/home/wangziguan/wzg/EnergyMaster","presets":[],"generatorOpts":{"filename":"/home/wangziguan/wzg/EnergyMaster/imports/ui/layouts/login/login.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/layouts/login/login.js"}},"code":"let Template;\nmodule.link(\"meteor/templating\", {\n  Template(v) {\n    Template = v;\n  }\n\n}, 0);\nlet backstretch;\nmodule.link(\"meteor/goltfisch:jquery-backstretch\", {\n  backstretch(v) {\n    backstretch = v;\n  }\n\n}, 1);\nlet Mousetrap;\nmodule.link(\"meteor/mousetrap:mousetrap\", {\n  Mousetrap(v) {\n    Mousetrap = v;\n  }\n\n}, 2);\nlet Router;\nmodule.link(\"meteor/iron:router\", {\n  Router(v) {\n    Router = v;\n  }\n\n}, 3);\nmodule.link(\"./login.html\");\nmodule.link(\"./login.scss\");\nTemplate.login.onRendered(function () {\n  $.backstretch([\"/bg/1.jpg\", \"/bg/2.jpg\", \"/bg/3.jpg\", \"/bg/4.jpg\"], {\n    fade: 1000,\n    duration: 8000\n  });\n  $(\"body\").addClass(\"loginClient\"); // 绑定enter键\n\n  Mousetrap.bind('enter', function () {\n    login();\n  }); // input框选中时按下enter键\n\n  var txt = $(\"input\");\n  txt.keyup(function (e) {\n    if (e.keyCode == 13) login();\n  });\n}); // 点击登录按钮\n\nTemplate.login.events({\n  'click #login-js': function () {\n    login();\n  }\n});\n\nvar login = function () {\n  var username = $('[id=username_content]').val().trim();\n  var password = $('[id=pwd_content]').val().trim();\n  Meteor.loginWithPassword(username, password, function (error) {\n    var user = {};\n    user.username = username;\n\n    if (error) {\n      //insertTransactionRecord(user, \"loginClient\", \"login\", {message: \"login failed\"});\n      alert(\"用户名或密码错误！\");\n      console.log(error);\n    } else {\n      user.uid = Meteor.userId(); //insertTransactionRecord(user, \"loginClient\", \"login\", {message: \"login success\"});\n\n      Session.set(\"loginUserName\", username);\n\n      if (Roles.userIsInRole(Meteor.userId(), [\"admin\"], \"user-group\")) {\n        console.log('login success!');\n        Router.go(\"/admin\");\n      }\n    }\n  });\n};\n\nTemplate.login.onDestroyed(function () {\n  $(\"body\").removeClass(\"loginClient\");\n  $(\".backstretch\").remove();\n  Mousetrap.unbind('enter');\n});","map":{"version":3,"sources":["imports/ui/layouts/login/login.js"],"names":["Template","module","link","v","backstretch","Mousetrap","Router","login","onRendered","$","fade","duration","addClass","bind","txt","keyup","e","keyCode","events","username","val","trim","password","Meteor","loginWithPassword","error","user","alert","console","log","uid","userId","Session","set","Roles","userIsInRole","go","onDestroyed","removeClass","remove","unbind"],"mappings":"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","sourcesContent":["import { Template } from 'meteor/templating';\nimport { backstretch } from 'meteor/goltfisch:jquery-backstretch';\nimport { Mousetrap } from 'meteor/mousetrap:mousetrap';\nimport { Router} from 'meteor/iron:router';\n\nimport './login.html';\nimport './login.scss';\n\nTemplate.login.onRendered(function () {\n    $.backstretch([\n        \"/bg/1.jpg\",\"/bg/2.jpg\",\"/bg/3.jpg\",\"/bg/4.jpg\"\n        ], {\n        fade: 1000,duration: 8000\n    });\n\n    $(\"body\").addClass(\"loginClient\");\n    // 绑定enter键\n    Mousetrap.bind('enter', function () {\n        login();\n    });\n    // input框选中时按下enter键\n    var txt = $(\"input\");\n    txt.keyup(function (e) {\n        if (e.keyCode == 13)\n            login();\n    });\n});\n\n// 点击登录按钮\nTemplate.login.events({\n    'click #login-js': function () {\n        login();\n    }\n});\n\nvar login = function () {\n    var username = $('[id=username_content]').val().trim();\n    var password = $('[id=pwd_content]').val().trim();\n\n    Meteor.loginWithPassword(username, password, function (error) {\n        var user = {};\n        user.username = username;\n        if (error) {\n            //insertTransactionRecord(user, \"loginClient\", \"login\", {message: \"login failed\"});\n            alert(\"用户名或密码错误！\");\n            console.log(error)\n        } else {\n            user.uid = Meteor.userId();\n            //insertTransactionRecord(user, \"loginClient\", \"login\", {message: \"login success\"});\n            Session.set(\"loginUserName\", username);\n\n            if (Roles.userIsInRole(Meteor.userId(), [\"admin\"], \"user-group\")) {\n                console.log('login success!');\n                Router.go(\"/admin\");\n            }\n        }\n    });\n};\n\nTemplate.login.onDestroyed(function () {\n    $(\"body\").removeClass(\"loginClient\");\n    $(\".backstretch\").remove();\n    Mousetrap.unbind('enter');\n});"]},"sourceType":"script","hash":"9f75f28d253e109c4350a0a2ccba8a14135d6416"}
