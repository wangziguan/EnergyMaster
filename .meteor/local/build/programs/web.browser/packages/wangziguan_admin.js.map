{"version":3,"sources":["meteor://💻app/packages/wangziguan_admin/lib/both/AdminDashboard.coffee","meteor://💻app/lib/both/AdminDashboard.coffee","meteor://💻app/packages/wangziguan_admin/lib/both/router.coffee","meteor://💻app/lib/both/router.coffee","meteor://💻app/packages/wangziguan_admin/lib/both/utils.coffee","meteor://💻app/lib/both/utils.coffee","meteor://💻app/packages/wangziguan_admin/lib/both/startup.coffee","meteor://💻app/lib/both/startup.coffee","meteor://💻app/packages/wangziguan_admin/lib/both/collections.coffee","meteor://💻app/packages/wangziguan:admin/lib/client/js/admin_layout.js","meteor://💻app/packages/wangziguan_admin/lib/client/js/helpers.coffee","meteor://💻app/lib/client/js/helpers.coffee","meteor://💻app/packages/wangziguan_admin/lib/client/js/templates.coffee","meteor://💻app/lib/client/js/templates.coffee","meteor://💻app/packages/wangziguan_admin/lib/client/js/events.coffee","meteor://💻app/lib/client/js/events.coffee","meteor://💻app/packages/wangziguan:admin/lib/client/js/slim_scroll.js","meteor://💻app/packages/wangziguan_admin/lib/client/js/autoForm.coffee","meteor://💻app/lib/client/js/autoForm.coffee"],"names":["SimpleSchema","module","link","default","v","AdminDashboard","schemas","sidebarItems","collectionItems","alertSuccess","message","Session","set","alertFailure","checkAdmin","Roles","userIsInRole","Meteor","userId","call","AdminConfig","nonAdminRedirectRoute","Router","go","next","adminRoutes","collectionLabel","collection","ref","collections","label","get","addSidebarItem","title","url","options","item","_","isObject","push","extendSidebarItem","urls","existing","find","union","addCollectionItem","fn","path","s","length","newUser","email","type","String","password","sendPassword","Boolean","optional","sendResetPasswordEmail","_id","changePassword","AdminController","RouteController","extend","layoutTemplate","waitOn","subscribe","onBeforeAction","route","template","controller","action","render","onAfterAction","data","admin_table","AdminTables","Users","user","users","params","fetch","roles","getRolesForUser","otherRoles","difference","map","role","name","findOne","adminCollectionObject","collectionObject","lookup","adminCallback","args","callback","ref1","stop","callbacks","obj","root","required","arr","isServer","global","window","split","shift","Error","toString","parseID","id","indexOf","Mongo","ObjectID","slice","lastIndexOf","parseIDs","ids","adminCreateRouteEdit","adminCreateRouteEditOptions","adminCreateRouteNew","adminCreateRouteNewOptions","adminCreateRouteView","adminCreateRouteViewOptions","adminCreateRoutes","adminCreateTables","adminDelButton","adminEditButton","adminEditDelButtons","adminPublishTables","adminTablePubName","adminTablesDom","defaultColumns","createdCell","node","cellData","rowData","$","html","Blaze","toHTMLWithData","Template","adminEditBtn","width","orderable","adminDeleteBtn","each","columns","defaults","showEditColumn","showDelColumn","showInSideBar","tableColumns","column","renderWithData","value","doc","Tabular","Table","pub","children","sub","extraFields","dom","selector","collectionName","routes","view","new","admin_collection","edit","publishComposite","tableName","fields","check","Array","Match","Optional","Object","reduce","unblock","$in","startup","changeSelector","$or","exp","emails","$elemMatch","address","adminUsersIsAdmin","searchable","adminUsersMailBtn","AdminCollectionsCount","Collection","AdminLayout","created","self","minHeight","ReactiveVar","height","resize","addClass","destroyed","removeClass","helpers","instance","login","dataTableOptions","adminCollections","registerHelper","icon","key","color","viewPath","newPath","UI","skin","items","autoForm","omitFields","equals","dashboard","schema","has","userSchema","_c2","simpleSchema","count","mode","toLowerCase","templates","widgets","services","facebook","google","AdminDashboardViewWrapper","rendered","firstNode","autorun","currentData","remove","firstChild","removeChild","AdminDashboardView","filter","table","DataTable","on","search","draw","page","len","parseInt","hasDocuments","events","e","t","target","attr","AdminDeleteModal","r","modal","AdminDashboardUsersEdit","console","log","AdminHeader","logout","logoutRedirect","f","jQuery","slimScroll","h","a","size","position","distance","start","opacity","alwaysVisible","disableFadeOut","railVisible","railColor","railOpacity","railDraggable","railClass","barClass","wrapperClass","allowPageScroll","wheelStep","touchScrollStep","borderRadius","railBorderRadius","d","event","c","wheelDelta","detail","srcTarget","srcElement","closest","is","b","parent","m","preventDefault","k","returnValue","g","outerHeight","css","Math","min","max","ceil","floor","top","l","scrollHeight","scrollTop","trigger","p","C","addEventListener","document","attachEvent","w","u","D","display","clearTimeout","A","B","fadeIn","setTimeout","x","y","fadeOut","z","hasClass","n","isPlainObject","q","scrollTo","scrollBy","unwrap","overflow","background","zIndex","BorderRadius","MozBorderRadius","WebkitBorderRadius","right","left","wrap","append","bind","parseFloat","pageY","currTop","unbind","stopPropagation","hover","originalEvent","touches","hide","slimscroll","AutoForm","addHooks","beginSubmit","endSubmit","onError","formType","error","hooks","admin_insert","onSubmit","insertDoc","updateDoc","currentDoc","hook","done","onSuccess","admin_update","adminNewUser","result","adminUpdateUser","adminSendResetPasswordEmail","adminChangePassword","operation"],"mappings":"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","file":"/packages/wangziguan_admin.js","sourcesContent":["import SimpleSchema from 'simpl-schema';\n\nAdminDashboard =\n\tschemas: {}\n\tsidebarItems: []\n\tcollectionItems: []\n\talertSuccess: (message)->\n\t\tSession.set 'adminSuccess', message\n\talertFailure: (message)->\n\t\tSession.set 'adminError', message\n\n\tcheckAdmin: ->\n\t\tif not Roles.userIsInRole Meteor.userId(), ['admin']\n\t\t\tMeteor.call 'adminCheckAdmin'\n\t\t\tif (typeof AdminConfig?.nonAdminRedirectRoute == \"string\")\n\t\t\t\tRouter.go AdminConfig.nonAdminRedirectRoute\n\t\tif typeof @.next == 'function'\n\t\t\t@next()\n\tadminRoutes: ['adminDashboard','adminDashboardUsersNew','adminDashboardUsersEdit','adminDashboardView','adminDashboardNew','adminDashboardEdit']\n\tcollectionLabel: (collection)->\n\t\tif collection == 'Users'\n\t\t\t'Users'\n\t\telse if collection? and typeof AdminConfig.collections[collection]?.label == 'string'\n\t\t\tAdminConfig.collections[collection].label\n\t\telse Session.get 'admin_collection_name'\n\n\taddSidebarItem: (title, url, options) ->\n\t\titem = title: title\n\t\tif _.isObject(url) and typeof options == 'undefined'\n\t\t\titem.options = url\n\t\telse\n\t\t\titem.url = url\n\t\t\titem.options = options\n\n\t\t@sidebarItems.push item\n\n\textendSidebarItem: (title, urls) ->\n\t\tif _.isObject(urls) then urls = [urls]\n\n\t\texisting = _.find @sidebarItems, (item) -> item.title == title\n\t\tif existing\n\t\t\texisting.options.urls = _.union existing.options.urls, urls\n\n\taddCollectionItem: (fn) ->\n\t\t@collectionItems.push fn\n\n\tpath: (s) ->\n\t\tpath = '/admin'\n\t\tif typeof s == 'string' and s.length > 0\n\t\t\tpath += (if s[0] == '/' then '' else '/') + s\n\t\tpath\n\n\nAdminDashboard.schemas.newUser = new SimpleSchema\n\temail: \n\t\ttype: String\n\t\tlabel: \"Email address\"\n\tpassword:\n\t\ttype: String\n\t\tlabel: 'Password'\n\tsendPassword:\n\t\ttype: Boolean\n\t\tlabel: 'Send this user their password by email'\n\t\toptional: true\n\nAdminDashboard.schemas.sendResetPasswordEmail = new SimpleSchema\n\t_id:\n\t\ttype: String\n\nAdminDashboard.schemas.changePassword = new SimpleSchema\n\t_id:\n\t\ttype: String\n\tpassword:\n\t\ttype: String\n","                   \n\nimport SimpleSchema from 'simpl-schema';\n\nAdminDashboard = {\n  schemas: {},\n  sidebarItems: [],\n  collectionItems: [],\n  alertSuccess: function(message) {\n    return Session.set('adminSuccess', message);\n  },\n  alertFailure: function(message) {\n    return Session.set('adminError', message);\n  },\n  checkAdmin: function() {\n    if (!Roles.userIsInRole(Meteor.userId(), ['admin'])) {\n      Meteor.call('adminCheckAdmin');\n      if (typeof (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.nonAdminRedirectRoute : void 0) === \"string\") {\n        Router.go(AdminConfig.nonAdminRedirectRoute);\n      }\n    }\n    if (typeof this.next === 'function') {\n      return this.next();\n    }\n  },\n  adminRoutes: ['adminDashboard', 'adminDashboardUsersNew', 'adminDashboardUsersEdit', 'adminDashboardView', 'adminDashboardNew', 'adminDashboardEdit'],\n  collectionLabel: function(collection) {\n    var ref;\n    if (collection === 'Users') {\n      return 'Users';\n    } else if ((collection != null) && typeof ((ref = AdminConfig.collections[collection]) != null ? ref.label : void 0) === 'string') {\n      return AdminConfig.collections[collection].label;\n    } else {\n      return Session.get('admin_collection_name');\n    }\n  },\n  addSidebarItem: function(title, url, options) {\n    var item;\n    item = {\n      title: title\n    };\n    if (_.isObject(url) && typeof options === 'undefined') {\n      item.options = url;\n    } else {\n      item.url = url;\n      item.options = options;\n    }\n    return this.sidebarItems.push(item);\n  },\n  extendSidebarItem: function(title, urls) {\n    var existing;\n    if (_.isObject(urls)) {\n      urls = [urls];\n    }\n    existing = _.find(this.sidebarItems, function(item) {\n      return item.title === title;\n    });\n    if (existing) {\n      return existing.options.urls = _.union(existing.options.urls, urls);\n    }\n  },\n  addCollectionItem: function(fn) {\n    return this.collectionItems.push(fn);\n  },\n  path: function(s) {\n    var path;\n    path = '/admin';\n    if (typeof s === 'string' && s.length > 0) {\n      path += (s[0] === '/' ? '' : '/') + s;\n    }\n    return path;\n  }\n};\n\nAdminDashboard.schemas.newUser = new SimpleSchema({\n  email: {\n    type: String,\n    label: \"Email address\"\n  },\n  password: {\n    type: String,\n    label: 'Password'\n  },\n  sendPassword: {\n    type: Boolean,\n    label: 'Send this user their password by email',\n    optional: true\n  }\n});\n\nAdminDashboard.schemas.sendResetPasswordEmail = new SimpleSchema({\n  _id: {\n    type: String\n  }\n});\n\nAdminDashboard.schemas.changePassword = new SimpleSchema({\n  _id: {\n    type: String\n  },\n  password: {\n    type: String\n  }\n});\n","@AdminController = RouteController.extend\n\tlayoutTemplate: 'AdminLayout'\n\twaitOn: ->\n\t\t[\n\t\t\tMeteor.subscribe 'adminUsers'\n\t\t\tMeteor.subscribe 'adminUser'\n\t\t\tMeteor.subscribe 'adminCollectionsCount'\n\t\t]\n\tonBeforeAction: ->\n\t\tSession.set 'adminSuccess', null\n\t\tSession.set 'adminError', null\n\n\t\tSession.set 'admin_title', ''\n\t\tSession.set 'admin_subtitle', ''\n\t\tSession.set 'admin_collection_page', null\n\t\tSession.set 'admin_collection_name', null\n\t\tSession.set 'admin_id', null\n\t\tSession.set 'admin_doc', null\n\n\t\tif not Roles.userIsInRole Meteor.userId(), ['admin']\n\t\t\tMeteor.call 'adminCheckAdmin'\n\t\t\tif typeof AdminConfig?.nonAdminRedirectRoute == 'string'\n\t\t\t\tRouter.go AdminConfig.nonAdminRedirectRoute\n\n\t\t@next()\n\n\nRouter.route \"adminDashboard\",\n\tpath: \"/admin\"\n\ttemplate: \"AdminDashboard\"\n\tcontroller: \"AdminController\"\n\taction: ->\n\t\t@render()\n\tonAfterAction: ->\n\t\tSession.set 'admin_title', '总览'\n\t\tSession.set 'admin_collection_name', ''\n\t\tSession.set 'admin_collection_page', ''\n\nRouter.route \"adminDashboardUsersView\",\n\tpath: \"/admin/Users\"\n\ttemplate: \"AdminDashboardView\"\n\tcontroller: \"AdminController\"\n\taction: ->\n\t\t@render()\n\tdata: ->\n\t\tadmin_table: AdminTables.Users\n\tonAfterAction: ->\n\t\tSession.set 'admin_title', '账号管理'\n\t\tSession.set 'admin_subtitle', ''\n\t\tSession.set 'admin_collection_name', 'Users'\n\nRouter.route \"adminDashboardUsersNew\",\n\tpath: \"/admin/Users/new\"\n\ttemplate: \"AdminDashboardUsersNew\"\n\tcontroller: 'AdminController'\n\taction: ->\n\t\t@render()\n\tonAfterAction: ->\n\t\tSession.set 'admin_title', '账号管理'\n\t\tSession.set 'admin_subtitle', '创建新用户'\n\t\tSession.set 'admin_collection_page', ''\n\t\tSession.set 'admin_collection_name', 'Users'\n\nRouter.route \"adminDashboardUsersEdit\",\n\tpath: \"/admin/Users/:_id/edit\"\n\ttemplate: \"AdminDashboardUsersEdit\"\n\tcontroller: \"AdminController\"\n\tdata: ->\n\t\tuser: Meteor.users.find(@params._id).fetch()\n\t\troles: Roles.getRolesForUser @params._id\n\t\totherRoles: _.difference _.map(Meteor.roles.find().fetch(), (role) -> role.name), Roles.getRolesForUser(@params._id)\n\taction: ->\n\t\t@render()\n\tonAfterAction: ->\n\t\tSession.set 'admin_title', '账号管理'\n\t\tSession.set 'admin_subtitle', '编辑用户 ' + @params._id\n\t\tSession.set 'admin_collection_page', ''\n\t\tSession.set 'admin_collection_name', 'Users'\n\t\tSession.set 'admin_id', @params._id\n\t\tSession.set 'admin_doc', Meteor.users.findOne({_id:@params._id})\n","this.AdminController = RouteController.extend({\n  layoutTemplate: 'AdminLayout',\n  waitOn: function() {\n    return [Meteor.subscribe('adminUsers'), Meteor.subscribe('adminUser'), Meteor.subscribe('adminCollectionsCount')];\n  },\n  onBeforeAction: function() {\n    Session.set('adminSuccess', null);\n    Session.set('adminError', null);\n    Session.set('admin_title', '');\n    Session.set('admin_subtitle', '');\n    Session.set('admin_collection_page', null);\n    Session.set('admin_collection_name', null);\n    Session.set('admin_id', null);\n    Session.set('admin_doc', null);\n    if (!Roles.userIsInRole(Meteor.userId(), ['admin'])) {\n      Meteor.call('adminCheckAdmin');\n      if (typeof (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.nonAdminRedirectRoute : void 0) === 'string') {\n        Router.go(AdminConfig.nonAdminRedirectRoute);\n      }\n    }\n    return this.next();\n  }\n});\n\nRouter.route(\"adminDashboard\", {\n  path: \"/admin\",\n  template: \"AdminDashboard\",\n  controller: \"AdminController\",\n  action: function() {\n    return this.render();\n  },\n  onAfterAction: function() {\n    Session.set('admin_title', '总览');\n    Session.set('admin_collection_name', '');\n    return Session.set('admin_collection_page', '');\n  }\n});\n\nRouter.route(\"adminDashboardUsersView\", {\n  path: \"/admin/Users\",\n  template: \"AdminDashboardView\",\n  controller: \"AdminController\",\n  action: function() {\n    return this.render();\n  },\n  data: function() {\n    return {\n      admin_table: AdminTables.Users\n    };\n  },\n  onAfterAction: function() {\n    Session.set('admin_title', '账号管理');\n    Session.set('admin_subtitle', '');\n    return Session.set('admin_collection_name', 'Users');\n  }\n});\n\nRouter.route(\"adminDashboardUsersNew\", {\n  path: \"/admin/Users/new\",\n  template: \"AdminDashboardUsersNew\",\n  controller: 'AdminController',\n  action: function() {\n    return this.render();\n  },\n  onAfterAction: function() {\n    Session.set('admin_title', '账号管理');\n    Session.set('admin_subtitle', '创建新用户');\n    Session.set('admin_collection_page', '');\n    return Session.set('admin_collection_name', 'Users');\n  }\n});\n\nRouter.route(\"adminDashboardUsersEdit\", {\n  path: \"/admin/Users/:_id/edit\",\n  template: \"AdminDashboardUsersEdit\",\n  controller: \"AdminController\",\n  data: function() {\n    return {\n      user: Meteor.users.find(this.params._id).fetch(),\n      roles: Roles.getRolesForUser(this.params._id),\n      otherRoles: _.difference(_.map(Meteor.roles.find().fetch(), function(role) {\n        return role.name;\n      }), Roles.getRolesForUser(this.params._id))\n    };\n  },\n  action: function() {\n    return this.render();\n  },\n  onAfterAction: function() {\n    Session.set('admin_title', '账号管理');\n    Session.set('admin_subtitle', '编辑用户 ' + this.params._id);\n    Session.set('admin_collection_page', '');\n    Session.set('admin_collection_name', 'Users');\n    Session.set('admin_id', this.params._id);\n    return Session.set('admin_doc', Meteor.users.findOne({\n      _id: this.params._id\n    }));\n  }\n});\n","@adminCollectionObject = (collection) ->\n\tif typeof AdminConfig.collections[collection] != 'undefined' and typeof AdminConfig.collections[collection].collectionObject != 'undefined'\n\t\tAdminConfig.collections[collection].collectionObject\n\telse\n\t\tlookup collection\n\n@adminCallback = (name, args, callback) ->\n\tstop = false\n\tif typeof AdminConfig?.callbacks?[name] == 'function'\n\t\tstop = AdminConfig.callbacks[name](args...) is false\n\tif typeof callback == 'function'\n\t\tcallback args... unless stop\n\n@lookup = (obj, root, required=true) ->\n\tif typeof root == 'undefined'\n\t\troot = if Meteor.isServer then global else window\n\tif typeof obj == 'string'\n\t\tref = root\n\t\tarr = obj.split '.'\n\t\tcontinue while arr.length and (ref = ref[arr.shift()])\n\t\tif not ref and required\n\t\t\tthrow new Error(obj + ' is not in the ' + root.toString())\n\t\telse\n\t\t\treturn ref\n\treturn obj\n\t\n@parseID = (id) ->\n\tif typeof id == 'string'\n\t\tif(id.indexOf(\"ObjectID\") > -1)\n\t\t\treturn new Mongo.ObjectID(id.slice(id.indexOf('\"') + 1,id.lastIndexOf('\"')))\n\t\telse\n\t\t\treturn id\n\telse\n\t\treturn id\n\n@parseIDs = (ids) ->\n    return _.map ids, (id) ->\n        parseID id\n","this.adminCollectionObject = function(collection) {\n  if (typeof AdminConfig.collections[collection] !== 'undefined' && typeof AdminConfig.collections[collection].collectionObject !== 'undefined') {\n    return AdminConfig.collections[collection].collectionObject;\n  } else {\n    return lookup(collection);\n  }\n};\n\nthis.adminCallback = function(name, args, callback) {\n  var ref1, stop;\n  stop = false;\n  if (typeof (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? (ref1 = AdminConfig.callbacks) != null ? ref1[name] : void 0 : void 0) === 'function') {\n    stop = AdminConfig.callbacks[name](...args) === false;\n  }\n  if (typeof callback === 'function') {\n    if (!stop) {\n      return callback(...args);\n    }\n  }\n};\n\nthis.lookup = function(obj, root, required = true) {\n  var arr, ref;\n  if (typeof root === 'undefined') {\n    root = Meteor.isServer ? global : window;\n  }\n  if (typeof obj === 'string') {\n    ref = root;\n    arr = obj.split('.');\n    while (arr.length && (ref = ref[arr.shift()])) {\n      continue;\n    }\n    if (!ref && required) {\n      throw new Error(obj + ' is not in the ' + root.toString());\n    } else {\n      return ref;\n    }\n  }\n  return obj;\n};\n\nthis.parseID = function(id) {\n  if (typeof id === 'string') {\n    if (id.indexOf(\"ObjectID\") > -1) {\n      return new Mongo.ObjectID(id.slice(id.indexOf('\"') + 1, id.lastIndexOf('\"')));\n    } else {\n      return id;\n    }\n  } else {\n    return id;\n  }\n};\n\nthis.parseIDs = function(ids) {\n  return _.map(ids, function(id) {\n    return parseID(id);\n  });\n};\n","@AdminTables = {}\n\nadminTablesDom = '<\"box\"<\"box-header\"<\"box-toolbar\"<\"pull-left\"<lf>><\"pull-right\"p>>><\"box-body\"t>><r>'\n\nadminEditButton = {\n\tdata: '_id'\n\ttitle: 'Edit'\n\tcreatedCell: (node, cellData, rowData) ->\n\t\t$(node).html(Blaze.toHTMLWithData Template.adminEditBtn, {_id: cellData})\n\twidth: '40px'\n\torderable: false\n}\nadminDelButton = {\n\tdata: '_id'\n\ttitle: 'Delete'\n\tcreatedCell: (node, cellData, rowData) ->\n\t\t$(node).html(Blaze.toHTMLWithData Template.adminDeleteBtn, {_id: cellData})\n\twidth: '40px'\n\torderable: false\n}\n\nadminEditDelButtons = [\n\tadminEditButton,\n\tadminDelButton\n]\n\ndefaultColumns = () -> [\n  data: '_id',\n  title: 'ID'\n]\n\nadminTablePubName = (collection) ->\n\t\"admin_tabular_#{collection}\"\n\nadminCreateTables = (collections) ->\n\t_.each AdminConfig?.collections, (collection, name) ->\n\t\t_.defaults collection, {\n\t\t\tshowEditColumn: true\n\t\t\tshowDelColumn: true\n\t\t\tshowInSideBar: true\n\t\t}\n\n\t\tcolumns = _.map collection.tableColumns, (column) ->\n\t\t\tif column.template\n\t\t\t\tcreatedCell = (node, cellData, rowData) ->\n\t\t\t\t\t$(node).html ''\n\t\t\t\t\tBlaze.renderWithData(Template[column.template], {value: cellData, doc: rowData}, node)\n\n\t\t\tdata: column.name\n\t\t\ttitle: column.label\n\t\t\tcreatedCell: createdCell\n\n\t\tif columns.length == 0\n\t\t\tcolumns = defaultColumns()\n\n\t\tif collection.showEditColumn\n\t\t\tcolumns.push(adminEditButton)\n\t\tif collection.showDelColumn\n\t\t\tcolumns.push(adminDelButton)\n\n\t\tAdminTables[name] = new Tabular.Table\n\t\t\tname: name\n\t\t\tcollection: adminCollectionObject(name)\n\t\t\tpub: collection.children and adminTablePubName(name)\n\t\t\tsub: collection.sub\n\t\t\tcolumns: columns\n\t\t\textraFields: collection.extraFields\n\t\t\tdom: adminTablesDom\n\t\t\tselector: collection.selector || ->\n\t\t\t\treturn {}\n\nadminCreateRoutes = (collections) ->\n\t_.each collections, adminCreateRouteView\n\t_.each collections,\tadminCreateRouteNew\n\t_.each collections, adminCreateRouteEdit\n\nadminCreateRouteView = (collection, collectionName) ->\n\tRouter.route \"adminDashboard#{collectionName}View\",\n\t\tadminCreateRouteViewOptions collection, collectionName\n\nadminCreateRouteViewOptions = (collection, collectionName) ->\n\toptions =\n\t\tpath: \"/admin/#{collectionName}\"\n\t\ttemplate: \"AdminDashboardViewWrapper\"\n\t\tcontroller: \"AdminController\"\n\t\tdata: ->\n\t\t\tadmin_table: AdminTables[collectionName]\n\t\taction: ->\n\t\t\t@render()\n\t\tonAfterAction: ->\n\t\t\tSession.set 'admin_title', collectionName\n\t\t\tSession.set 'admin_subtitle', 'View'\n\t\t\tSession.set 'admin_collection_name', collectionName\n\t\t\tcollection.routes?.view?.onAfterAction\n\t_.defaults options, collection.routes?.view\n\nadminCreateRouteNew = (collection, collectionName) ->\n\tRouter.route \"adminDashboard#{collectionName}New\",\n\t\tadminCreateRouteNewOptions collection, collectionName\n\nadminCreateRouteNewOptions = (collection, collectionName) ->\n\toptions =\n\t\tpath: \"/admin/#{collectionName}/new\"\n\t\ttemplate: \"AdminDashboardNew\"\n\t\tcontroller: \"AdminController\"\n\t\taction: ->\n\t\t\t@render()\n\t\tonAfterAction: ->\n\t\t\tSession.set 'admin_title', AdminDashboard.collectionLabel collectionName\n\t\t\tSession.set 'admin_subtitle', 'Create new'\n\t\t\tSession.set 'admin_collection_page', 'new'\n\t\t\tSession.set 'admin_collection_name', collectionName\n\t\t\tcollection.routes?.new?.onAfterAction\n\t\tdata: ->\n\t\t\tadmin_collection: adminCollectionObject collectionName\n\t_.defaults options, collection.routes?.new\n\nadminCreateRouteEdit = (collection, collectionName) ->\n\tRouter.route \"adminDashboard#{collectionName}Edit\",\n\t\tadminCreateRouteEditOptions collection, collectionName\n\nadminCreateRouteEditOptions = (collection, collectionName) ->\n\toptions =\n\t\tpath: \"/admin/#{collectionName}/:_id/edit\"\n\t\ttemplate: \"AdminDashboardEdit\"\n\t\tcontroller: \"AdminController\"\n\t\twaitOn: ->\n\t\t\tMeteor.subscribe 'adminCollectionDoc', collectionName, parseID(@params._id)\n\t\t\tcollection.routes?.edit?.waitOn\n\t\taction: ->\n\t\t\t@render()\n\t\tonAfterAction: ->\n\t\t\tSession.set 'admin_title', AdminDashboard.collectionLabel collectionName\n\t\t\tSession.set 'admin_subtitle', 'Edit ' + @params._id\n\t\t\tSession.set 'admin_collection_page', 'edit'\n\t\t\tSession.set 'admin_collection_name', collectionName\n\t\t\tSession.set 'admin_id', parseID(@params._id)\n\t\t\tSession.set 'admin_doc', adminCollectionObject(collectionName).findOne _id : parseID(@params._id)\n\t\t\tcollection.routes?.edit?.onAfterAction\n\t\tdata: ->\n\t\t\tadmin_collection: adminCollectionObject collectionName\n\t_.defaults options, collection.routes?.edit\n\nadminPublishTables = (collections) ->\n\t_.each collections, (collection, name) ->\n\t\tif not collection.children then return undefined\n\t\tMeteor.publishComposite adminTablePubName(name), (tableName, ids, fields) ->\n\t\t\tcheck tableName, String\n\t\t\tcheck ids, Array\n\t\t\tcheck fields, Match.Optional Object\n\n\t\t\textraFields = _.reduce collection.extraFields, (fields, name) ->\n\t\t\t\tfields[name] = 1\n\t\t\t\tfields\n\t\t\t, {}\n\t\t\t_.extend fields, extraFields\n\n\t\t\t@unblock()\n\n\t\t\tfind: ->\n\t\t\t\t@unblock()\n\t\t\t\tadminCollectionObject(name).find {_id: {$in: ids}}, {fields: fields}\n\t\t\tchildren: collection.children\n\nMeteor.startup ->\n\tadminCreateTables AdminConfig?.collections\n\tadminCreateRoutes AdminConfig?.collections\n\tadminPublishTables AdminConfig?.collections if Meteor.isServer\n\n\tif AdminTables.Users then return undefined\n\n\tAdminTables.Users = new Tabular.Table\n\t\t# Modify selector to allow search by email\n\t\tchangeSelector: (selector, userId) ->\n\t\t\t$or = selector['$or']\n\t\t\t$or and selector['$or'] = _.map $or, (exp) ->\n\t\t\t\tif exp.emails?['$regex']?\n\t\t\t\t\temails: $elemMatch: address: exp.emails\n\t\t\t\telse\n\t\t\t\t\texp\n\t\t\tselector\n\n\t\tname: 'Users'\n\t\tcollection: Meteor.users\n\t\tcolumns: _.union [\n\t\t\t{\n\t\t\t\tdata: '_id'\n\t\t\t\ttitle: 'Admin'\n\t\t\t\t# TODO: use `tmpl`\n\t\t\t\tcreatedCell: (node, cellData, rowData) ->\n\t\t\t\t\t$(node).html(Blaze.toHTMLWithData Template.adminUsersIsAdmin, {_id: cellData})\n\t\t\t\twidth: '40px'\n\t\t\t}\n\t\t\t{\n\t\t\t\tdata: 'emails'\n\t\t\t\ttitle: 'Email'\n\t\t\t\trender: (value) ->\n\t\t\t\t\tvalue[0].address\n\t\t\t\tsearchable: true\n\t\t\t}\n\t\t\t{\n\t\t\t\tdata: 'emails'\n\t\t\t\ttitle: 'Mail'\n\t\t\t\t# TODO: use `tmpl`\n\t\t\t\tcreatedCell: (node, cellData, rowData) ->\n\t\t\t\t\t$(node).html(Blaze.toHTMLWithData Template.adminUsersMailBtn, {emails: cellData})\n\t\t\t\twidth: '40px'\n\t\t\t}\n\t\t\t{ data: 'createdAt', title: 'Joined' }\n\t\t], adminEditDelButtons\n\t\tdom: adminTablesDom\n","var adminCreateRouteEdit, adminCreateRouteEditOptions, adminCreateRouteNew, adminCreateRouteNewOptions, adminCreateRouteView, adminCreateRouteViewOptions, adminCreateRoutes, adminCreateTables, adminDelButton, adminEditButton, adminEditDelButtons, adminPublishTables, adminTablePubName, adminTablesDom, defaultColumns;\n\nthis.AdminTables = {};\n\nadminTablesDom = '<\"box\"<\"box-header\"<\"box-toolbar\"<\"pull-left\"<lf>><\"pull-right\"p>>><\"box-body\"t>><r>';\n\nadminEditButton = {\n  data: '_id',\n  title: 'Edit',\n  createdCell: function(node, cellData, rowData) {\n    return $(node).html(Blaze.toHTMLWithData(Template.adminEditBtn, {\n      _id: cellData\n    }));\n  },\n  width: '40px',\n  orderable: false\n};\n\nadminDelButton = {\n  data: '_id',\n  title: 'Delete',\n  createdCell: function(node, cellData, rowData) {\n    return $(node).html(Blaze.toHTMLWithData(Template.adminDeleteBtn, {\n      _id: cellData\n    }));\n  },\n  width: '40px',\n  orderable: false\n};\n\nadminEditDelButtons = [adminEditButton, adminDelButton];\n\ndefaultColumns = function() {\n  return [\n    {\n      data: '_id',\n      title: 'ID'\n    }\n  ];\n};\n\nadminTablePubName = function(collection) {\n  return `admin_tabular_${collection}`;\n};\n\nadminCreateTables = function(collections) {\n  return _.each(typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.collections : void 0, function(collection, name) {\n    var columns;\n    _.defaults(collection, {\n      showEditColumn: true,\n      showDelColumn: true,\n      showInSideBar: true\n    });\n    columns = _.map(collection.tableColumns, function(column) {\n      var createdCell;\n      if (column.template) {\n        createdCell = function(node, cellData, rowData) {\n          $(node).html('');\n          return Blaze.renderWithData(Template[column.template], {\n            value: cellData,\n            doc: rowData\n          }, node);\n        };\n      }\n      return {\n        data: column.name,\n        title: column.label,\n        createdCell: createdCell\n      };\n    });\n    if (columns.length === 0) {\n      columns = defaultColumns();\n    }\n    if (collection.showEditColumn) {\n      columns.push(adminEditButton);\n    }\n    if (collection.showDelColumn) {\n      columns.push(adminDelButton);\n    }\n    return AdminTables[name] = new Tabular.Table({\n      name: name,\n      collection: adminCollectionObject(name),\n      pub: collection.children && adminTablePubName(name),\n      sub: collection.sub,\n      columns: columns,\n      extraFields: collection.extraFields,\n      dom: adminTablesDom,\n      selector: collection.selector || function() {\n        return {};\n      }\n    });\n  });\n};\n\nadminCreateRoutes = function(collections) {\n  _.each(collections, adminCreateRouteView);\n  _.each(collections, adminCreateRouteNew);\n  return _.each(collections, adminCreateRouteEdit);\n};\n\nadminCreateRouteView = function(collection, collectionName) {\n  return Router.route(`adminDashboard${collectionName}View`, adminCreateRouteViewOptions(collection, collectionName));\n};\n\nadminCreateRouteViewOptions = function(collection, collectionName) {\n  var options, ref;\n  options = {\n    path: `/admin/${collectionName}`,\n    template: \"AdminDashboardViewWrapper\",\n    controller: \"AdminController\",\n    data: function() {\n      return {\n        admin_table: AdminTables[collectionName]\n      };\n    },\n    action: function() {\n      return this.render();\n    },\n    onAfterAction: function() {\n      var ref, ref1;\n      Session.set('admin_title', collectionName);\n      Session.set('admin_subtitle', 'View');\n      Session.set('admin_collection_name', collectionName);\n      return (ref = collection.routes) != null ? (ref1 = ref.view) != null ? ref1.onAfterAction : void 0 : void 0;\n    }\n  };\n  return _.defaults(options, (ref = collection.routes) != null ? ref.view : void 0);\n};\n\nadminCreateRouteNew = function(collection, collectionName) {\n  return Router.route(`adminDashboard${collectionName}New`, adminCreateRouteNewOptions(collection, collectionName));\n};\n\nadminCreateRouteNewOptions = function(collection, collectionName) {\n  var options, ref;\n  options = {\n    path: `/admin/${collectionName}/new`,\n    template: \"AdminDashboardNew\",\n    controller: \"AdminController\",\n    action: function() {\n      return this.render();\n    },\n    onAfterAction: function() {\n      var ref, ref1;\n      Session.set('admin_title', AdminDashboard.collectionLabel(collectionName));\n      Session.set('admin_subtitle', 'Create new');\n      Session.set('admin_collection_page', 'new');\n      Session.set('admin_collection_name', collectionName);\n      return (ref = collection.routes) != null ? (ref1 = ref.new) != null ? ref1.onAfterAction : void 0 : void 0;\n    },\n    data: function() {\n      return {\n        admin_collection: adminCollectionObject(collectionName)\n      };\n    }\n  };\n  return _.defaults(options, (ref = collection.routes) != null ? ref.new : void 0);\n};\n\nadminCreateRouteEdit = function(collection, collectionName) {\n  return Router.route(`adminDashboard${collectionName}Edit`, adminCreateRouteEditOptions(collection, collectionName));\n};\n\nadminCreateRouteEditOptions = function(collection, collectionName) {\n  var options, ref;\n  options = {\n    path: `/admin/${collectionName}/:_id/edit`,\n    template: \"AdminDashboardEdit\",\n    controller: \"AdminController\",\n    waitOn: function() {\n      var ref, ref1;\n      Meteor.subscribe('adminCollectionDoc', collectionName, parseID(this.params._id));\n      return (ref = collection.routes) != null ? (ref1 = ref.edit) != null ? ref1.waitOn : void 0 : void 0;\n    },\n    action: function() {\n      return this.render();\n    },\n    onAfterAction: function() {\n      var ref, ref1;\n      Session.set('admin_title', AdminDashboard.collectionLabel(collectionName));\n      Session.set('admin_subtitle', 'Edit ' + this.params._id);\n      Session.set('admin_collection_page', 'edit');\n      Session.set('admin_collection_name', collectionName);\n      Session.set('admin_id', parseID(this.params._id));\n      Session.set('admin_doc', adminCollectionObject(collectionName).findOne({\n        _id: parseID(this.params._id)\n      }));\n      return (ref = collection.routes) != null ? (ref1 = ref.edit) != null ? ref1.onAfterAction : void 0 : void 0;\n    },\n    data: function() {\n      return {\n        admin_collection: adminCollectionObject(collectionName)\n      };\n    }\n  };\n  return _.defaults(options, (ref = collection.routes) != null ? ref.edit : void 0);\n};\n\nadminPublishTables = function(collections) {\n  return _.each(collections, function(collection, name) {\n    if (!collection.children) {\n      return void 0;\n    }\n    return Meteor.publishComposite(adminTablePubName(name), function(tableName, ids, fields) {\n      var extraFields;\n      check(tableName, String);\n      check(ids, Array);\n      check(fields, Match.Optional(Object));\n      extraFields = _.reduce(collection.extraFields, function(fields, name) {\n        fields[name] = 1;\n        return fields;\n      }, {});\n      _.extend(fields, extraFields);\n      this.unblock();\n      return {\n        find: function() {\n          this.unblock();\n          return adminCollectionObject(name).find({\n            _id: {\n              $in: ids\n            }\n          }, {\n            fields: fields\n          });\n        },\n        children: collection.children\n      };\n    });\n  });\n};\n\nMeteor.startup(function() {\n  adminCreateTables(typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.collections : void 0);\n  adminCreateRoutes(typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.collections : void 0);\n  if (Meteor.isServer) {\n    adminPublishTables(typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.collections : void 0);\n  }\n  if (AdminTables.Users) {\n    return void 0;\n  }\n  return AdminTables.Users = new Tabular.Table({\n    // Modify selector to allow search by email\n    changeSelector: function(selector, userId) {\n      var $or;\n      $or = selector['$or'];\n      $or && (selector['$or'] = _.map($or, function(exp) {\n        var ref;\n        if (((ref = exp.emails) != null ? ref['$regex'] : void 0) != null) {\n          return {\n            emails: {\n              $elemMatch: {\n                address: exp.emails\n              }\n            }\n          };\n        } else {\n          return exp;\n        }\n      }));\n      return selector;\n    },\n    name: 'Users',\n    collection: Meteor.users,\n    columns: _.union([\n      {\n        data: '_id',\n        title: 'Admin',\n        // TODO: use `tmpl`\n        createdCell: function(node,\n      cellData,\n      rowData) {\n          return $(node).html(Blaze.toHTMLWithData(Template.adminUsersIsAdmin,\n      {\n            _id: cellData\n          }));\n        },\n        width: '40px'\n      },\n      {\n        data: 'emails',\n        title: 'Email',\n        render: function(value) {\n          return value[0].address;\n        },\n        searchable: true\n      },\n      {\n        data: 'emails',\n        title: 'Mail',\n        // TODO: use `tmpl`\n        createdCell: function(node,\n      cellData,\n      rowData) {\n          return $(node).html(Blaze.toHTMLWithData(Template.adminUsersMailBtn,\n      {\n            emails: cellData\n          }));\n        },\n        width: '40px'\n      },\n      {\n        data: 'createdAt',\n        title: 'Joined'\n      }\n    ], adminEditDelButtons),\n    dom: adminTablesDom\n  });\n});\n","@AdminCollectionsCount = new Mongo.Collection 'adminCollectionsCount'","Template.AdminLayout.created = function () {\n  var self = this;\n\n  self.minHeight = new ReactiveVar(\n    $(window).height() - $('.main-header').height());\n\n  $(window).resize(function () {\n    self.minHeight.set($(window).height() - $('.main-header').height());\n  });\n\n  $('body').addClass('fixed');\n};\n\nTemplate.AdminLayout.destroyed = function () {\n  $('body').removeClass('fixed');\n};\n\nTemplate.AdminLayout.helpers({\n  minHeight: function () {\n    return Template.instance().minHeight.get() + 'px'\n  },\n  login: function(){\n    if(Meteor.userId()){\n        return true;\n    }else{\n        return false;\n    }\n  }\n});\n\ndataTableOptions = {\n    \"aaSorting\": [],\n    \"bPaginate\": true,\n    \"bLengthChange\": false,\n    \"bFilter\": true,\n    \"bSort\": true,\n    \"bInfo\": true,\n    \"bAutoWidth\": false\n};\n","Template.registerHelper('AdminTables', AdminTables);\n\nadminCollections = ->\n\tcollections = {}\n\n\tif typeof AdminConfig != 'undefined'  and typeof AdminConfig.collections == 'object'\n\t\tcollections = AdminConfig.collections\n\n\tcollections.Users =\n\t\tcollectionObject: Meteor.users\n\t\ticon: 'user'\n\t\tlabel: '账号管理'\n\n\t_.map collections, (obj, key) ->\n\t\tobj = _.extend obj, {name: key}\n\t\tobj = _.defaults obj, {label: key, icon: 'plus', color: 'blue'}\n\t\tobj = _.extend obj,\n\t\t\tviewPath: Router.path \"adminDashboard#{key}View\"\n\t\t\tnewPath: Router.path \"adminDashboard#{key}New\"\n\nUI.registerHelper 'AdminConfig', ->\n\tAdminConfig if typeof AdminConfig != 'undefined'\n\nUI.registerHelper 'admin_skin', ->\n\tAdminConfig?.skin or 'blue'\n\nUI.registerHelper 'admin_collections', adminCollections\n\nUI.registerHelper 'admin_collection_name', ->\n\tSession.get 'admin_collection_name'\n\nUI.registerHelper 'admin_current_id', ->\n\tSession.get 'admin_id'\n\nUI.registerHelper 'admin_current_doc', ->\n\tSession.get 'admin_doc'\n\nUI.registerHelper 'admin_is_users_collection', ->\n\tSession.get('admin_collection_name') == 'Users'\n\nUI.registerHelper 'admin_sidebar_items', ->\n\tAdminDashboard.sidebarItems\n\nUI.registerHelper 'admin_collection_items', ->\n\titems = []\n\t_.each AdminDashboard.collectionItems, (fn) =>\n\t\titem = fn @name, '/admin/' + @name\n\t\tif item?.title and item?.url\n\t\t\titems.push item\n\titems\n\nUI.registerHelper 'admin_omit_fields', ->\n\tif typeof AdminConfig.autoForm != 'undefined' and typeof AdminConfig.autoForm.omitFields == 'object'\n\t\tglobal = AdminConfig.autoForm.omitFields\n\tif not Session.equals('admin_collection_name','Users') and typeof AdminConfig != 'undefined' and typeof AdminConfig.collections[Session.get 'admin_collection_name'].omitFields == 'object'\n\t\tcollection = AdminConfig.collections[Session.get 'admin_collection_name'].omitFields\n\tif typeof global == 'object' and typeof collection == 'object'\n\t\t_.union global, collection\n\telse if typeof global == 'object'\n\t\tglobal\n\telse if typeof collection == 'object'\n\t\tcollection\n\nUI.registerHelper 'AdminSchemas', ->\n\tAdminDashboard.schemas\n\nUI.registerHelper 'adminGetSkin', ->\n\tif typeof AdminConfig.dashboard != 'undefined' and typeof AdminConfig.dashboard.skin == 'string'\n\t\tAdminConfig.dashboard.skin\n\telse\n\t\t'blue'\n\nUI.registerHelper 'adminIsUserInRole', (_id,role)->\n\tRoles.userIsInRole _id, role\n\nUI.registerHelper 'adminGetUsers', ->\n\tMeteor.users\n\nUI.registerHelper 'adminGetUserSchema', ->\n\tif _.has(AdminConfig, 'userSchema')\n\t\tschema = AdminConfig.userSchema\n\telse if typeof Meteor.users._c2 == 'object'\n\t\tschema = Meteor.users.simpleSchema()\n\n\treturn schema\n\nUI.registerHelper 'adminCollectionLabel', (collection)->\n\tAdminDashboard.collectionLabel(collection) if collection?\n\nUI.registerHelper 'adminCollectionCount', (collection)->\n\tif collection == 'Users'\n\t\tMeteor.users.find().count()\n\telse\n\t\tAdminCollectionsCount.findOne({collection: collection})?.count\n\nUI.registerHelper 'adminTemplate', (collection, mode)->\n\tif collection?.toLowerCase() != 'users' && typeof AdminConfig?.collections?[collection]?.templates != 'undefined'\n\t\tAdminConfig.collections[collection].templates[mode]\n\nUI.registerHelper 'adminGetCollection', (collection)->\n\t_.find adminCollections(), (item) -> item.name == collection\n\nUI.registerHelper 'adminWidgets', ->\n\tif typeof AdminConfig.dashboard != 'undefined' and typeof AdminConfig.dashboard.widgets != 'undefined'\n\t\tAdminConfig.dashboard.widgets\n\nUI.registerHelper 'adminUserEmail', (user) ->\n\tif user && user.emails && user.emails[0] && user.emails[0].address\n\t\tuser.emails[0].address\n\telse if user && user.services && user.services.facebook && user.services.facebook.email\n\t\tuser.services.facebook.email\n\telse if user && user.services && user.services.google && user.services.google.email\n\t\tuser.services.google.email\n","var adminCollections;\n\nTemplate.registerHelper('AdminTables', AdminTables);\n\nadminCollections = function() {\n  var collections;\n  collections = {};\n  if (typeof AdminConfig !== 'undefined' && typeof AdminConfig.collections === 'object') {\n    collections = AdminConfig.collections;\n  }\n  collections.Users = {\n    collectionObject: Meteor.users,\n    icon: 'user',\n    label: '账号管理'\n  };\n  return _.map(collections, function(obj, key) {\n    obj = _.extend(obj, {\n      name: key\n    });\n    obj = _.defaults(obj, {\n      label: key,\n      icon: 'plus',\n      color: 'blue'\n    });\n    return obj = _.extend(obj, {\n      viewPath: Router.path(`adminDashboard${key}View`),\n      newPath: Router.path(`adminDashboard${key}New`)\n    });\n  });\n};\n\nUI.registerHelper('AdminConfig', function() {\n  if (typeof AdminConfig !== 'undefined') {\n    return AdminConfig;\n  }\n});\n\nUI.registerHelper('admin_skin', function() {\n  return (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.skin : void 0) || 'blue';\n});\n\nUI.registerHelper('admin_collections', adminCollections);\n\nUI.registerHelper('admin_collection_name', function() {\n  return Session.get('admin_collection_name');\n});\n\nUI.registerHelper('admin_current_id', function() {\n  return Session.get('admin_id');\n});\n\nUI.registerHelper('admin_current_doc', function() {\n  return Session.get('admin_doc');\n});\n\nUI.registerHelper('admin_is_users_collection', function() {\n  return Session.get('admin_collection_name') === 'Users';\n});\n\nUI.registerHelper('admin_sidebar_items', function() {\n  return AdminDashboard.sidebarItems;\n});\n\nUI.registerHelper('admin_collection_items', function() {\n  var items;\n  items = [];\n  _.each(AdminDashboard.collectionItems, (fn) => {\n    var item;\n    item = fn(this.name, '/admin/' + this.name);\n    if ((item != null ? item.title : void 0) && (item != null ? item.url : void 0)) {\n      return items.push(item);\n    }\n  });\n  return items;\n});\n\nUI.registerHelper('admin_omit_fields', function() {\n  var collection, global;\n  if (typeof AdminConfig.autoForm !== 'undefined' && typeof AdminConfig.autoForm.omitFields === 'object') {\n    global = AdminConfig.autoForm.omitFields;\n  }\n  if (!Session.equals('admin_collection_name', 'Users') && typeof AdminConfig !== 'undefined' && typeof AdminConfig.collections[Session.get('admin_collection_name')].omitFields === 'object') {\n    collection = AdminConfig.collections[Session.get('admin_collection_name')].omitFields;\n  }\n  if (typeof global === 'object' && typeof collection === 'object') {\n    return _.union(global, collection);\n  } else if (typeof global === 'object') {\n    return global;\n  } else if (typeof collection === 'object') {\n    return collection;\n  }\n});\n\nUI.registerHelper('AdminSchemas', function() {\n  return AdminDashboard.schemas;\n});\n\nUI.registerHelper('adminGetSkin', function() {\n  if (typeof AdminConfig.dashboard !== 'undefined' && typeof AdminConfig.dashboard.skin === 'string') {\n    return AdminConfig.dashboard.skin;\n  } else {\n    return 'blue';\n  }\n});\n\nUI.registerHelper('adminIsUserInRole', function(_id, role) {\n  return Roles.userIsInRole(_id, role);\n});\n\nUI.registerHelper('adminGetUsers', function() {\n  return Meteor.users;\n});\n\nUI.registerHelper('adminGetUserSchema', function() {\n  var schema;\n  if (_.has(AdminConfig, 'userSchema')) {\n    schema = AdminConfig.userSchema;\n  } else if (typeof Meteor.users._c2 === 'object') {\n    schema = Meteor.users.simpleSchema();\n  }\n  return schema;\n});\n\nUI.registerHelper('adminCollectionLabel', function(collection) {\n  if (collection != null) {\n    return AdminDashboard.collectionLabel(collection);\n  }\n});\n\nUI.registerHelper('adminCollectionCount', function(collection) {\n  var ref;\n  if (collection === 'Users') {\n    return Meteor.users.find().count();\n  } else {\n    return (ref = AdminCollectionsCount.findOne({\n      collection: collection\n    })) != null ? ref.count : void 0;\n  }\n});\n\nUI.registerHelper('adminTemplate', function(collection, mode) {\n  var ref, ref1;\n  if ((collection != null ? collection.toLowerCase() : void 0) !== 'users' && typeof (typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? (ref = AdminConfig.collections) != null ? (ref1 = ref[collection]) != null ? ref1.templates : void 0 : void 0 : void 0) !== 'undefined') {\n    return AdminConfig.collections[collection].templates[mode];\n  }\n});\n\nUI.registerHelper('adminGetCollection', function(collection) {\n  return _.find(adminCollections(), function(item) {\n    return item.name === collection;\n  });\n});\n\nUI.registerHelper('adminWidgets', function() {\n  if (typeof AdminConfig.dashboard !== 'undefined' && typeof AdminConfig.dashboard.widgets !== 'undefined') {\n    return AdminConfig.dashboard.widgets;\n  }\n});\n\nUI.registerHelper('adminUserEmail', function(user) {\n  if (user && user.emails && user.emails[0] && user.emails[0].address) {\n    return user.emails[0].address;\n  } else if (user && user.services && user.services.facebook && user.services.facebook.email) {\n    return user.services.facebook.email;\n  } else if (user && user.services && user.services.google && user.services.google.email) {\n    return user.services.google.email;\n  }\n});\n","Template.AdminDashboardViewWrapper.rendered = ->\n\tnode = @firstNode\n\n\t@autorun ->\n\t\tdata = Template.currentData()\n\n\t\tif data.view then Blaze.remove data.view\n\t\twhile node.firstChild\n\t\t\tnode.removeChild node.firstChild\n\n\t\tdata.view = Blaze.renderWithData Template.AdminDashboardView, data, node\n\nTemplate.AdminDashboardViewWrapper.destroyed = ->\n\tBlaze.remove @data.view\n\nTemplate.AdminDashboardView.rendered = ->\n\ttable = @$('.dataTable').DataTable();\n\tfilter = @$('.dataTables_filter')\n\tlength = @$('.dataTables_length')\n\n\tfilter.html '\n\t\t<div class=\"input-group\">\n\t\t\t<input type=\"search\" class=\"form-control input-sm\" placeholder=\"Search\"></input>\n\t\t\t<div class=\"input-group-btn\">\n\t\t\t\t<button class=\"btn btn-sm btn-default\">\n\t\t\t\t\t<i class=\"fa fa-search\"></i>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t'\n\n\tlength.html '\n\t\t<select class=\"form-control input-sm\">\n\t\t\t<option value=\"10\">10</option>\n\t\t\t<option value=\"25\">25</option>\n\t\t\t<option value=\"50\">50</option>\n\t\t\t<option value=\"100\">100</option>\n\t\t</select>\n\t'\n\n\tfilter.find('input').on 'keyup', ->\n\t\ttable.search(@value).draw()\n\n\tlength.find('select').on 'change', ->\n\t\ttable.page.len(parseInt @value).draw()\n\nTemplate.AdminDashboardView.helpers\n\thasDocuments: ->\n\t\tAdminCollectionsCount.findOne({collection: Session.get 'admin_collection_name'})?.count > 0\n\tnewPath: ->\n\t\tRouter.path 'adminDashboard' + Session.get('admin_collection_name') + 'New'\n\nTemplate.adminEditBtn.helpers\n\tpath: ->\n\t\tRouter.path \"adminDashboard\" + Session.get('admin_collection_name') + \"Edit\", _id: @_id\n","Template.AdminDashboardViewWrapper.rendered = function() {\n  var node;\n  node = this.firstNode;\n  return this.autorun(function() {\n    var data;\n    data = Template.currentData();\n    if (data.view) {\n      Blaze.remove(data.view);\n    }\n    while (node.firstChild) {\n      node.removeChild(node.firstChild);\n    }\n    return data.view = Blaze.renderWithData(Template.AdminDashboardView, data, node);\n  });\n};\n\nTemplate.AdminDashboardViewWrapper.destroyed = function() {\n  return Blaze.remove(this.data.view);\n};\n\nTemplate.AdminDashboardView.rendered = function() {\n  var filter, length, table;\n  table = this.$('.dataTable').DataTable();\n  filter = this.$('.dataTables_filter');\n  length = this.$('.dataTables_length');\n  filter.html('<div class=\"input-group\"> <input type=\"search\" class=\"form-control input-sm\" placeholder=\"Search\"></input> <div class=\"input-group-btn\"> <button class=\"btn btn-sm btn-default\"> <i class=\"fa fa-search\"></i> </button> </div> </div>');\n  length.html('<select class=\"form-control input-sm\"> <option value=\"10\">10</option> <option value=\"25\">25</option> <option value=\"50\">50</option> <option value=\"100\">100</option> </select>');\n  filter.find('input').on('keyup', function() {\n    return table.search(this.value).draw();\n  });\n  return length.find('select').on('change', function() {\n    return table.page.len(parseInt(this.value)).draw();\n  });\n};\n\nTemplate.AdminDashboardView.helpers({\n  hasDocuments: function() {\n    var ref;\n    return ((ref = AdminCollectionsCount.findOne({\n      collection: Session.get('admin_collection_name')\n    })) != null ? ref.count : void 0) > 0;\n  },\n  newPath: function() {\n    return Router.path('adminDashboard' + Session.get('admin_collection_name') + 'New');\n  }\n});\n\nTemplate.adminEditBtn.helpers({\n  path: function() {\n    return Router.path(\"adminDashboard\" + Session.get('admin_collection_name') + \"Edit\", {\n      _id: this._id\n    });\n  }\n});\n","Template.AdminLayout.events\n\t'click .btn-delete': (e,t) ->\n\t\t_id = $(e.target).attr('doc')\n\t\tif Session.equals 'admin_collection_name', 'Users' \n\t\t\tSession.set 'admin_id', _id\n\t\t\tSession.set 'admin_doc', Meteor.users.findOne(_id)\n\t\telse\n\t\t\tSession.set 'admin_id', parseID(_id)\n\t\t\tSession.set 'admin_doc', adminCollectionObject(Session.get('admin_collection_name')).findOne(parseID(_id))\n\nTemplate.AdminDeleteModal.events\n\t'click #confirm-delete': () ->\n\t\tcollection = Session.get 'admin_collection_name'\n\t\t_id = Session.get 'admin_id'\n\t\tMeteor.call 'adminRemoveDoc', collection, _id, (e,r)->\n\t\t\t$('#admin-delete-modal').modal('hide')\n\nTemplate.AdminDashboardUsersEdit.events\n\t'click .btn-add-role': (e,t) ->\n\t\tconsole.log 'adding user'\n\t\tMeteor.call 'adminAddUserToRole', $(e.target).attr('user'), $(e.target).attr('role')\n\t'click .btn-remove-role': (e,t) ->\n\t\tconsole.log 'removing user'\n\t\tMeteor.call 'adminRemoveUserToRole', $(e.target).attr('user'), $(e.target).attr('role')\n\nTemplate.AdminHeader.events\n\t'click .btn-sign-out': () ->\n\t\tMeteor.logout ->\n\t\t\tRouter.go(AdminConfig?.logoutRedirect or '/')","Template.AdminLayout.events({\n  'click .btn-delete': function(e, t) {\n    var _id;\n    _id = $(e.target).attr('doc');\n    if (Session.equals('admin_collection_name', 'Users')) {\n      Session.set('admin_id', _id);\n      return Session.set('admin_doc', Meteor.users.findOne(_id));\n    } else {\n      Session.set('admin_id', parseID(_id));\n      return Session.set('admin_doc', adminCollectionObject(Session.get('admin_collection_name')).findOne(parseID(_id)));\n    }\n  }\n});\n\nTemplate.AdminDeleteModal.events({\n  'click #confirm-delete': function() {\n    var _id, collection;\n    collection = Session.get('admin_collection_name');\n    _id = Session.get('admin_id');\n    return Meteor.call('adminRemoveDoc', collection, _id, function(e, r) {\n      return $('#admin-delete-modal').modal('hide');\n    });\n  }\n});\n\nTemplate.AdminDashboardUsersEdit.events({\n  'click .btn-add-role': function(e, t) {\n    console.log('adding user');\n    return Meteor.call('adminAddUserToRole', $(e.target).attr('user'), $(e.target).attr('role'));\n  },\n  'click .btn-remove-role': function(e, t) {\n    console.log('removing user');\n    return Meteor.call('adminRemoveUserToRole', $(e.target).attr('user'), $(e.target).attr('role'));\n  }\n});\n\nTemplate.AdminHeader.events({\n  'click .btn-sign-out': function() {\n    return Meteor.logout(function() {\n      return Router.go((typeof AdminConfig !== \"undefined\" && AdminConfig !== null ? AdminConfig.logoutRedirect : void 0) || '/');\n    });\n  }\n});\n","/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)\n * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)\n * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.\n *\n * Version: 1.3.0\n *\n */\n(function(f){jQuery.fn.extend({slimScroll:function(h){var a=f.extend({width:\"auto\",height:\"250px\",size:\"7px\",color:\"#000\",position:\"right\",distance:\"1px\",start:\"top\",opacity:0.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:\"#333\",railOpacity:0.2,railDraggable:!0,railClass:\"slimScrollRail\",barClass:\"slimScrollBar\",wrapperClass:\"slimScrollDiv\",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:\"7px\",railBorderRadius:\"7px\"},h);this.each(function(){function r(d){if(s){d=d||\nwindow.event;var c=0;d.wheelDelta&&(c=-d.wheelDelta/120);d.detail&&(c=d.detail/3);f(d.target||d.srcTarget||d.srcElement).closest(\".\"+a.wrapperClass).is(b.parent())&&m(c,!0);d.preventDefault&&!k&&d.preventDefault();k||(d.returnValue=!1)}}function m(d,f,h){k=!1;var e=d,g=b.outerHeight()-c.outerHeight();f&&(e=parseInt(c.css(\"top\"))+d*parseInt(a.wheelStep)/100*c.outerHeight(),e=Math.min(Math.max(e,0),g),e=0<d?Math.ceil(e):Math.floor(e),c.css({top:e+\"px\"}));l=parseInt(c.css(\"top\"))/(b.outerHeight()-c.outerHeight());\ne=l*(b[0].scrollHeight-b.outerHeight());h&&(e=d,d=e/b[0].scrollHeight*b.outerHeight(),d=Math.min(Math.max(d,0),g),c.css({top:d+\"px\"}));b.scrollTop(e);b.trigger(\"slimscrolling\",~~e);v();p()}function C(){window.addEventListener?(this.addEventListener(\"DOMMouseScroll\",r,!1),this.addEventListener(\"mousewheel\",r,!1),this.addEventListener(\"MozMousePixelScroll\",r,!1)):document.attachEvent(\"onmousewheel\",r)}function w(){u=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),D);c.css({height:u+\"px\"});\nvar a=u==b.outerHeight()?\"none\":\"block\";c.css({display:a})}function v(){w();clearTimeout(A);l==~~l?(k=a.allowPageScroll,B!=l&&b.trigger(\"slimscroll\",0==~~l?\"top\":\"bottom\")):k=!1;B=l;u>=b.outerHeight()?k=!0:(c.stop(!0,!0).fadeIn(\"fast\"),a.railVisible&&g.stop(!0,!0).fadeIn(\"fast\"))}function p(){a.alwaysVisible||(A=setTimeout(function(){a.disableFadeOut&&s||(x||y)||(c.fadeOut(\"slow\"),g.fadeOut(\"slow\"))},1E3))}var s,x,y,A,z,u,l,B,D=30,k=!1,b=f(this);if(b.parent().hasClass(a.wrapperClass)){var n=b.scrollTop(),\nc=b.parent().find(\".\"+a.barClass),g=b.parent().find(\".\"+a.railClass);w();if(f.isPlainObject(h)){if(\"height\"in h&&\"auto\"==h.height){b.parent().css(\"height\",\"auto\");b.css(\"height\",\"auto\");var q=b.parent().parent().height();b.parent().css(\"height\",q);b.css(\"height\",q)}if(\"scrollTo\"in h)n=parseInt(a.scrollTo);else if(\"scrollBy\"in h)n+=parseInt(a.scrollBy);else if(\"destroy\"in h){c.remove();g.remove();b.unwrap();return}m(n,!1,!0)}}else{a.height=\"auto\"==a.height?b.parent().height():a.height;n=f(\"<div></div>\").addClass(a.wrapperClass).css({position:\"relative\",\noverflow:\"hidden\",width:a.width,height:a.height});b.css({overflow:\"hidden\",width:a.width,height:a.height});var g=f(\"<div></div>\").addClass(a.railClass).css({width:a.size,height:\"100%\",position:\"absolute\",top:0,display:a.alwaysVisible&&a.railVisible?\"block\":\"none\",\"border-radius\":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),c=f(\"<div></div>\").addClass(a.barClass).css({background:a.color,width:a.size,position:\"absolute\",top:0,opacity:a.opacity,display:a.alwaysVisible?\n\"block\":\"none\",\"border-radius\":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:99}),q=\"right\"==a.position?{right:a.distance}:{left:a.distance};g.css(q);c.css(q);b.wrap(n);b.parent().append(c);b.parent().append(g);a.railDraggable&&c.bind(\"mousedown\",function(a){var b=f(document);y=!0;t=parseFloat(c.css(\"top\"));pageY=a.pageY;b.bind(\"mousemove.slimscroll\",function(a){currTop=t+a.pageY-pageY;c.css(\"top\",currTop);m(0,c.position().top,!1)});\nb.bind(\"mouseup.slimscroll\",function(a){y=!1;p();b.unbind(\".slimscroll\")});return!1}).bind(\"selectstart.slimscroll\",function(a){a.stopPropagation();a.preventDefault();return!1});g.hover(function(){v()},function(){p()});c.hover(function(){x=!0},function(){x=!1});b.hover(function(){s=!0;v();p()},function(){s=!1;p()});b.bind(\"touchstart\",function(a,b){a.originalEvent.touches.length&&(z=a.originalEvent.touches[0].pageY)});b.bind(\"touchmove\",function(b){k||b.originalEvent.preventDefault();b.originalEvent.touches.length&&\n(m((z-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0),z=b.originalEvent.touches[0].pageY)});w();\"bottom\"===a.start?(c.css({top:b.outerHeight()-c.outerHeight()}),m(0,!0)):\"top\"!==a.start&&(m(f(a.start).position().top,null,!0),a.alwaysVisible||c.hide());C()}});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);","# Add hooks used by many forms\nAutoForm.addHooks [\n\t\t'admin_insert',\n\t\t'admin_update',\n\t\t'adminNewUser',\n\t\t'adminUpdateUser',\n\t\t'adminSendResetPasswordEmail',\n\t\t'adminChangePassword'],\n\tbeginSubmit: ->\n\t\t$('.btn-primary').addClass('disabled')\n\tendSubmit: ->\n\t\t$('.btn-primary').removeClass('disabled')\n\tonError: (formType, error)->\n\t\tAdminDashboard.alertFailure error.message\n\nAutoForm.hooks\n\tadmin_insert:\n\t\tonSubmit: (insertDoc, updateDoc, currentDoc)->\n\t\t\thook = @\n\t\t\tMeteor.call 'adminInsertDoc', insertDoc, Session.get('admin_collection_name'), (e,r)->\n\t\t\t\tif e\n\t\t\t\t\thook.done(e)\n\t\t\t\telse\n\t\t\t\t\tadminCallback 'onInsert', [Session.get 'admin_collection_name', insertDoc, updateDoc, currentDoc], (collection) ->\n\t\t\t\t\t\thook.done null, collection\n\t\t\treturn false\n\t\tonSuccess: (formType, collection)->\n\t\t\tAdminDashboard.alertSuccess 'Successfully created'\n\t\t\tRouter.go \"/admin/#{collection}\"\n\n\tadmin_update:\n\t\tonSubmit: (insertDoc, updateDoc, currentDoc)->\n\t\t\thook = @\n\t\t\tMeteor.call 'adminUpdateDoc', updateDoc, Session.get('admin_collection_name'), Session.get('admin_id'), (e,r)->\n\t\t\t\tif e\n\t\t\t\t\thook.done(e)\n\t\t\t\telse\n\t\t\t\t\tadminCallback 'onUpdate', [Session.get 'admin_collection_name', insertDoc, updateDoc, currentDoc], (collection) ->\n\t\t\t\t\t\thook.done null, collection\n\t\t\treturn false\n\t\tonSuccess: (formType, collection)->\n\t\t\tAdminDashboard.alertSuccess 'Successfully updated'\n\t\t\tRouter.go \"/admin/#{collection}\"\n\n\tadminNewUser:\n\t\tonSuccess: (formType, result)->\n\t\t\tAdminDashboard.alertSuccess 'Created user'\n\t\t\tRouter.go '/admin/Users'\n\n\tadminUpdateUser:\n\t\tonSubmit: (insertDoc, updateDoc, currentDoc)->\n\t\t\tMeteor.call 'adminUpdateUser', updateDoc, Session.get('admin_id'), @done\n\t\t\treturn false\n\t\tonSuccess: (formType, result)->\n\t\t\tAdminDashboard.alertSuccess 'Updated user'\n\t\t\tRouter.go '/admin/Users'\n\n\tadminSendResetPasswordEmail:\n\t\tonSuccess: (formType, result)->\n\t\t\tAdminDashboard.alertSuccess 'Email sent'\n\n\tadminChangePassword:\n\t\tonSuccess: (operation, result, template)->\n\t\t\tAdminDashboard.alertSuccess 'Password reset'\n","// Add hooks used by many forms\nAutoForm.addHooks(['admin_insert', 'admin_update', 'adminNewUser', 'adminUpdateUser', 'adminSendResetPasswordEmail', 'adminChangePassword'], {\n  beginSubmit: function() {\n    return $('.btn-primary').addClass('disabled');\n  },\n  endSubmit: function() {\n    return $('.btn-primary').removeClass('disabled');\n  },\n  onError: function(formType, error) {\n    return AdminDashboard.alertFailure(error.message);\n  }\n});\n\nAutoForm.hooks({\n  admin_insert: {\n    onSubmit: function(insertDoc, updateDoc, currentDoc) {\n      var hook;\n      hook = this;\n      Meteor.call('adminInsertDoc', insertDoc, Session.get('admin_collection_name'), function(e, r) {\n        if (e) {\n          return hook.done(e);\n        } else {\n          return adminCallback('onInsert', [Session.get('admin_collection_name', insertDoc, updateDoc, currentDoc)], function(collection) {\n            return hook.done(null, collection);\n          });\n        }\n      });\n      return false;\n    },\n    onSuccess: function(formType, collection) {\n      AdminDashboard.alertSuccess('Successfully created');\n      return Router.go(`/admin/${collection}`);\n    }\n  },\n  admin_update: {\n    onSubmit: function(insertDoc, updateDoc, currentDoc) {\n      var hook;\n      hook = this;\n      Meteor.call('adminUpdateDoc', updateDoc, Session.get('admin_collection_name'), Session.get('admin_id'), function(e, r) {\n        if (e) {\n          return hook.done(e);\n        } else {\n          return adminCallback('onUpdate', [Session.get('admin_collection_name', insertDoc, updateDoc, currentDoc)], function(collection) {\n            return hook.done(null, collection);\n          });\n        }\n      });\n      return false;\n    },\n    onSuccess: function(formType, collection) {\n      AdminDashboard.alertSuccess('Successfully updated');\n      return Router.go(`/admin/${collection}`);\n    }\n  },\n  adminNewUser: {\n    onSuccess: function(formType, result) {\n      AdminDashboard.alertSuccess('Created user');\n      return Router.go('/admin/Users');\n    }\n  },\n  adminUpdateUser: {\n    onSubmit: function(insertDoc, updateDoc, currentDoc) {\n      Meteor.call('adminUpdateUser', updateDoc, Session.get('admin_id'), this.done);\n      return false;\n    },\n    onSuccess: function(formType, result) {\n      AdminDashboard.alertSuccess('Updated user');\n      return Router.go('/admin/Users');\n    }\n  },\n  adminSendResetPasswordEmail: {\n    onSuccess: function(formType, result) {\n      return AdminDashboard.alertSuccess('Email sent');\n    }\n  },\n  adminChangePassword: {\n    onSuccess: function(operation, result, template) {\n      return AdminDashboard.alertSuccess('Password reset');\n    }\n  }\n});\n"]}