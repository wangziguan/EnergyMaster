{"version":3,"sources":["meteor://💻app/imports/ui/layouts/deviceList/deviceList.js","meteor://💻app/imports/ui/layouts/deviceUpdate/deviceUpdate.js","meteor://💻app/imports/ui/layouts/login/login.js","meteor://💻app/imports/ui/components/page/jbootstrappage/jBootstrapPage.js","meteor://💻app/imports/ui/components/page/page.js","meteor://💻app/imports/ui/index.js","meteor://💻app/imports/api/devices/lists.js","meteor://💻app/imports/api/devices/methods.js","meteor://💻app/imports/api/mqtts/lists.js","meteor://💻app/imports/api/mqtts/methods.js","meteor://💻app/imports/startup/both/_settings.js","meteor://💻app/imports/startup/both/index.js","meteor://💻app/imports/startup/both/schemas.js","meteor://💻app/imports/startup/client/adminConfig.js","meteor://💻app/imports/startup/client/index.js","meteor://💻app/imports/startup/client/routers.js","meteor://💻app/client/main.js"],"names":["Template","module","link","v","Collection2","AutoForm","SimpleSchema","default","deviceList","onRendered","Session","set","PageTools","init","self","autorun","getCollectionCount","get","subscribe","Meteor","userId","refresh","helpers","search","select","DeviceList","find","events","limitShow","$","val","setLimit","parseInt","setSkip","event","clientId","currentTarget","trim","call","err","res","alert","imei","deviceInfoSearch","deviceInfoAll","eImei","Schemas","type","String","label","Date","autoValue","isInsert","attachSchema","hooks","onSuccess","formType","result","modal","formToDoc","doc","deviceUpdate","param","JSON","stringify","window","open","backstretch","Mousetrap","Router","login","fade","duration","addClass","bind","txt","keyup","e","keyCode","username","password","loginWithPassword","error","user","console","log","uid","Roles","userIsInRole","go","onDestroyed","removeClass","remove","unbind","fn","jBootstrapPage","config","size","c","pageSize","total","maxPages","realPageCount","lastSelectedIndex","selectedIndex","maxPageButton","onPageClicked","firstBtn","preBtn","nextBtn","lastBtn","each","$this","extend","bindALL","Math","ceil","append","pageCount","pNum","index","parent","change","pageNumber","TableTotalKey","TableLimitKey","selectNum","attr","skip","TableSkipKey","limit","currentPage","totalPage","maxButton","endPages","startPages","html","after","bindPages","selectedBtn","onClickPage","mathPrePage","currButtonNum","currPage","maxPage","showPage","middle","floor","d","mathNextPage","offsetRight","pageBtn","text","hasClass","bindFirsts","bindLasts","onPageBtnClick","$_this","selectedText","on","click","preventDefault","trigger","jQuery","obj","pageIndex","setTotal","methodName","count","Mongo","Collection","methods","isUser","findOne","MqttMessages","GeneralMessages","EnergyMessages","WavesampleMessages","ValidatedMethod","connect","name","validate","topic","validator","run","unblock","mqttConnect","settings","mqttURL","insert","raw","_","defaults","mqttTopic","elasticSearchURL","AppURL","AdminConfig","adminEmails","collections","skin","AdminDashboard","addSidebarItem","icon","urls","title","url","path","route","template","controller","onAfterAction"],"mappings":"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","file":"/app.js","sourcesContent":["import { Template } from 'meteor/templating';\nimport { Collection2 } from 'meteor/aldeed:collection2';\nimport { AutoForm } from 'meteor/aldeed:autoform';\n\nimport SimpleSchema from 'simpl-schema';\n\nimport './deviceList.html';\nimport '../../components/page/page.js';\nimport '../../../startup/both/schemas.js';\nimport '../../../api/devices/lists.js';\nimport '../../../api/devices/methods.js';\n\nTemplate.deviceList.onRendered(function () {\n    Session.set(\"SearchKey\", null);\n    PageTools.init();  \n\n    var self=this;\n    this.autorun(function () {\n        PageTools.getCollectionCount(\"deviceListCount\", Session.get(\"SearchKey\"));\n        self.subscribe(\"currentDeviceList\", Meteor.userId(), Session.get(\"SearchKey\"), Session.get(\"TableLimitKey\"), Session.get(\"TableSkipKey\"));\n    });\n    Session.set(\"userStatus\", null);\n    PageTools.refresh()\n});\n\nTemplate.deviceList.helpers({\n    /**\n     * Device list 列表\n     * @returns {*}\n     */\n    \"deviceListInfo\": function () {\n        var search = Session.get(\"SearchKey\");\n        var select = {};\n        if (search) {\n        }\n        return DeviceList.find(select);\n    },\n    \n    \"submitButtonStatus\": function () {\n        if (Session.get(\"userStatus\")) {\n            return false;\n        } else {\n            return true;\n        }\n    },\n});\n\nTemplate.deviceList.events({\n    \"change #limitShow\": function () {\n        const limitShow = $(\"#limitShow option:selected\").val();\n        PageTools.setLimit(parseInt(limitShow));\n        PageTools.setSkip(0);\n    },\n\n    \"change .clientIds\": function (event) {\n        const clientId = $(event.currentTarget).val().trim();\n        Meteor.call(\"checkClientId\", clientId, function (err, res) {\n            if (err) {\n                alert(err);\n            } else{\n                if (res == \"ClientId is not null\") {\n                    Session.set(\"userStatus\", true);\n                } else {\n                    Session.set(\"userStatus\", false);\n                }\n            }          \n        });\n    },\n    \"change .imeis\": function (event) {\n        var imei = $(event.currentTarget).val().trim();\n        Meteor.call(\"checkImei\", imei, function (err, res) {\n            if (err) {\n                alert(err);\n            } else{\n                if (res == \"Imei is not null\") {\n                    Session.set(\"userStatus\", true);\n                } else {\n                    Session.set(\"userStatus\", false);\n                }\n            }           \n        });\n    },\n\n    'click #searchDevice': function (event) {\n        deviceInfoSearch();\n    },\n    'click #viewAllDevice': function (event) {\n        deviceInfoAll();\n    },\n\n});\n\nconst deviceInfoSearch = function () {\n    const eImei = $(\"#cIMEI\").val();\n    Session.set(\"SearchKey\", {\n        \"imei\": eImei,\n    });\n    PageTools.setSkip(0);\n};\n\nconst deviceInfoAll = function () {\n    Session.set(\"SearchKey\", null);\n    PageTools.setSkip(0);\n};\n\n\nSchemas.deviceList = new SimpleSchema({\n    \"clientId\": {\n        type: String,\n        label: \"ID\",\n    },\n    \"location\": {\n        type: String,\n        label: \"位置\",\n    },\n    \"imei\": {\n        type: String,\n        label: \"IMEI\",\n    },\n    \"createAt\": {\n        type: Date,\n        label: \"createAt\",\n        autoValue: function () {\n            if (this.isInsert) {\n                return new Date();\n            }\n        }\n    }\n});\nDeviceList.attachSchema(Schemas.deviceList);\n\nAutoForm.hooks({\n    \"adddeviceList\": {\n        onSuccess: function (formType, result) {\n            Meteor.call(\"createDevice\", result, function(err, result){\n                if(!err){\n                    $(\"#addList\").modal(\"hide\");\n                }else{\n                    //console.log(err);\n                }\n            });\n            $(\"#addList\").modal(\"hide\");\n            \n        },\n        formToDoc: function (doc) {\n            return doc;\n        }\n    }\n});","import { Template } from 'meteor/templating';\n\nimport './deviceUpdate.html';\nimport '../../components/page/page.js';\nimport '../../../startup/both/schemas.js';\nimport '../../../api/devices/lists.js';\nimport '../../../api/devices/methods.js'\n\nTemplate.deviceUpdate.onRendered(function () {\n    Session.set(\"SearchKey\", null);\n    PageTools.init();  \n\n    var self=this;\n    this.autorun(function () {\n        PageTools.getCollectionCount(\"deviceListCount\", Session.get(\"SearchKey\"));\n        self.subscribe(\"currentDeviceList\", Meteor.userId(), Session.get(\"SearchKey\"), Session.get(\"TableLimitKey\"), Session.get(\"TableSkipKey\"));\n    });\n    PageTools.refresh()\n});\n\nTemplate.deviceUpdate.helpers({\n    \"deviceListInfo\": function () {\n        var search = Session.get(\"SearchKey\");\n        var select = {};\n        if (search) {\n        }\n        return DeviceList.find(select);\n    },   \n});\n\nTemplate.deviceUpdate.events({\n    \"change #limitShow\": function () {\n        const limitShow = $(\"#limitShow option:selected\").val();\n        PageTools.setLimit(parseInt(limitShow));\n        PageTools.setSkip(0);\n    },\n    \n    'click #uploadOTA': function (event) {\n        // alert($(':input[name=OTAfile]').val());   \n    },\n    'click #downloadOTA': function (event) {\n\n    },\n    \n    'click #searchDevice': function (event) {\n        deviceInfoSearch();\n    },\n    'click #viewAllDevice': function (event) {\n        deviceInfoAll();\n    },\n\n    'click #downloadFirmware': function (event) {\n        const param = JSON.stringify(Session.get(\"SearchKey\"));\n        window.open(\"/download\" );\n    },\n});\n\nconst deviceInfoSearch = function () {\n    const eImei = $(\"#cIMEI\").val();\n    Session.set(\"SearchKey\", {\n        \"imei\": eImei,\n    });\n    PageTools.setSkip(0);\n};\n\nconst deviceInfoAll = function () {\n    Session.set(\"SearchKey\", null);\n    PageTools.setSkip(0);\n};","import { Template } from 'meteor/templating';\nimport { backstretch } from 'meteor/goltfisch:jquery-backstretch';\nimport { Mousetrap } from 'meteor/mousetrap:mousetrap';\nimport { Router} from 'meteor/iron:router';\n\nimport './login.html';\nimport './login.scss';\n\nTemplate.login.onRendered(function () {\n    $.backstretch([\n        \"/bg/1.jpg\",\"/bg/2.jpg\",\"/bg/3.jpg\",\"/bg/4.jpg\"\n        ], {\n        fade: 1000,duration: 8000\n    });\n\n    $(\"body\").addClass(\"loginClient\");\n    // 绑定enter键\n    Mousetrap.bind('enter', function () {\n        login();\n    });\n    // input框选中时按下enter键\n    var txt = $(\"input\");\n    txt.keyup(function (e) {\n        if (e.keyCode == 13)\n            login();\n    });\n});\n\n// 点击登录按钮\nTemplate.login.events({\n    'click #login-js': function () {\n        login();\n    }\n});\n\nvar login = function () {\n    var username = $('[id=username_content]').val().trim();\n    var password = $('[id=pwd_content]').val().trim();\n\n    Meteor.loginWithPassword(username, password, function (error) {\n        var user = {};\n        user.username = username;\n        if (error) {\n            //insertTransactionRecord(user, \"loginClient\", \"login\", {message: \"login failed\"});\n            alert(\"用户名或密码错误！\");\n            console.log(error)\n        } else {\n            user.uid = Meteor.userId();\n            //insertTransactionRecord(user, \"loginClient\", \"login\", {message: \"login success\"});\n            Session.set(\"loginUserName\", username);\n\n            if (Roles.userIsInRole(Meteor.userId(), [\"admin\"], \"user-group\")) {\n                console.log('login success!');\n                Router.go(\"/admin\");\n            }\n        }\n    });\n};\n\nTemplate.login.onDestroyed(function () {\n    $(\"body\").removeClass(\"loginClient\");\n    $(\".backstretch\").remove();\n    Mousetrap.unbind('enter');\n});","(function ($) {\n    $.fn.jBootstrapPage = function (config) {\n\n        if (this.size() != 1)\n            $.error('请为这个插件提供一个唯一的编号');\n\n        var c = {\n            pageSize: 10,\n            total: 0,\n            maxPages: 1,\n            realPageCount: 1,\n            lastSelectedIndex: 1,\n            selectedIndex: 1,\n            maxPageButton: 3,\n            onPageClicked: null\n        };\n\n        var firstBtn, preBtn, nextBtn, lastBtn;\n\n        return this.each(function () {\n\n            var $this = $(this);\n            if (config) $.extend(c, config);\n\n            init();\n            bindALL();\n\n            function init() {\n                $this.find('li').remove();\n                c.maxPages = Math.ceil(c.total / c.pageSize);\n\n                if (c.maxPages < 1) return;\n                $this.append('<li class=\"disabled\"><a class=\"first\" href=\"#\">&laquo;</a></li>');\n                $this.append('<li class=\"disabled\"><a class=\"pre\" href=\"#\">上一页</a></li>');\n\n                var pageCount = c.maxPages < c.maxPageButton ? c.maxPages : c.maxPageButton;\n                var pNum = 0;\n                for (var index = 1; index <= pageCount; index++) {\n                    pNum++;\n                    $this.append('<li class=\"page\" pNum=\"' + pNum + '\"><a href=\"#\" page=\"' + index + '\">' + index + '</a></li>');\n                }\n\n                $this.append('<li class=\"disabled\"><a class=\"next\" href=\"#\">下一页</a></li>');\n                $this.append('<li><a class=\"last\" href=\"#\">&raquo;</a></li>');\n\n                if (c.maxPages == 1) {\n                    $this.find('li a.next').parent().addClass(\"disabled\");\n                    $this.find('li a.last').parent().addClass(\"disabled\");\n                } else {\n                    $this.find('li a.next').parent().removeClass(\"disabled\");\n                    $this.find('li a.last').parent().removeClass(\"disabled\");\n                }\n\n                $this.find('li:nth-child(3)').addClass('active');\n\n                firstBtn = $this.find('li a.first').parent();\n                preBtn = $this.find('li a.pre').parent();\n                lastBtn = $this.find('li a.last').parent();\n                nextBtn = $this.find('li a.next').parent();\n\n                //$this.append('第 <input style=\"width: 10%;height: 32px;\" type=\"number\" id=\"pageNumber\"> 页');\n                $(\"#pageNumber\").change(function () {\n                    var pageNumber = $('[id=pageNumber]').val();\n                    if (pageNumber != \"\" && pageNumber > 0 && pageNumber <= parseInt(Session.get(TableTotalKey) / Session.get(TableLimitKey) + 1)) {\n\n\n                        var selectNum = parseInt($this.parent().find('li.active').attr('pNum')) + 1;\n\n                        var skip = Session.get(TableSkipKey);\n                        var limit = Session.get(TableLimitKey);\n                        var total = Session.get(TableTotalKey);\n                        var currentPage = (skip / limit) + 1;\n                        var totalPage = parseInt(total / limit) + 1;\n                        var maxButton = c.maxPageButton;\n                        pageNumber = parseInt(pageNumber - 1);\n                        //console.log(limit);\n                        //console.log(pageNumber);\n\n                        var endPages = parseInt((pageNumber) / maxButton) * maxButton + maxButton + 1;\n                        //console.log(pageNumber);\n\n                        var startPages = parseInt((pageNumber) / maxButton) * maxButton + 1;\n\n                        if (endPages > totalPage) {\n                            endPages = totalPage + 1;\n                            startPages = endPages - maxButton;\n                        }\n                        //console.log(pageNumber);\n                        //console.log(endPages);\n                        //console.log(startPages);\n\n\n                        Session.set(TableSkipKey, Session.get(TableLimitKey) * (pageNumber));\n                        var selectedIndex = pageNumber;\n\n                        var pNum = 0;\n                        var html = '';\n                        for (var index = startPages; index < endPages; index++) {\n                            pNum++;\n                            html += '<li class=\"page\" pNum=\"' + pNum + '\"><a href=\"#\" page=\"' + index + '\">' + index + '</a></li>';\n                        }\n\n                        $this.parent().find('li.page').remove();\n                        $this.parent().find('li:nth-child(2)').after(html);\n\n                        bindPages();\n\n                        var selectedBtn = $this.parent().find('li.page').find('a[page=\"' + (selectedIndex + 1) + '\"]');\n                        onClickPage(selectedBtn);\n                    }\n                });\n            }\n\n            function mathPrePage(currButtonNum, currPage, maxPage, showPage) {\n                if (maxPage < 1) return;\n\n                //选中的按钮大于中间数，就进一位\n                var middle = Math.ceil(showPage / 2); // 4\n                // 4 > 3\n                // 5 - 4 + 3\n                if (currButtonNum != currPage && currButtonNum < middle) {\n                    $this.find('li.page').remove();\n\n                    //1 2 3 4 5 6 7 8 9 10\n                    //\n                    var endPages = currPage + Math.floor(middle / 2);\n                    if (endPages < c.maxPageButton) endPages = c.maxPageButton + 1;\n\n                    var startPages = endPages - c.maxPageButton;\n\n                    if (startPages <= 0)startPages = 1;\n\n                    if (endPages - startPages >= c.maxPageButton) {\n                        var d = endPages - startPages - c.maxPageButton;\n                        if (d == 0) d = 1;\n                        endPages -= d;\n                    }\n\n                    var pNum = 0;\n                    var html = '';\n                    for (var index = startPages; index <= endPages; index++) {\n                        pNum++;\n                        html += '<li class=\"page\" pNum=\"' + pNum + '\"><a href=\"#\" page=\"' + index + '\">' + index + '</a></li>';\n                    }\n\n                    $this.find('li:nth-child(2)').after(html);\n\n                    bindPages();\n                }\n            }\n\n            function mathNextPage(currButtonNum, currPage, maxPage, showPage) {\n                if (maxPage < 1) return;\n                var offsetRight = 2;\n                //选中的按钮大于中间数，就进一位\n                var middle = showPage - 1; // 4\n                // 4 > 3\n                // 5 - 4 + 3\n\n                if ((currButtonNum != currPage + 1 || maxPage > showPage) && currButtonNum >= middle) {\n                    //显示后面2个按钮\n                    var startPages = currPage - offsetRight;\n                    var endPages = currPage + middle;\n\n                    endPages = endPages >= maxPage ? maxPage : endPages;\n\n                    if (endPages <= c.maxPageButton) endPages = c.maxPageButton;\n\n                    if (endPages - startPages >= c.maxPageButton) {\n                        var d = endPages - startPages - c.maxPageButton;\n                        endPages -= d;\n                    }\n\n                    if (endPages == maxPage)endPages++;\n\n                    if (endPages - startPages < c.maxPageButton) {\n                        var d = c.maxPageButton - (endPages - startPages);\n                        startPages -= d;\n                    }\n\n                    var pNum = 0;\n                    var html = '';\n                    for (var index = startPages; index < endPages; index++) {\n                        pNum++;\n                        html += '<li class=\"page\" pNum=\"' + pNum + '\"><a href=\"#\" page=\"' + index + '\">' + index + '</a></li>';\n                    }\n\n                    $this.find('li.page').remove();\n                    $this.find('li:nth-child(2)').after(html);\n\n                    bindPages();\n                }\n\n\n                /*if((currButtonNum != currPage+1 || maxPage > showPage) && currButtonNum > middle) {\n                 var startPages = currPage - middle + offsetRight;\n\n                 var endPages = currPage + middle + offsetRight;\n                 endPages = endPages > maxPage ? maxPage : endPages;\n\n                 if(endPages < c.maxPageButton) endPages = c.maxPageButton;\n\n                 if(endPages - startPages > c.maxPageButton) {\n                 var d = endPages - startPages - c.maxPageButton;\n                 endPages -= d;\n                 }\n\n                 if(endPages - startPages < c.maxPageButton) {\n                 var d = c.maxPageButton - (endPages - startPages);\n                 startPages -= d;\n                 }\n\n                 var pNum = 0;\n                 var html = '';\n                 for(var index = startPages; index < endPages; index++) {\n                 pNum++;\n                 html += '<li class=\"page\" pNum=\"'+pNum+'\"><a href=\"#\" page=\"'+index+'\">'+index+'</a></li>';\n                 }\n\n                 $this.find('li.page').remove();\n                 $this.find('li:nth-child(2)').after(html);\n\n                 bindPages();\n                 }*/\n            }\n\n            function onClickPage(pageBtn) {\n                c.lastSelectedIndex = c.selectedIndex;\n                c.selectedIndex = parseInt(pageBtn.text());\n\n                if (c.onPageClicked) {\n                    c.onPageClicked.call(this, $this, c.selectedIndex - 1);\n                }\n\n                $this.find('li.active').removeClass('active');\n                pageBtn.parent().addClass('active');\n\n                if (c.selectedIndex > 1) {\n                    if (preBtn.hasClass('disabled')) {\n                        firstBtn.removeClass(\"disabled\");\n                        preBtn.removeClass(\"disabled\");\n\n                        bindFirsts();\n                    }\n                } else {\n                    if (!preBtn.hasClass('disabled')) {\n                        firstBtn.addClass(\"disabled\");\n                        preBtn.addClass(\"disabled\");\n                    }\n                }\n\n                if (c.selectedIndex >= c.maxPages) {\n                    if (!nextBtn.hasClass('disabled')) {\n                        nextBtn.addClass(\"disabled\");\n                        lastBtn.addClass(\"disabled\");\n                    }\n                } else {\n                    if (nextBtn.hasClass('disabled')) {\n                        nextBtn.removeClass(\"disabled\");\n                        lastBtn.removeClass(\"disabled\");\n\n                        bindLasts();\n                    }\n                }\n            }\n\n            function onPageBtnClick($_this) {\n                var selectedText = $_this.text();\n                var selectedBtn = $this.find('li.active').find('a');\n\n                if (selectedText == '下一页') {\n                    var selectedIndex = parseInt(selectedBtn.text());\n                    var selectNum = parseInt($this.find('li.active').attr('pNum')) + 1;\n                    if (selectNum > c.maxPageButton) selectNum = c.maxPageButton - 1;\n                    if (selectedIndex > 0) {\n                        mathNextPage(selectNum, selectedIndex, c.maxPages, c.maxPageButton);\n                        selectedBtn = $this.find('li.page').find('a[page=\"' + (selectedIndex + 1) + '\"]');\n                    }\n                }\n                else if (selectedText == '上一页') {\n                    var selectedIndex = parseInt(selectedBtn.text()) - 1;\n                    var selectNum = parseInt($this.find('li.active').attr('pNum')) - 1;\n                    if (selectNum < 1) selectNum = 1;\n\n                    //console.log(selectedIndex, selectNum);\n\n                    mathPrePage(selectNum, selectedIndex, c.maxPages, c.maxPageButton);\n                    selectedBtn = $this.find('li.page').find('a[page=\"' + (selectedIndex) + '\"]');\n                }\n                else if (selectedText == '»') {\n                    var selectedIndex = c.maxPages - 1;\n                    var selectNum = c.maxPages - 2;\n                    if (selectedIndex > 0) {\n                        mathNextPage(selectNum, selectedIndex, c.maxPages, c.maxPageButton);\n                        selectedBtn = $this.find('li.page').find('a[page=\"' + (selectedIndex + 1) + '\"]');\n                    }\n                }\n                else if (selectedText == '«') {\n                    var selectedIndex = 1;\n                    var selectNum = 1;\n                    if (c.maxPages > 10)\n                        selectNum = 0;\n\n                    mathPrePage(selectNum, selectedIndex, c.maxPages, c.maxPageButton);\n                    selectedBtn = $this.find('li.page').find('a[page=\"' + (selectedIndex) + '\"]');\n                }\n                else {\n                    selectedBtn = $_this;\n                }\n\n                onClickPage(selectedBtn);\n            }\n\n            function bindPages() {\n                $this.find(\"li.page a\").each(function () {\n                    if ($(this).parent().hasClass('disabled')) return;\n\n                    $(this).on('pageClick', function (e) {\n                        onPageBtnClick($(this));\n                    });\n                });\n\n                $this.find(\"li.page a\").click(function (e) {\n                    e.preventDefault();\n\n                    $(this).trigger('pageClick', e);\n                });\n            }\n\n            function bindFirsts() {\n                $this.find(\"li a.first,li a.pre\").each(function () {\n                    if ($(this).parent().hasClass('disabled')) return;\n\n                    $(this).unbind('pageClick');\n                    $(this).on('pageClick', function (e) {\n                        onPageBtnClick($(this));\n                    });\n                });\n            }\n\n            function bindLasts() {\n                $this.find(\"li a.last,li a.next\").each(function () {\n                    if ($(this).parent().hasClass('disabled')) return;\n\n                    $(this).unbind('pageClick');\n                    $(this).on('pageClick', function (e) {\n                        onPageBtnClick($(this));\n                    });\n                });\n            }\n\n            function bindALL() {\n                $this.find(\"li.page a,li a.first,li a.last,li a.pre,li a.next\").each(function () {\n                    if ($(this).parent().hasClass('disabled')) return;\n\n                    $(this).on('pageClick', function (e) {\n                        onPageBtnClick($(this));\n                    });\n                });\n\n                $this.find(\"li.page a,li a.first,li a.last,li a.pre,li a.next\").click(function (e) {\n                    e.preventDefault();\n\n                    if ($(this).parent().hasClass('disabled')) return;\n                    $(this).trigger('pageClick', e);\n                });\n            }\n        });\n    };\n})(jQuery);","import './jbootstrappage/jBootstrapPage.js';\n\nPageTools = {\n    /**\n     * 初始化 分页所有的配置\n     */\n    init: function (skip, limit, total) {\n        if (skip != null)\n            Session.set(\"TableSkipKey\", skip);\n        else\n            Session.set(\"TableSkipKey\", 0);\n        if (limit != null)\n            Session.set(\"TableLimitKey\", limit);\n        else\n            Session.set(\"TableLimitKey\", 10);\n        if (total != null)\n            Session.set(\"TableTotalKey\", total);\n        else\n            Session.set(\"TableTotalKey\", 0);\n    },\n    /**\n     * 刷新分页控件\n     */\n    refresh: function () {\n        $(\".pagination\").jBootstrapPage({\n            pageSize: Session.get(\"TableLimitKey\"),\n            total: Session.get(\"TableTotalKey\"),\n            maxPageButton: 10,\n            onPageClicked: function (obj, pageIndex) {\n                // alert((pageIndex+1)+'页');\n                Session.set(\"TableSkipKey\", Session.get(\"TableLimitKey\") * (pageIndex));\n            }\n        });\n    },\n    /**\n     * 设置总条数\n     * @param total\n     */\n    setTotal: function (total) {\n        if (total != null)\n            Session.set(\"TableTotalKey\", total);\n        else\n            Session.set(\"TableTotalKey\", 0);\n    },\n    /**\n     * 设置 skip\n     * @param skip\n     */\n    setSkip: function (skip) {\n        if (skip != null)\n            Session.set(\"TableSkipKey\", skip);\n        else\n            Session.set(\"TableSkipKey\", 0);\n    },\n    /**\n     * 设置每页大大小 limit\n     * @param limit\n     */\n    setLimit: function (limit) {\n        if (limit != null) {\n            Session.set(\"TableLimitKey\", limit);\n            PageTools.refresh();\n        }\n        else\n            Session.set(\"TableLimitKey\", 20);\n    },\n    getCollectionCount: function (methodName, search) {\n        Meteor.call(methodName, search, function (err, count) {\n            PageTools.setTotal(count);\n            PageTools.refresh();\n        });\n    },\n}","// import css文件\nimport './components/CSS/dashboard.scss';\nimport './components/CSS/components.css';\nimport './components/CSS/AdminLTE/skins/skin-blue-light.min.css';\nimport './components/CSS/AdminLTE/AdminLTE.min.css';\n\n// import 页面\nimport './layouts/login/login.js';\nimport './layouts/deviceList/deviceList.js';\nimport './layouts/deviceUpdate/deviceUpdate.js';","import { Mongo } from 'meteor/mongo';\n\nDeviceList = new Mongo.Collection(\"deviceList\");\n/**\n{\n    _id:\n    \"clientId\": \"1\",\n    \"location\": \"上海交通大学电信裙楼4-325\",\n    \"imei\": \"012345678901234\",\n    \"createAt\": new Date(),\n}\n*/","Meteor.methods({\n    \"checkClientId\": function (clientId) {\n        try {\n            const isUser = DeviceList.findOne({clientId: clientId});\n            if (isUser) {\n                return \"ClientId is not null\";\n            }  \n            else{\n                // console.log(\"ClientId is not found\");\n            }\n        } catch (e) {\n            // insertLog(e.message, e.stack);\n        }\n    },\n\n    \"checkImei\": function (imei) {\n        try {\n            const isUser = DeviceList.findOne({imei: imei});\n            if (isUser) {\n                return \"Imei is not null\";\n            }\n            else{\n                // console.log(\"Imei is not found\");\n            }    \n        } catch (e) {\n            // insertLog(e.message, e.stack);\n        }\n    },\n\n    \"deviceListCount\": function (search) {\n        try {\n            var select = {};\n            if (search) {\n                if (search.imei) {\n                    select.imei = search.imei;\n                }\n            }\n            return DeviceList.find(select).count();\n        } catch (e) {\n            // insertLog(e.message, e.stack);\n        }\n    },\n    \n});","import { Mongo } from 'meteor/mongo';\n\nMqttMessages = new Mongo.Collection(\"mqtt_messages\");\n/**\n{\n    _id:\n    \"topic\": \"ADE7953/012345678901234/out\",   \n    \"payload\": \"01010203040102030401020304010203040102030401020102fe\",\n    \"payload\": \"02010203040102030401020304fe\",\n    \"payload\": \"03(010203)x280...fe\",\n    \"createAt\": new Date(),\n}\n*/\n\nGeneralMessages = new Mongo.Collection(\"general_messages\");\n/**\n{\n    _id:\n    \"imei\": \"012345678901234\",\n    \"voltage\": \"220.05\",\n    \"current\": \"1.05\",\n    \"watt\": \"220.05\",\n    \"var\": \"1.05\",\n    \"va\": \"223.10\",\n    \"f\": \"50.02\",\n    \"period\": \"19.98\",\n    \"createAt\": new Date(),\n}\n*/\n\nEnergyMessages = new Mongo.Collection(\"energy_messages\");\n/**\n{\n    _id:\n    \"imei\": \"012345678901234\",\n    \"aenergy\": \"100.59\",\n    \"renergy\": \"10.32\",\n    \"apenergy\": \"110.03\",\n    \"createAt\": new Date(),\n}\n*/\n\nWavesampleMessages = new Mongo.Collection(\"wavesample_messages\");\n/**\n{\n    _id:\n    \"imei\": \"012345678901234\",\n    \"samples\": [1.00, 1.01, ..., 1.03], // 280\n    \"createAt\": new Date(),\n}\n*/","import { Meteor } from 'meteor/meteor';\nimport { ValidatedMethod } from 'meteor/mdg:validated-method';\nimport SimpleSchema from 'simpl-schema';\n\nconnect = new ValidatedMethod({\n    name: 'mqtts.connect',\n    validate: new SimpleSchema({\n        topic: String,\n    }).validator(),\n\n    run({ topic }) {\n        this.unblock();\n        MqttMessages.mqttConnect(Meteor.settings.mqttURL, topic, {\n            insert: true,\n            raw: false\n        })\n    },\n})","// Meteor.settings默认设置\nimport { Meteor } from 'meteor/meteor';\n\nif (typeof Meteor.settings === 'undefined'){\n  Meteor.settings = {};\n}\n\n_.defaults(Meteor.settings, {\n  mqttTopic: \"ADE7953/#\",\n  // mqttURL: \"http://47.106.72.131:1883\",\n  mqttURL: \"http://58.196.128.13:1883\",\n  elasticSearchURL: \"http://47.106.72.131:9200\",\n  AppURL: \"http://47.106.72.131:3000/\",\n})","import './_settings.js';\nimport './schemas.js';\n\nimport '../../api/devices/lists.js';\nimport '../../api/mqtts/lists.js';\nimport '../../api/devices/methods.js';\nimport '../../api/mqtts/methods.js';\n","Schemas = {};","// AdminConfig\nAdminConfig = {\n  name: 'EnergyMaster',\n  adminEmails: ['490842289@qq.com'],\n  collections: { },\n  skin: 'blue-light',\n};\n\n// AdminDashboard Sidebar\nAdminDashboard.addSidebarItem('设备管理', {\n  icon: 'cube',\n  urls: [\n    { title: '设备列表', url: AdminDashboard.path('/deviceList') },\n    { title: '固件更新', url: AdminDashboard.path('/deviceUpdate') }\n  ]\n});\n\nAdminDashboard.addSidebarItem('电能信息展示', {\n  icon: 'cube',\n  urls: [\n    { title: '电能信息', url: AdminDashboard.path('/energymessage') },\n  ]\n});\n","import './adminConfig.js';\nimport './routers.js';\n","import { Router } from 'meteor/iron:router';\n\nimport '/imports/ui';\n\n// 登录界面\nRouter.route('login', {\n    path: '/',\n    template: 'login'\n});\n\n// deviceList界面\nRouter.route('deviceList',{\n    path: AdminDashboard.path('deviceList'),\n    controller: 'AdminController',\n    onAfterAction: function () {\n        Session.set('admin_title', '设备列表');\n    },\n})\n\n// 固件更新界面\nRouter.route('deviceUpdate', {\n    path: AdminDashboard.path('deviceUpdate'),\n    controller: 'AdminController',\n    onAfterAction: function () {\n        Session.set('admin_title', '固件更新');\n    },\n});\n","import '/imports/startup/client';\nimport '/imports/startup/both';"]}